"use strict";(self.webpackChunkcellular_empire=self.webpackChunkcellular_empire||[]).push([[471],{2471:(Hu,ei,ge)=>{ge.r(ei),ge.d(ei,{HomeModule:()=>Fu});var H=ge(6814),$e=ge(95),l=ge(9468);let As=(()=>{var n;class t{}return(n=t).\u0275fac=function(i){return new(i||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[H.ez,$e.u5,$e.UX]}),t})();var ye=ge(7182);let ti=(()=>{var n;class t{constructor(){this.players={player1:{name:"User"},player2:{name:"Computer"}},this.gameConfig={mode:1,duration:5,difficulty:1}}resetPlayers(){this.players={player1:{name:""},player2:{name:""}}}resetGameConfig(){this.gameConfig={mode:1,duration:1,difficulty:1}}}return(n=t).\u0275fac=function(i){return new(i||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),t})();function Ns(n,t){if(1&n&&l._UZ(0,"div",12),2&n){const e=t.index,i=l.oxw().index,r=l.oxw();l.Gre("cell cell-",r.gameGrid[i][e],""),l.hYB("id","game_",i,"_",e,"")}}function Rs(n,t){if(1&n&&(l.TgZ(0,"div")(1,"div",10),l.YNc(2,Ns,1,5,"div",11),l.qZA()()),2&n){const e=t.$implicit;l.xp6(2),l.Q6J("ngForOf",e)}}function Ds(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",13)(1,"div",14),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.menu=2)}),l._uU(2,"Quick Game"),l.qZA(),l.TgZ(3,"div",15),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.menu=3)}),l._uU(4,"Multi Player Game"),l.qZA(),l.TgZ(5,"div",15),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.menu=4)}),l._uU(6,"About"),l.qZA(),l.TgZ(7,"div",15),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.navToPage())}),l._uU(8,"Leader Board"),l.qZA()()}}function Ls(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",16)(1,"div",17),l._uU(2,"- Quick Game -"),l.qZA(),l.TgZ(3,"div",18),l._uU(4,"Select Difficulty"),l.qZA(),l.TgZ(5,"div",19)(6,"div",20),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return r.difficulty=1,l.KtG(r.navToGame(1))}),l._uU(7,"Easy"),l.qZA(),l.TgZ(8,"div",20),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return r.difficulty=2,l.KtG(r.navToGame(1))}),l._uU(9,"Medium"),l.qZA(),l.TgZ(10,"div",20),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return r.difficulty=3,l.KtG(r.navToGame(1))}),l._uU(11,"Hard"),l.qZA()(),l.TgZ(12,"div",15),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.menu=1)}),l._uU(13,"Back"),l.qZA()()}}function ks(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",21)(1,"div",17),l._uU(2,"- Multi Player -"),l.qZA(),l.TgZ(3,"div",22),l._uU(4,"Player 1: "),l.TgZ(5,"input",23),l.NdJ("ngModelChange",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.player1Name=r)}),l.qZA()(),l.TgZ(6,"div",24),l._uU(7,"Player 2: "),l.TgZ(8,"input",23),l.NdJ("ngModelChange",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.player2Name=r)}),l.qZA()(),l.TgZ(9,"div",22),l._uU(10,"Duration: "),l.TgZ(11,"span",25),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.duration=5)}),l._uU(12,"5Years"),l.qZA(),l.TgZ(13,"span",25),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.duration=10)}),l._uU(14,"10Years"),l.qZA(),l.TgZ(15,"span",25),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.duration=20)}),l._uU(16,"20Years"),l.qZA()(),l.TgZ(17,"div",15),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.navToGame(2))}),l._uU(18,"Start"),l.qZA(),l.TgZ(19,"div",15),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.menu=1)}),l._uU(20,"Back"),l.qZA()()}if(2&n){const e=l.oxw();l.xp6(5),l.Q6J("ngModel",e.player1Name),l.xp6(3),l.Q6J("ngModel",e.player2Name),l.xp6(3),l.Gre("menu-button-small-",5==e.duration," p-3"),l.xp6(2),l.Gre("menu-button-small-",10==e.duration," p-3"),l.xp6(2),l.Gre("menu-button-small-",20==e.duration," p-3")}}function Ms(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",21)(1,"div",26),l._uU(2,"MSc.Project (COMP702) "),l.qZA(),l.TgZ(3,"div",27),l._uU(4,"Submitted By"),l.qZA(),l.TgZ(5,"div",28),l._uU(6,"Neeraj Jain Cherukunnu Jinachandran"),l.qZA(),l.TgZ(7,"div",28),l._uU(8,"201666803"),l.qZA(),l.TgZ(9,"div",29),l._uU(10,"Primary Supervisor"),l.qZA(),l.TgZ(11,"div",28),l._uU(12,"Louwe Kuijer"),l.qZA(),l.TgZ(13,"div",29),l._uU(14,"Secondary Supervisor"),l.qZA(),l.TgZ(15,"div",28),l._uU(16,"Qiyi Tang"),l.qZA(),l.TgZ(17,"div",30),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.menu=1)}),l._uU(18,"Back"),l.qZA()()}}let Fs=(()=>{var n;class t{constructor(i,r){this.router=i,this.gameService=r,this.rows=40,this.cols=90,this.menu=1,this.player1Name="",this.player2Name="",this.duration=5,this.difficulty=1,this.buildMaterial=[[[0,-1],[0,0],[0,1]],[[-1,0],[-1,1],[0,-1],[0,1],[1,1]],[[-1,1],[0,-1],[0,1],[1,0],[1,1]],[[0,0],[0,1],[1,0],[1,1]],[[-1,0],[0,-1],[0,1],[1,0]],[[-1,-2],[-1,1],[0,2],[1,-2],[1,2],[2,-1],[2,0],[2,1],[2,2]],[[-6,-4],[-6,-3],[-6,-2],[-6,2],[-6,3],[-6,4],[-4,-6],[-3,-6],[-2,-6],[-4,-1],[-3,-1],[-2,-1],[-4,1],[-3,1],[-2,1],[-4,6],[-3,6],[-2,6],[-1,-4],[-1,-3],[-1,-2],[-1,2],[-1,3],[-1,4],[1,-4],[1,-3],[1,-2],[1,2],[1,3],[1,4],[2,-6],[3,-6],[4,-6],[2,-1],[3,-1],[4,-1],[2,1],[3,1],[4,1],[2,6],[3,6],[4,6],[6,-4],[6,-3],[6,-2],[6,2],[6,3],[6,4]],[[0,0]]]}ngOnInit(){this.gameGrid=this.createEmptyGrid(this.rows,this.cols),this.addRandomCells(),this.addRandomCells(),this.playGame()}createEmptyGrid(i,r){let s=new Array(i);for(let o=0;o<i;o++)s[o]=new Array(r).fill(0);return s}playGame(){clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.runNextGeneration()},800)}runNextGeneration(){Math.floor(12*Math.random())%4==0&&this.addRandomCells(),this.gameGrid=this.calculateNextGeneration(this.gameGrid)}calculateNextGeneration(i){const r=this.createEmptyGrid(this.rows,this.cols);for(let s=0;s<this.rows;s++)for(let o=0;o<this.cols;o++){const a=i[s][o],c=this.countNeighbors(i,s,o);r[s][o]=0===a&&3===c?1:1===a&&(c<2||c>3)?0:a}return r}countNeighbors(i,r,s){let o=0;const a=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(let c=0;c<a.length;c++){const[d,u]=a[c];o+=i[(r+d+this.rows)%this.rows][(s+u+this.cols)%this.cols]}return o}addRandomCells(){var i=Math.floor(Math.random()*this.rows-6)+6,r=Math.floor(Math.random()*this.cols-6)+6,s=Math.floor(8*Math.random()),a=1;r>this.cols/2&&(a=-1),this.buildMaterial[s].forEach(c=>{var d=i+c[0],u=r+c[1]*a;this.gameGrid[d][u]=0===this.gameGrid[d][u]?1:0})}navToGame(i){1==i?(this.gameService.players.player1.name="User",this.gameService.players.player2.name="Computer",this.gameService.gameConfig.duration=5,this.gameService.gameConfig.difficulty=this.difficulty,this.gameService.gameConfig.mode=1,this.router.navigateByUrl("game")):""!=this.player1Name&&""!=this.player1Name&&(this.gameService.players.player1.name=this.player1Name,this.gameService.players.player2.name=this.player2Name,this.gameService.gameConfig.duration=this.duration,this.gameService.gameConfig.mode=2,this.router.navigateByUrl("game"))}navToPage(){this.router.navigateByUrl("leader-board")}}return(n=t).\u0275fac=function(i){return new(i||n)(l.Y36(ye.F0),l.Y36(ti))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-home"]],decls:15,vars:5,consts:[[1,"main-container","d-flex","flex-column","align-items-center","text-center"],["id","game",1,"game","p-4"],[4,"ngFor","ngForOf"],[1,""],[1,"title","my-5","text-uppercase"],[2,"color","#E1113B"],[1,"menu","d-flex","flex-column","align-items-center","text-center","mt-5"],["id","menu-1",4,"ngIf"],["id","menu-2",4,"ngIf"],["id","menu-3",4,"ngIf"],[1,"cell-container"],[3,"class","id",4,"ngFor","ngForOf"],[3,"id"],["id","menu-1"],[1,"menu-button",3,"click"],[1,"menu-button","pt-4",3,"click"],["id","menu-2"],[1,"menu-title"],[1,"menu-sub-title","mb-4"],[1,"d-flex","pt-4"],[1,"menu-button","p-3",3,"click"],["id","menu-3"],[1,"menu-sub-title","pt-3"],[1,"menu-input",3,"ngModel","ngModelChange"],[1,"menu-sub-title"],[3,"click"],[1,"pb-3"],[1,"menu-sub-title","pt-4"],[1,"menu-sub-title","text-light"],[1,"menu-sub-title","pt-5"],[1,"menu-button","pt-5",3,"click"]],template:function(i,r){1&i&&(l.TgZ(0,"div",0)(1,"div",1),l.YNc(2,Rs,3,1,"div",2),l.qZA(),l.TgZ(3,"div",3)(4,"div")(5,"div",4)(6,"span",5),l._uU(7,"Cellular"),l.qZA(),l._uU(8,"Empire"),l.qZA()(),l.TgZ(9,"div",6),l.YNc(10,Ds,9,0,"div",7),l.YNc(11,Ls,14,0,"div",8),l.YNc(12,ks,21,11,"div",9),l.YNc(13,Ms,19,0,"div",9),l._UZ(14,"div"),l.qZA()()()),2&i&&(l.xp6(2),l.Q6J("ngForOf",r.gameGrid),l.xp6(8),l.Q6J("ngIf",1==r.menu),l.xp6(1),l.Q6J("ngIf",2==r.menu),l.xp6(1),l.Q6J("ngIf",3==r.menu),l.xp6(1),l.Q6J("ngIf",4==r.menu))},dependencies:[H.sg,H.O5,$e.Fj,$e.JJ,$e.On],styles:[".main-container[_ngcontent-%COMP%]{color:#fff}.title[_ngcontent-%COMP%]{padding-top:25%;font-size:3rem}.game-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.game[_ngcontent-%COMP%]{height:100vh;width:100vw;background:linear-gradient(0deg,rgb(18,27,41) 0%,rgb(51,62,81) 100%);position:absolute;z-index:-1}.cell-container[_ngcontent-%COMP%]{display:flex}.cell[_ngcontent-%COMP%]{width:18px;height:18px;border-radius:5px;margin:1px;transition:background-color 1s ease-in-out}.cell-1[_ngcontent-%COMP%]{background-color:#121b29}@keyframes _ngcontent-%COMP%_new-cell{}.menu[_ngcontent-%COMP%]{font-size:1.5rem}.menu-title[_ngcontent-%COMP%]{color:#8c99b6;font-size:2rem}.menu-sub-title[_ngcontent-%COMP%]{color:#525c6e;font-size:1rem}.menu-button[_ngcontent-%COMP%]{margin:15px;transition:all .3s ease-in-out}.menu-button[_ngcontent-%COMP%]:hover{scale:1.1;cursor:pointer!important}.menu-button-small-true[_ngcontent-%COMP%]{color:#fff}.menu-button-small-false[_ngcontent-%COMP%]:hover{scale:1.1;cursor:pointer!important}.menu-button-small-false[_ngcontent-%COMP%]{color:#525c6e}.menu-input[_ngcontent-%COMP%]{margin:15px;background:transparent;border:0px;border-bottom:1px solid white;color:#fff}"]}),t})();const Bs=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],Hs=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],Us=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];function ni(n,t,e,i,r,s,o){try{var a=n[s](o),c=a.value}catch(d){return void e(d)}a.done?t(c):Promise.resolve(c).then(i,r)}function q(n){return function(){var t=this,e=arguments;return new Promise(function(i,r){var s=n.apply(t,e);function o(c){ni(s,i,r,o,a,"next",c)}function a(c){ni(s,i,r,o,a,"throw",c)}o(void 0)})}}const m=function(n,t){if(!n)throw Re(t)},Re=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},ii=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=63&r|128):55296==(64512&r)&&i+1<n.length&&56320==(64512&n.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&n.charCodeAt(++i)),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=63&r|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=63&r|128)}return t},b0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,a=o?n[r+1]:0,c=r+2<n.length,d=c?n[r+2]:0;let f=(15&a)<<2|d>>6,_=63&d;c||(_=64,o||(f=64)),i.push(e[s>>2],e[(3&s)<<4|a>>4],e[f],e[_])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(ii(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):function(n){const t=[];let e=0,i=0;for(;e<n.length;){const r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[e++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const c=((7&r)<<18|(63&n[e++])<<12|(63&n[e++])<<6|63&n[e++])-65536;t[i++]=String.fromCharCode(55296+(c>>10)),t[i++]=String.fromCharCode(56320+(1023&c))}else{const s=n[e++],o=n[e++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=e[n.charAt(r++)],a=r<n.length?e[n.charAt(r)]:0;++r;const d=r<n.length?e[n.charAt(r)]:64;++r;const h=r<n.length?e[n.charAt(r)]:64;if(++r,null==s||null==a||null==d||null==h)throw new Gs;i.push(s<<2|a>>4),64!==d&&(i.push(a<<4&240|d>>2),64!==h&&i.push(d<<6&192|h))}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Gs extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ri=function(n){const t=ii(n);return b0.encodeByteArray(t,!0)},St=function(n){return ri(n).replace(/\./g,"")},I0=function(n){try{return b0.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Zs(n){return si(void 0,n)}function si(n,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!Vs(e)||(n[e]=si(n[e],t[e]));return n}function Vs(n){return"__proto__"!==n}const Ot=()=>{try{return function qs(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&I0(n[1]);return t&&JSON.parse(t)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},oi=()=>{var n;return null===(n=Ot())||void 0===n?void 0:n.config};class Qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),"function"==typeof t&&(this.promise.catch(()=>{}),1===t.length?t(e):t(e,i))}}}function li(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(function At(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}())}class Ye extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,Ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ai.prototype.create)}}class ai{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?function io(n,t){return n.replace(ro,(e,i)=>{const r=t[i];return null!=r?String(r):`<${i}?>`})}(s,i):"Error";return new Ye(r,`${this.serviceName}: ${o} (${r}).`,i)}}const ro=/\{\$([^}]+)}/g;function Je(n){return JSON.parse(n)}function D(n){return JSON.stringify(n)}const Nt=function(n){let t={},e={},i={},r="";try{const s=n.split(".");t=Je(I0(s[0])||""),e=Je(I0(s[1])||""),r=s[2],i=e.d||{},delete e.d}catch{}return{header:t,claims:e,data:i,signature:r}};function te(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function De(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}function ci(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Rt(n,t,e){const i={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=t.call(e,n[r],r,n));return i}function E0(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const r of e){if(!i.includes(r))return!1;const s=n[r],o=t[r];if(di(s)&&di(o)){if(!E0(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!e.includes(r))return!1;return!0}function di(n){return null!==n&&"object"==typeof n}class ao{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const i=this.W_;if("string"==typeof t)for(let h=0;h<16;h++)i[h]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let h=0;h<16;h++)i[h]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let h=16;h<80;h++){const f=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=4294967295&(f<<1|f>>>31)}let d,u,r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4];for(let h=0;h<80;h++){h<40?h<20?(d=a^s&(o^a),u=1518500249):(d=s^o^a,u=1859775393):h<60?(d=s&o|a&(s|o),u=2400959708):(d=s^o^a,u=3395469782);const f=(r<<5|r>>>27)+d+c+u+i[h]&4294967295;c=a,a=o,o=4294967295&(s<<30|s>>>2),s=r,r=f}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,e){if(null==t)return;void 0===e&&(e=t.length);const i=e-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<e;){if(0===o)for(;r<=i;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(s[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<e;)if(s[o]=t[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=e}digest(){const t=[];let e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&e,e/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)t[i]=this.chain_[r]>>s&255,++i;return t}}function Le(n,t){return`${n} failed: ${t} argument `}const Dt=function(n){let t=0;for(let e=0;e<n.length;e++){const i=n.charCodeAt(e);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,e++):t+=3}return t};function ke(n){return n&&n._delegate?n._delegate:n}class Xe{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const ve="[DEFAULT]";class yo{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new Qe;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t?.identifier),r=null!==(e=t?.optional)&&void 0!==e&&e;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function Co(n){return"EAGER"===n.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:ve})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=ve){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){var t=this;return q(function*(){const e=Array.from(t.instances.values());yield Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(t=ve){return this.instances.has(t)}getOptions(t=ve){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[s,o]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(s)&&o.resolve(r);return r}onInit(t,e){var i;const r=this.normalizeInstanceIdentifier(e),s=null!==(i=this.onInitCallbacks.get(r))&&void 0!==i?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(n=t,n===ve?void 0:n),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}var n;return i||null}normalizeInstanceIdentifier(t=ve){return this.component?this.component.multipleInstances?t:ve:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class bo{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new yo(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const T0=[];var x=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(x||{});const ui={debug:x.DEBUG,verbose:x.VERBOSE,info:x.INFO,warn:x.WARN,error:x.ERROR,silent:x.SILENT},Io=x.INFO,Eo={[x.DEBUG]:"log",[x.VERBOSE]:"log",[x.INFO]:"info",[x.WARN]:"warn",[x.ERROR]:"error"},Po=(n,t,...e)=>{if(t<n.logLevel)return;const i=(new Date).toISOString(),r=Eo[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${n.name}:`,...e)};class hi{constructor(t){this.name=t,this._logLevel=Io,this._logHandler=Po,this._userLogHandler=null,T0.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in x))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?ui[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,x.DEBUG,...t),this._logHandler(this,x.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,x.VERBOSE,...t),this._logHandler(this,x.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,x.INFO,...t),this._logHandler(this,x.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,x.WARN,...t),this._logHandler(this,x.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,x.ERROR,...t),this._logHandler(this,x.ERROR,...t)}}const To=(n,t)=>t.some(e=>n instanceof e);let fi,pi;const _i=new WeakMap,w0=new WeakMap,mi=new WeakMap,x0=new WeakMap,S0=new WeakMap;let O0={get(n,t,e){if(n instanceof IDBTransaction){if("done"===t)return w0.get(n);if("objectStoreNames"===t)return n.objectStoreNames||mi.get(n);if("store"===t)return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return se(n[t])},set:(n,t,e)=>(n[t]=e,!0),has:(n,t)=>n instanceof IDBTransaction&&("done"===t||"store"===t)||t in n};function Ro(n){return"function"==typeof n?function No(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xo(){return pi||(pi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...t){return n.apply(A0(this),t),se(_i.get(this))}:function(...t){return se(n.apply(A0(this),t))}:function(t,...e){const i=n.call(A0(this),t,...e);return mi.set(i,t.sort?t.sort():[t]),se(i)}}(n):(n instanceof IDBTransaction&&function Oo(n){if(w0.has(n))return;const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});w0.set(n,t)}(n),To(n,function wo(){return fi||(fi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,O0):n)}function se(n){if(n instanceof IDBRequest)return function So(n){const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{e(se(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&_i.set(e,n)}).catch(()=>{}),S0.set(t,n),t}(n);if(x0.has(n))return x0.get(n);const t=Ro(n);return t!==n&&(x0.set(n,t),S0.set(t,n)),t}const A0=n=>S0.get(n),Lo=["get","getKey","getAll","getAllKeys","count"],ko=["put","add","delete","clear"],N0=new Map;function gi(n,t){if(!(n instanceof IDBDatabase)||t in n||"string"!=typeof t)return;if(N0.get(t))return N0.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,r=ko.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Lo.includes(e))return;const s=function(){var o=q(function*(a,...c){const d=this.transaction(a,r?"readwrite":"readonly");let u=d.store;return i&&(u=u.index(c.shift())),(yield Promise.all([u[e](...c),r&&d.done]))[0]});return function(c){return o.apply(this,arguments)}}();return N0.set(t,s),s}!function Ao(n){O0=n(O0)}(n=>({...n,get:(t,e,i)=>gi(t,e)||n.get(t,e,i),has:(t,e)=>!!gi(t,e)||n.has(t,e)}));class Mo{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function Fo(n){const t=n.getComponent();return"VERSION"===t?.type}(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}return null}).filter(e=>e).join(" ")}}const R0="@firebase/app",Ce=new hi("@firebase/app"),Lt="[DEFAULT]",cl={[R0]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},be=new Map,kt=new Map;function dl(n,t){try{n.container.addComponent(t)}catch(e){Ce.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Mt(n){const t=n.name;if(kt.has(t))return Ce.debug(`There were multiple attempts to register component ${t}.`),!1;kt.set(t,n);for(const e of be.values())dl(e,n);return!0}const ne=new ai("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class hl{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Xe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ne.create("app-deleted",{appName:this._name})}}function D0(n,t={}){let e=n;"object"!=typeof t&&(t={name:t});const i=Object.assign({name:Lt,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!=typeof r||!r)throw ne.create("bad-app-name",{appName:String(r)});if(e||(e=oi()),!e)throw ne.create("no-options");const s=be.get(r);if(s){if(E0(e,s.options)&&E0(i,s.config))return s;throw ne.create("duplicate-app",{appName:r})}const o=new bo(r);for(const c of kt.values())o.addComponent(c);const a=new hl(e,i,o);return be.set(r,a),a}function Me(n,t,e){var i;let r=null!==(i=cl[n])&&void 0!==i?i:n;e&&(r+=`-${e}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${t}":`];return s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Ce.warn(a.join(" "))}Mt(new Xe(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const _l="firebase-heartbeat-database",ml=1,et="firebase-heartbeat-store";let k0=null;function Ci(){return k0||(k0=function Do(n,t,{blocked:e,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,t),a=se(o);return i&&o.addEventListener("upgradeneeded",c=>{i(se(o.result),c.oldVersion,c.newVersion,se(o.transaction),c)}),e&&o.addEventListener("blocked",c=>e(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}(_l,ml,{upgrade:(n,t)=>{0===t&&n.createObjectStore(et)}}).catch(n=>{throw ne.create("idb-open",{originalErrorMessage:n.message})})),k0}function M0(){return(M0=q(function*(n){try{return yield(yield Ci()).transaction(et).objectStore(et).get(Ii(n))}catch(t){if(t instanceof Ye)Ce.warn(t.message);else{const e=ne.create("idb-get",{originalErrorMessage:t?.message});Ce.warn(e.message)}}})).apply(this,arguments)}function bi(n,t){return F0.apply(this,arguments)}function F0(){return(F0=q(function*(n,t){try{const i=(yield Ci()).transaction(et,"readwrite");yield i.objectStore(et).put(t,Ii(n)),yield i.done}catch(e){if(e instanceof Ye)Ce.warn(e.message);else{const i=ne.create("idb-set",{originalErrorMessage:e?.message});Ce.warn(i.message)}}})).apply(this,arguments)}function Ii(n){return`${n.name}!${n.options.appId}`}class Cl{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Il(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){var t=this;return q(function*(){const i=t.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ei();if(null===t._heartbeatsCache&&(t._heartbeatsCache=yield t._heartbeatsCachePromise),t._heartbeatsCache.lastSentHeartbeatDate!==r&&!t._heartbeatsCache.heartbeats.some(s=>s.date===r))return t._heartbeatsCache.heartbeats.push({date:r,agent:i}),t._heartbeatsCache.heartbeats=t._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),t._storage.overwrite(t._heartbeatsCache)})()}getHeartbeatsHeader(){var t=this;return q(function*(){if(null===t._heartbeatsCache&&(yield t._heartbeatsCachePromise),null===t._heartbeatsCache||0===t._heartbeatsCache.heartbeats.length)return"";const e=Ei(),{heartbeatsToSend:i,unsentEntries:r}=function bl(n,t=1024){const e=[];let i=n.slice();for(const r of n){const s=e.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Pi(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),Pi(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}(t._heartbeatsCache.heartbeats),s=St(JSON.stringify({version:2,heartbeats:i}));return t._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(t._heartbeatsCache.heartbeats=r,yield t._storage.overwrite(t._heartbeatsCache)):(t._heartbeatsCache.heartbeats=[],t._storage.overwrite(t._heartbeatsCache)),s})()}}function Ei(){return(new Date).toISOString().substring(0,10)}class Il{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return q(function*(){return!!function eo(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function to(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t((null===(s=r.error)||void 0===s?void 0:s.message)||"")}}catch(e){t(e)}})}().then(()=>!0).catch(()=>!1)})()}read(){var t=this;return q(function*(){return(yield t._canUseIndexedDBPromise)&&(yield function gl(n){return M0.apply(this,arguments)}(t.app))||{heartbeats:[]}})()}overwrite(t){var e=this;return q(function*(){var i;if(yield e._canUseIndexedDBPromise){const s=yield e.read();return bi(e.app,{lastSentHeartbeatDate:null!==(i=t.lastSentHeartbeatDate)&&void 0!==i?i:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}})()}add(t){var e=this;return q(function*(){var i;if(yield e._canUseIndexedDBPromise){const s=yield e.read();return bi(e.app,{lastSentHeartbeatDate:null!==(i=t.lastSentHeartbeatDate)&&void 0!==i?i:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}})()}}function Pi(n){return St(JSON.stringify({version:2,heartbeats:n})).length}!function El(n){Mt(new Xe("platform-logger",t=>new Mo(t),"PRIVATE")),Mt(new Xe("heartbeat",t=>new Cl(t),"PRIVATE")),Me(R0,"0.9.15",n),Me(R0,"0.9.15","esm2017"),Me("fire-js","")}(""),Me("firebase","10.1.0","app");const Ti="@firebase/database";let B0="";class wl{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),D(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Je(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class xl{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return te(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const Si=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new wl(t)}}catch{}return new xl},Ie=Si("localStorage"),H0=Si("sessionStorage"),Fe=new hi("@firebase/database"),Oi=function(){let n=1;return function(){return n++}}(),Ai=function(n){const t=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,m(i<n.length,"Surrogate pair missing trail surrogate."),r=65536+(s<<10)+(n.charCodeAt(i)-56320)}r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=63&r|128):r<65536?(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=63&r|128):(t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=63&r|128)}return t}(n),e=new ao;e.update(t);const i=e.digest();return b0.encodeByteArray(i)},tt=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=tt.apply(null,i):t+="object"==typeof i?D(i):i,t+=" "}return t};let Ee=null,Ni=!0;const L=function(...n){if(!0===Ni&&(Ni=!1,null===Ee&&!0===H0.get("logging_enabled")&&function(n,t){m(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Fe.logLevel=x.VERBOSE,Ee=Fe.log.bind(Fe),t&&H0.set("logging_enabled",!0)):"function"==typeof n?Ee=n:(Ee=null,H0.remove("logging_enabled"))}(!0)),Ee){const t=tt.apply(null,n);Ee(t)}},nt=function(n){return function(...t){L(n,...t)}},U0=function(...n){const t="FIREBASE INTERNAL ERROR: "+tt(...n);Fe.error(t)},$=function(...n){const t=`FIREBASE FATAL ERROR: ${tt(...n)}`;throw Fe.error(t),new Error(t)},M=function(...n){const t="FIREBASE WARNING: "+tt(...n);Fe.warn(t)},Ft=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},oe="[MIN_NAME]",ie="[MAX_NAME]",Pe=function(n,t){if(n===t)return 0;if(n===oe||t===ie)return-1;if(t===oe||n===ie)return 1;{const e=ki(n),i=ki(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},Al=function(n,t){return n===t?0:n<t?-1:1},it=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+D(t))},W0=function(n){if("object"!=typeof n||null===n)return D(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=D(t[i]),e+=":",e+=W0(n[t[i]]);return e+="}",e},Di=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function k(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const Li=function(n){m(!Ft(n),"Invalid JSON number");const i=1023;let r,s,o,a,c;0===n?(s=0,o=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const d=[];for(c=52;c;c-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(c=11;c;c-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(r?1:0),d.reverse();const u=d.join("");let h="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);1===f.length&&(f="0"+f),h+=f}return h.toLowerCase()},Ll=new RegExp("^-?(0*)\\d{1,10}$"),ki=function(n){if(Ll.test(n)){const t=Number(n);if(t>=-2147483648&&t<=2147483647)return t}return null},Be=function(n){try{n()}catch(t){setTimeout(()=>{throw M("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},rt=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class Bl{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){M(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Hl{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(L("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',M(t)}}let st=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Ui=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Zi="websocket",Vi="long_polling";class Z0{constructor(t,e,i,r,s=!1,o="",a=!1,c=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ie.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Ie.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function qi(n,t,e){let i;if(m("string"==typeof t,"typeof type must == string"),m("object"==typeof e,"typeof params must == object"),t===Zi)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==Vi)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Ul(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return k(e,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}class Wl{constructor(){this.counters_={}}incrementCounter(t,e=1){te(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return Zs(this.counters_)}}const V0={},q0={};function z0(n){const t=n.toString();return V0[t]||(V0[t]=new Wl),V0[t]}class Zl{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Be(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class le{constructor(t,e,i,r,s,o,a){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=nt(t),this.stats_=z0(e),this.urlFn=c=>(this.appCheckToken&&(c.ac=this.appCheckToken),qi(e,Vi,c))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Zl(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new K0((...s)=>{const[o,a,c,d,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=c;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Ui.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){le.forceAllow_=!0}static forceDisallow(){le.forceDisallow_=!0}static isAvailable(){return!(!le.forceAllow_&&(le.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=D(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=ri(e),r=Di(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=D(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class K0{constructor(t,e,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Oi(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=K0.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){L("frame writing exception"),a.stack&&L(a.stack),L(a)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||L("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const o=this.pendingSegs.shift();i=i+"&seg"+r+"="+o.seg+"&ts"+r+"="+o.ts+"&d"+r+"="+o.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{L("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let Ht=null;typeof MozWebSocket<"u"?Ht=MozWebSocket:typeof WebSocket<"u"&&(Ht=WebSocket);let He=(()=>{class n{constructor(e,i,r,s,o,a,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=nt(this.connId),this.stats_=z0(i),this.connURL=n.connectionURL_(i,a,c,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&Ui.test(location.hostname)&&(a.r="f"),i&&(a.s=i),r&&(a.ls=r),s&&(a.ac=s),o&&(a.p=o),qi(e,Zi,a)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ie.set("previous_websocket_failure",!0);try{let r;0,this.mySock=new Ht(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==Ht&&!n.forceDisallow_}static previouslyFailed(){return Ie.isInMemoryStorage||!0===Ie.get("previous_websocket_failure")}markConnectionHealthy(){Ie.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=Je(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(m(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=D(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=Di(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Ji=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[le,He]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=He&&He.isAvailable();let r=i&&!He.previouslyFailed();if(e.webSocketOnly&&(i||M("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[He];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class sr{constructor(t,e,i,r,s,o,a,c,d,u){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=d,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=nt("c:"+this.id+":"),this.transportManager_=new Ji(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=rt(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=it("t",t),i=it("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=it("t",t),i=it("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=it("t",t);if("d"in t){const i=t.d;if("h"===e){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?U0("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):U0("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&M("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),rt(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):rt(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ie.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class or{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class lr{constructor(t){this.allowedEvents_=t,this.listeners_={},m(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){m(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class Ut extends lr{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!li()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ut}getInitialEvent(t){return m("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class P{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function E(){return new P("")}function v(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ae(n){return n.pieces_.length-n.pieceNum_}function w(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new P(n.pieces_,t)}function $0(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ot(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function dr(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new P(t,0)}function A(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof P)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new P(e,0)}function C(n){return n.pieceNum_>=n.pieces_.length}function B(n,t){const e=v(n),i=v(t);if(null===e)return t;if(e===i)return B(w(n),w(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function Q0(n,t){if(ae(n)!==ae(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function V(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(ae(n)>ae(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class ha{constructor(t,e){this.errorPrefix_=e,this.parts_=ot(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Dt(this.parts_[i]);ur(this)}}function ur(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Te(n))}function Te(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Y0 extends lr{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Y0}getInitialEvent(t){return m("visible"===t,"Unknown event type: "+t),[this.visible_]}}const lt=1e3;let Gt,we=(()=>{class n extends or{constructor(e,i,r,s,o,a,c,d){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=d,this.id=n.nextPersistentConnectionId_++,this.log_=nt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=lt,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Y0.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Ut.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,o={r:s,a:e,b:i};this.log_(D(o)),m(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new Qe,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const c=a.d;"ok"===a.s?i.resolve(c):i.reject(c)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,s){this.initConnection_();const o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),m(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),m(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r};e.tag&&(o.q=i._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,c=>{const d=c.d,u=c.s;n.warnOnListenWarnings_(d,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),"ok"!==u&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,d))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&te(e,"w")){const r=De(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();M(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(n){const t=Nt(n).claims;return"object"==typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=function(n){const e=Nt(n).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")}(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const o=s.s,a=s.d||"error";this.authToken_===e&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),m(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const o={p:e};s&&(o.q=r,o.t=s),this.sendRequest("n",o)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const o={p:i,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,o){this.initConnection_();const a={p:i,d:r};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+D(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):U0("Unrecognized action received from server: "+D(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){m(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=lt,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=lt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=lt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return q(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),o=e.id+":"+n.nextConnectionId_++,a=e.lastSessionId;let c=!1,d=null;const u=function(){d?d.close():(c=!0,s())};e.realtime_={close:u,sendRequest:function(_){m(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(_)}};const f=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[_,g]=yield Promise.all([e.authTokenProvider_.getToken(f),e.appCheckTokenProvider_.getToken(f)]);c?L("getToken() completed but was canceled"):(L("getToken() completed. Creating connection."),e.authToken_=_&&_.accessToken,e.appCheckToken_=g&&g.token,d=new sr(o,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,I=>{M(I+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},a))}catch(_){e.log_("Failed to get token: "+_),c||(e.repoInfo_.nodeAdmin&&M(_),u())}}})()}interrupt(e){L("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){L("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ci(this.interruptReasons_)&&(this.reconnectDelay_=lt,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(o=>W0(o)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new P(e).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(i),o.delete(i),0===o.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){L("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){L("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";e["sdk."+i+"."+B0.replace(/\./g,"-")]=1,li()?e["framework.cordova"]=1:function Xs(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ut.getInstance().currentlyOnline();return ci(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class b{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new b(t,e)}}class Wt{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new b(oe,t),r=new b(oe,e);return 0!==this.compare(i,r)}minPost(){return b.MIN}}class pr extends Wt{static get __EMPTY_NODE(){return Gt}static set __EMPTY_NODE(t){Gt=t}compare(t,e){return Pe(t.name,e.name)}isDefinedOn(t){throw Re("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return b.MIN}maxPost(){return new b(ie,Gt)}makePost(t,e){return m("string"==typeof t,"KeyIndex indexValue must always be a string."),new b(t,Gt)}toString(){return".key"}}const Q=new pr;class Zt{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let X0,z=(()=>{class n{constructor(e,i,r,s,o){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??U.EMPTY_NODE,this.right=o??U.EMPTY_NODE}copy(e,i,r,s,o){return new n(e??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===o?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return U.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return U.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class U{constructor(t,e=U.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new U(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,z.BLACK,null,null))}remove(t){return new U(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,z.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Zt(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Zt(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Zt(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Zt(this.root_,null,this.comparator_,!0,t)}}function Ca(n,t){return Pe(n.name,t.name)}function J0(n,t){return Pe(n,t)}U.EMPTY_NODE=new class va{copy(t,e,i,r,s){return this}insert(t,e,i){return new z(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const _r=function(n){return"number"==typeof n?"number:"+Li(n):"string:"+n},mr=function(n){if(n.isLeafNode()){const t=n.val();m("string"==typeof t||"number"==typeof t||"object"==typeof t&&te(t,".sv"),"Priority must be a string or number.")}else m(n===X0||n.isEmpty(),"priority of unexpected type.");m(n===X0||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let gr,yr,vr,Ue=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,m(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),mr(this.priorityNode_)}static set __childrenNodeConstructor(e){gr=e}static get __childrenNodeConstructor(){return gr}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return C(e)?this:".priority"===v(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=v(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:(m(".priority"!==r||1===ae(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(w(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+_r(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?Li(this.value_):this.value_,this.lazyHash_=Ai(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:(m(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return m(s>=0,"Unknown leaf type: "+i),m(o>=0,"Unknown leaf type: "+r),s===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&(this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const S=new class Pa extends Wt{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?Pe(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return b.MIN}maxPost(){return new b(ie,new Ue("[PRIORITY-POST]",vr))}makePost(t,e){const i=yr(t);return new b(e,new Ue("[PRIORITY-POST]",i))}toString(){return".priority"}},Ta=Math.log(2);class wa{constructor(t){this.count=parseInt(Math.log(t+1)/Ta,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Vt=function(n,t,e,i){n.sort(t);const r=function(c,d){const u=d-c;let h,f;if(0===u)return null;if(1===u)return h=n[c],f=e?e(h):h,new z(f,h.node,z.BLACK,null,null);{const _=parseInt(u/2,10)+c,g=r(c,_),I=r(_+1,d);return h=n[_],f=e?e(h):h,new z(f,h.node,z.BLACK,g,I)}},a=function(c){let d=null,u=null,h=n.length;const f=function(g,I){const R=h-g,Z=h;h-=g;const v0=r(R+1,Z),Xn=n[R],Bu=e?e(Xn):Xn;_(new z(Bu,Xn.node,I,null,v0))},_=function(g){d?(d.left=g,d=g):(u=g,d=g)};for(let g=0;g<c.count;++g){const I=c.nextBitIsOne(),R=Math.pow(2,c.count-(g+1));I?f(R,z.BLACK):(f(R,z.BLACK),f(R,z.RED))}return u}(new wa(n.length));return new U(i||t,a)};let en;const We={};class re{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return m(We&&S,"ChildrenNode.ts has not been loaded"),en=en||new re({".priority":We},{".priority":S}),en}get(t){const e=De(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof U?e:null}hasIndex(t){return te(this.indexSet_,t.toString())}addIndex(t,e){m(t!==Q,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(b.Wrap);let a,o=s.getNext();for(;o;)r=r||t.isDefinedOn(o.node),i.push(o),o=s.getNext();a=r?Vt(i,t.getCompare()):We;const c=t.toString(),d=Object.assign({},this.indexSet_);d[c]=t;const u=Object.assign({},this.indexes_);return u[c]=a,new re(u,d)}addToIndexes(t,e){const i=Rt(this.indexes_,(r,s)=>{const o=De(this.indexSet_,s);if(m(o,"Missing index implementation for "+s),r===We){if(o.isDefinedOn(t.node)){const a=[],c=e.getIterator(b.Wrap);let d=c.getNext();for(;d;)d.name!==t.name&&a.push(d),d=c.getNext();return a.push(t),Vt(a,o.getCompare())}return We}{const a=e.get(t.name);let c=r;return a&&(c=c.remove(new b(t.name,a))),c.insert(t,t.node)}});return new re(i,this.indexSet_)}removeFromIndexes(t,e){const i=Rt(this.indexes_,r=>{if(r===We)return r;{const s=e.get(t.name);return s?r.remove(new b(t.name,s)):r}});return new re(i,this.indexSet_)}}let at,y=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&mr(this.priorityNode_),this.children_.isEmpty()&&m(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return at||(at=new n(new U(J0),null,re.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||at}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?at:i}}getChild(e){const i=v(e);return null===i?this:this.getImmediateChild(i).getChild(w(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if(m(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new b(e,i);let s,o;i.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),o=this.indexMap_.addToIndexes(r,this.children_));const a=s.isEmpty()?at:this.priorityNode_;return new n(s,a,o)}}updateChild(e,i){const r=v(e);if(null===r)return i;{m(".priority"!==v(e)||1===ae(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(w(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,o=!0;if(this.forEachChild(S,(a,c)=>{i[a]=c.val(e),r++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!e&&o&&s<2*r){const a=[];for(const c in i)a[c]=i[c];return a}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+_r(this.getPriority().val())+":"),this.forEachChild(S,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":Ai(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new b(e,i));return o?o.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new b(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new b(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,b.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,b.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ct?-1:0}withIndex(e){if(e===Q||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Q||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(S),s=i.getIterator(S);let o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(e){return e===Q?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const ct=new class xa extends y{constructor(){super(new U(J0),y.EMPTY_NODE,re.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return y.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(b,{MIN:{value:new b(oe,y.EMPTY_NODE)},MAX:{value:new b(ie,ct)}}),pr.__EMPTY_NODE=y.EMPTY_NODE,Ue.__childrenNodeConstructor=y,function ba(n){X0=n}(ct),function Ea(n){vr=n}(ct);const Sa=!0;function N(n,t=null){if(null===n)return y.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),m(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Ue(n,N(t));if(n instanceof Array||!Sa){let e=y.EMPTY_NODE;return k(n,(i,r)=>{if(te(n,i)&&"."!==i.substring(0,1)){const s=N(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(N(t))}{const e=[];let i=!1;if(k(n,(o,a)=>{if("."!==o.substring(0,1)){const c=N(a);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),e.push(new b(o,c)))}}),0===e.length)return y.EMPTY_NODE;const s=Vt(e,Ca,o=>o.name,J0);if(i){const o=Vt(e,S.getCompare());return new y(s,N(t),new re({".priority":o},{".priority":S}))}return new y(s,N(t),re.Default)}}!function Ia(n){yr=n}(N);class tn extends Wt{constructor(t){super(),this.indexPath_=t,m(!C(t)&&".priority"!==v(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?Pe(t.name,e.name):s}makePost(t,e){const i=N(t),r=y.EMPTY_NODE.updateChild(this.indexPath_,i);return new b(e,r)}maxPost(){const t=y.EMPTY_NODE.updateChild(this.indexPath_,ct);return new b(ie,t)}toString(){return ot(this.indexPath_,0).join("/")}}const nn=new class Oa extends Wt{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?Pe(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return b.MIN}maxPost(){return b.MAX}makePost(t,e){const i=N(t);return new b(e,i)}toString(){return".value"}};function Cr(n){return{type:"value",snapshotNode:n}}function Ge(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function dt(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function ut(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class rn{constructor(t){this.index_=t}updateChild(t,e,i,r,s,o){m(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=t.getImmediateChild(e);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(null!=o&&(i.isEmpty()?t.hasChild(e)?o.trackChildChange(dt(e,a)):m(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ge(e,i)):o.trackChildChange(ut(e,i,a))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(S,(r,s)=>{e.hasChild(r)||i.trackChildChange(dt(r,s))}),e.isLeafNode()||e.forEachChild(S,(r,s)=>{if(t.hasChild(r)){const o=t.getImmediateChild(r);o.equals(s)||i.trackChildChange(ut(r,s,o))}else i.trackChildChange(Ge(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?y.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ht{constructor(t){this.indexedFilter_=new rn(t.getIndex()),this.index_=t.getIndex(),this.startPost_=ht.getStartPost_(t),this.endPost_=ht.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,r,s,o){return this.matches(new b(e,i))||(i=y.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,o)}updateFullNode(t,e,i){e.isLeafNode()&&(e=y.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(y.EMPTY_NODE);const s=this;return e.forEachChild(S,(o,a)=>{s.matches(new b(o,a))||(r=r.updateImmediateChild(o,y.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class Na{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new ht(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,r,s,o){return this.rangedFilter_.matches(new b(e,i))||(i=y.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,o):this.fullLimitUpdateChild_(t,e,i,s,o)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=y.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=y.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;r=r.updateImmediateChild(a.name,a.node),o++}}}else{let s;r=e.withIndex(this.index_),r=r.updatePriority(y.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,y.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,_)=>h(_,f)}else o=this.index_.getCompare();const a=t;m(a.numChildren()===this.limit_,"");const c=new b(e,i),d=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(e)){const h=a.getImmediateChild(e);let f=r.getChildAfterChild(this.index_,d,this.reverse_);for(;null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);const _=null==f?1:o(f,c);if(u&&!i.isEmpty()&&_>=0)return s?.trackChildChange(ut(e,i,h)),a.updateImmediateChild(e,i);{s?.trackChildChange(dt(e,h));const I=a.updateImmediateChild(e,y.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(s?.trackChildChange(Ge(f.name,f.node)),I.updateImmediateChild(f.name,f.node)):I}}return i.isEmpty()?t:u&&o(d,c)>=0?(null!=s&&(s.trackChildChange(dt(d.name,d.node)),s.trackChildChange(Ge(e,i))),a.updateImmediateChild(e,i).updateImmediateChild(d.name,y.EMPTY_NODE)):t}}class sn{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=S}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return m(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return m(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:oe}hasEnd(){return this.endSet_}getIndexEndValue(){return m(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return m(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ie}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return m(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===S}copy(){const t=new sn;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function br(n){const t={};if(n.isDefault())return t;let e;if(n.index_===S?e="$priority":n.index_===nn?e="$value":n.index_===Q?e="$key":(m(n.index_ instanceof tn,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=D(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=D(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+D(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=D(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+D(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function Ir(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==S&&(t.i=n.index_.toString()),t}class zt extends or{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=nt("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:(m(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const o=zt.getListenId_(t,i),a={};this.listens_[o]=a;const c=br(t._queryParams);this.restRequest_(s+".json",c,(d,u)=>{let h=u;if(404===d&&(h=null,d=null),null===d&&this.onDataUpdate_(s,h,!1,i),De(this.listens_,o)===a){let f;f=d?401===d?"permission_denied":"rest_error:"+d:"ok",r(f,null)}})}unlisten(t,e){const i=zt.getListenId_(t,e);delete this.listens_[i]}get(t){const e=br(t._queryParams),i=t._path.toString(),r=new Qe;return this.restRequest_(i+".json",e,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+function lo(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}(e);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Je(a.responseText)}catch{M("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,c)}else 401!==a.status&&404!==a.status&&M("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}class Fa{constructor(){this.rootNode_=y.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function Kt(){return{value:null,children:new Map}}function Ze(n,t,e){if(C(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=v(t);n.children.has(i)||n.children.set(i,Kt()),Ze(n.children.get(i),t=w(t),e)}}function cn(n,t,e){null!==n.value?e(t,n.value):function Ba(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{cn(r,new P(t.toString()+"/"+i),e)})}class Ha{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&k(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class Ga{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ha(t);const i=1e4+2e4*Math.random();rt(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;k(t,(r,s)=>{s>0&&te(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),rt(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Y=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Y||{});function hn(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class jt{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Y.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(C(this.path)){if(null!=this.affectedTree.value)return m(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new P(t));return new jt(E(),e,this.revert)}}return m(v(this.path)===t,"operationForChild called for unrelated child."),new jt(w(this.path),this.affectedTree,this.revert)}}class ft{constructor(t,e){this.source=t,this.path=e,this.type=Y.LISTEN_COMPLETE}operationForChild(t){return C(this.path)?new ft(this.source,E()):new ft(this.source,w(this.path))}}class xe{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Y.OVERWRITE}operationForChild(t){return C(this.path)?new xe(this.source,E(),this.snap.getImmediateChild(t)):new xe(this.source,w(this.path),this.snap)}}class Ve{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Y.MERGE}operationForChild(t){if(C(this.path)){const e=this.children.subtree(new P(t));return e.isEmpty()?null:e.value?new xe(this.source,E(),e.value):new Ve(this.source,E(),e)}return m(v(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Ve(this.source,w(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ce{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(C(t))return this.isFullyInitialized()&&!this.filtered_;const e=v(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class Za{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function pt(n,t,e,i,r,s){const o=i.filter(a=>a.type===e);o.sort((a,c)=>function za(n,t,e){if(null==t.childName||null==e.childName)throw Re("Should only compare child_ events.");const i=new b(t.childName,t.snapshotNode),r=new b(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,a,c)),o.forEach(a=>{const c=function qa(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,a,s);r.forEach(d=>{d.respondsTo(a.type)&&t.push(d.createEvent(c,n.query_))})})}function $t(n,t){return{eventCache:n,serverCache:t}}function _t(n,t,e,i){return $t(new ce(t,e,i),n.serverCache)}function Pr(n,t,e,i){return $t(n.eventCache,new ce(t,e,i))}function Qt(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Se(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let fn;class O{constructor(t,e=(()=>(fn||(fn=new U(Al)),fn))()){this.value=t,this.children=e}static fromObject(t){let e=new O(null);return k(t,(i,r)=>{e=e.set(new P(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:E(),value:this.value};if(C(t))return null;{const i=v(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(w(t),e);return null!=s?{path:A(new P(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(C(t))return this;{const e=v(t),i=this.children.get(e);return null!==i?i.subtree(w(t)):new O(null)}}set(t,e){if(C(t))return new O(e,this.children);{const i=v(t),s=(this.children.get(i)||new O(null)).set(w(t),e),o=this.children.insert(i,s);return new O(this.value,o)}}remove(t){if(C(t))return this.children.isEmpty()?new O(null):new O(null,this.children);{const e=v(t),i=this.children.get(e);if(i){const r=i.remove(w(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new O(null):new O(this.value,s)}return this}}get(t){if(C(t))return this.value;{const e=v(t),i=this.children.get(e);return i?i.get(w(t)):null}}setTree(t,e){if(C(t))return e;{const i=v(t),s=(this.children.get(i)||new O(null)).setTree(w(t),e);let o;return o=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new O(this.value,o)}}fold(t){return this.fold_(E(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(A(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,E(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(C(t))return null;{const s=v(t),o=this.children.get(s);return o?o.findOnPath_(w(t),A(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,E(),e)}foreachOnPath_(t,e,i){if(C(t))return this;{this.value&&i(e,this.value);const r=v(t),s=this.children.get(r);return s?s.foreachOnPath_(w(t),A(e,r),i):new O(null)}}foreach(t){this.foreach_(E(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(A(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class K{constructor(t){this.writeTree_=t}static empty(){return new K(new O(null))}}function mt(n,t,e){if(C(t))return new K(new O(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const o=B(r,t);return s=s.updateChild(o,e),new K(n.writeTree_.set(r,s))}{const r=new O(e),s=n.writeTree_.setTree(t,r);return new K(s)}}}function pn(n,t,e){let i=n;return k(e,(r,s)=>{i=mt(i,A(t,r),s)}),i}function Tr(n,t){if(C(t))return K.empty();{const e=n.writeTree_.setTree(t,new O(null));return new K(e)}}function _n(n,t){return null!=Oe(n,t)}function Oe(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(B(e.path,t)):null}function wr(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(S,(i,r)=>{t.push(new b(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new b(i,r.value))}),t}function de(n,t){if(C(t))return n;{const e=Oe(n,t);return new K(null!=e?new O(e):n.writeTree_.subtree(t))}}function mn(n){return n.writeTree_.isEmpty()}function qe(n,t){return xr(E(),n.writeTree_,t)}function xr(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?(m(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=xr(A(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(A(n,".priority"),i)),e}}function Yt(n,t){return Rr(t,n)}function Ja(n,t){if(n.snap)return V(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&V(A(n.path,e),t))return!0;return!1}function ec(n){return n.visible}function Sr(n,t,e){let i=K.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const o=s.path;let a;if(s.snap)V(e,o)?(a=B(e,o),i=mt(i,a,s.snap)):V(o,e)&&(a=B(o,e),i=mt(i,E(),s.snap.getChild(a)));else{if(!s.children)throw Re("WriteRecord should have .snap or .children");if(V(e,o))a=B(e,o),i=pn(i,a,s.children);else if(V(o,e))if(a=B(o,e),C(a))i=pn(i,E(),s.children);else{const c=De(s.children,v(a));if(c){const d=c.getChild(w(a));i=mt(i,E(),d)}}}}}return i}function Or(n,t,e,i,r){if(i||r){const s=de(n.visibleWrites,t);return!r&&mn(s)?e:r||null!=e||_n(s,E())?qe(Sr(n.allWrites,function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(V(d.path,t)||V(t,d.path))},t),e||y.EMPTY_NODE):null}{const s=Oe(n.visibleWrites,t);if(null!=s)return s;{const o=de(n.visibleWrites,t);return mn(o)?e:null!=e||_n(o,E())?qe(o,e||y.EMPTY_NODE):null}}}function Jt(n,t,e,i){return Or(n.writeTree,n.treePath,t,e,i)}function gn(n,t){return function tc(n,t,e){let i=y.EMPTY_NODE;const r=Oe(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(S,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(e){const s=de(n.visibleWrites,t);return e.forEachChild(S,(o,a)=>{const c=qe(de(s,new P(o)),a);i=i.updateImmediateChild(o,c)}),wr(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}return wr(de(n.visibleWrites,t)).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}(n.writeTree,n.treePath,t)}function Ar(n,t,e,i){return function nc(n,t,e,i,r){m(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=A(t,e);if(_n(n.visibleWrites,s))return null;{const o=de(n.visibleWrites,s);return mn(o)?r.getChild(e):qe(o,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function Xt(n,t){return function rc(n,t){return Oe(n.visibleWrites,t)}(n.writeTree,A(n.treePath,t))}function yn(n,t,e){return function ic(n,t,e,i){const r=A(t,e),s=Oe(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?qe(de(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function Nr(n,t){return Rr(A(n.treePath,t),n.writeTree)}function Rr(n,t){return{treePath:n,writeTree:t}}class ac{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;m("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),m(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,ut(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,dt(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,Ge(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw Re("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,ut(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const Dr=new class cc{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class vn{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new ce(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yn(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Se(this.viewCache_),s=function lc(n,t,e,i,r,s){return function sc(n,t,e,i,r,s,o){let a;const c=de(n.visibleWrites,t),d=Oe(c,E());if(null!=d)a=d;else{if(null==e)return[];a=qe(c,e)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],h=o.getCompare(),f=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let _=f.getNext();for(;_&&u.length<r;)0!==h(_,i)&&u.push(_),_=f.getNext();return u}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function Lr(n,t,e,i,r,s){const o=t.eventCache;if(null!=Xt(i,e))return t;{let a,c;if(C(e))if(m(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const d=Se(t),h=gn(i,d instanceof y?d:y.EMPTY_NODE);a=n.filter.updateFullNode(t.eventCache.getNode(),h,s)}else{const d=Jt(i,Se(t));a=n.filter.updateFullNode(t.eventCache.getNode(),d,s)}else{const d=v(e);if(".priority"===d){m(1===ae(e),"Can't have a priority with additional path components");const u=o.getNode();c=t.serverCache.getNode();const h=Ar(i,e,u,c);a=null!=h?n.filter.updatePriority(u,h):o.getNode()}else{const u=w(e);let h;if(o.isCompleteForChild(d)){c=t.serverCache.getNode();const f=Ar(i,e,o.getNode(),c);h=null!=f?o.getNode().getImmediateChild(d).updateChild(u,f):o.getNode().getImmediateChild(d)}else h=yn(i,d,t.serverCache);a=null!=h?n.filter.updateChild(o.getNode(),d,h,u,r,s):o.getNode()}}return _t(t,a,o.isFullyInitialized()||C(e),n.filter.filtersNodes())}}function e0(n,t,e,i,r,s,o,a){const c=t.serverCache;let d;const u=o?n.filter:n.filter.getIndexedFilter();if(C(e))d=u.updateFullNode(c.getNode(),i,null);else if(u.filtersNodes()&&!c.isFiltered()){const _=c.getNode().updateChild(e,i);d=u.updateFullNode(c.getNode(),_,null)}else{const _=v(e);if(!c.isCompleteForPath(e)&&ae(e)>1)return t;const g=w(e),R=c.getNode().getImmediateChild(_).updateChild(g,i);d=".priority"===_?u.updatePriority(c.getNode(),R):u.updateChild(c.getNode(),_,R,g,Dr,null)}const h=Pr(t,d,c.isFullyInitialized()||C(e),u.filtersNodes());return Lr(n,h,e,r,new vn(r,h,s),a)}function Cn(n,t,e,i,r,s,o){const a=t.eventCache;let c,d;const u=new vn(r,t,s);if(C(e))d=n.filter.updateFullNode(t.eventCache.getNode(),i,o),c=_t(t,d,!0,n.filter.filtersNodes());else{const h=v(e);if(".priority"===h)d=n.filter.updatePriority(t.eventCache.getNode(),i),c=_t(t,d,a.isFullyInitialized(),a.isFiltered());else{const f=w(e),_=a.getNode().getImmediateChild(h);let g;if(C(f))g=i;else{const I=u.getCompleteChild(h);g=null!=I?".priority"===$0(f)&&I.getChild(dr(f)).isEmpty()?I:I.updateChild(f,i):y.EMPTY_NODE}c=_.equals(g)?t:_t(t,n.filter.updateChild(a.getNode(),h,g,f,u,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return c}function kr(n,t){return n.eventCache.isCompleteForChild(t)}function Mr(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function bn(n,t,e,i,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let d,c=t;d=C(e)?i:new O(null).setTree(e,i);const u=t.serverCache.getNode();return d.children.inorderTraversal((h,f)=>{if(u.hasChild(h)){const g=Mr(0,t.serverCache.getNode().getImmediateChild(h),f);c=e0(n,c,new P(h),g,r,s,o,a)}}),d.children.inorderTraversal((h,f)=>{const _=!t.serverCache.isCompleteForChild(h)&&null===f.value;if(!u.hasChild(h)&&!_){const I=Mr(0,t.serverCache.getNode().getImmediateChild(h),f);c=e0(n,c,new P(h),I,r,s,o,a)}}),c}class yc{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new rn(i.getIndex()),s=function Ra(n){return n.loadsAllData()?new rn(n.getIndex()):n.hasLimit()?new Na(n):new ht(n)}(i);this.processor_=function dc(n){return{filter:n}}(s);const o=e.serverCache,a=e.eventCache,c=r.updateFullNode(y.EMPTY_NODE,o.getNode(),null),d=s.updateFullNode(y.EMPTY_NODE,a.getNode(),null),u=new ce(c,o.isFullyInitialized(),r.filtersNodes()),h=new ce(d,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=$t(h,u),this.eventGenerator_=new Za(this.query_)}get query(){return this.query_}}function bc(n,t){const e=Se(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!C(t)&&!e.getImmediateChild(v(t)).isEmpty())?e.getChild(t):null}function Fr(n){return 0===n.eventRegistrations_.length}function Br(n,t,e){const i=[];if(e){m(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(e,r);o&&i.push(o)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(o)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function Hr(n,t,e,i){t.type===Y.MERGE&&null!==t.source.queryId&&(m(Se(n.viewCache_),"We should always have a full cache before handling merges"),m(Qt(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function hc(n,t,e,i,r){const s=new ac;let o,a;if(e.type===Y.OVERWRITE){const d=e;d.source.fromUser?o=Cn(n,t,d.path,d.snap,i,r,s):(m(d.source.fromServer,"Unknown source."),a=d.source.tagged||t.serverCache.isFiltered()&&!C(d.path),o=e0(n,t,d.path,d.snap,i,r,a,s))}else if(e.type===Y.MERGE){const d=e;d.source.fromUser?o=function pc(n,t,e,i,r,s,o){let a=t;return i.foreach((c,d)=>{const u=A(e,c);kr(t,v(u))&&(a=Cn(n,a,u,d,r,s,o))}),i.foreach((c,d)=>{const u=A(e,c);kr(t,v(u))||(a=Cn(n,a,u,d,r,s,o))}),a}(n,t,d.path,d.children,i,r,s):(m(d.source.fromServer,"Unknown source."),a=d.source.tagged||t.serverCache.isFiltered(),o=bn(n,t,d.path,d.children,i,r,a,s))}else if(e.type===Y.ACK_USER_WRITE){const d=e;o=d.revert?function gc(n,t,e,i,r,s){let o;if(null!=Xt(i,e))return t;{const a=new vn(i,t,r),c=t.eventCache.getNode();let d;if(C(e)||".priority"===v(e)){let u;if(t.serverCache.isFullyInitialized())u=Jt(i,Se(t));else{const h=t.serverCache.getNode();m(h instanceof y,"serverChildren would be complete if leaf node"),u=gn(i,h)}d=n.filter.updateFullNode(c,u,s)}else{const u=v(e);let h=yn(i,u,t.serverCache);null==h&&t.serverCache.isCompleteForChild(u)&&(h=c.getImmediateChild(u)),d=null!=h?n.filter.updateChild(c,u,h,w(e),a,s):t.eventCache.getNode().hasChild(u)?n.filter.updateChild(c,u,y.EMPTY_NODE,w(e),a,s):c,d.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Jt(i,Se(t)),o.isLeafNode()&&(d=n.filter.updateFullNode(d,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=Xt(i,E()),_t(t,d,o,n.filter.filtersNodes())}}(n,t,d.path,i,r,s):function _c(n,t,e,i,r,s,o){if(null!=Xt(r,e))return t;const a=t.serverCache.isFiltered(),c=t.serverCache;if(null!=i.value){if(C(e)&&c.isFullyInitialized()||c.isCompleteForPath(e))return e0(n,t,e,c.getNode().getChild(e),r,s,a,o);if(C(e)){let d=new O(null);return c.getNode().forEachChild(Q,(u,h)=>{d=d.set(new P(u),h)}),bn(n,t,e,d,r,s,a,o)}return t}{let d=new O(null);return i.foreach((u,h)=>{const f=A(e,u);c.isCompleteForPath(f)&&(d=d.set(u,c.getNode().getChild(f)))}),bn(n,t,e,d,r,s,a,o)}}(n,t,d.path,d.affectedTree,i,r,s)}else{if(e.type!==Y.LISTEN_COMPLETE)throw Re("Unknown operation type: "+e.type);o=function mc(n,t,e,i,r){const s=t.serverCache;return Lr(n,Pr(t,s.getNode(),s.isFullyInitialized()||C(e),s.isFiltered()),e,i,Dr,r)}(n,t,e.path,i,s)}const c=s.getChanges();return function fc(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Qt(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(Cr(Qt(t)))}}(t,o,c),{viewCache:o,changes:c}}(n.processor_,r,t,e,i);return function uc(n,t){m(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),m(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),m(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,Ur(n,s.changes,s.viewCache.eventCache.getNode(),null)}function Ur(n,t,e,i){return function Va(n,t,e,i){const r=[],s=[];return t.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function Aa(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(o.childName,o.snapshotNode))}),pt(n,r,"child_removed",t,i,e),pt(n,r,"child_added",t,i,e),pt(n,r,"child_moved",s,i,e),pt(n,r,"child_changed",t,i,e),pt(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let t0,r0;class Wr{constructor(){this.views=new Map}}function In(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return m(null!=s,"SyncTree gave us an op for an invalid query."),Hr(s,t,e,i)}{let s=[];for(const o of n.views.values())s=s.concat(Hr(o,t,e,i));return s}}function Gr(n,t,e,i,r){const o=n.views.get(t._queryIdentifier);if(!o){let a=Jt(e,r?i:null),c=!1;a?c=!0:i instanceof y?(a=gn(e,i),c=!1):(a=y.EMPTY_NODE,c=!1);const d=$t(new ce(a,c,!1),new ce(i,r,!1));return new yc(t,d)}return o}function Zr(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function ue(n,t){let e=null;for(const i of n.views.values())e=e||bc(i,t);return e}function Vr(n,t){return t._queryParams.loadsAllData()?n0(n):n.views.get(t._queryIdentifier)}function qr(n,t){return null!=Vr(n,t)}function he(n){return null!=n0(n)}function n0(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Nc=1;class zr{constructor(t){this.listenProvider_=t,this.syncPointTree_=new O(null),this.pendingWriteTree_=function oc(){return{visibleWrites:K.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function En(n,t,e,i,r){return function ja(n,t,e,i,r){m(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=mt(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?ze(n,new xe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function fe(n,t,e=!1){const i=function Qa(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function Ya(n,t){const e=n.allWrites.findIndex(a=>a.writeId===t);m(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=e&&Ja(a,i.path)?r=!1:V(i.path,a.path)&&(s=!0)),o--}return!!r&&(s?(function Xa(n){n.visibleWrites=Sr(n.allWrites,ec,E()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=Tr(n.visibleWrites,i.path):k(i.children,c=>{n.visibleWrites=Tr(n.visibleWrites,A(i.path,c))}),!0))}(n.pendingWriteTree_,t)){let s=new O(null);return null!=i.snap?s=s.set(E(),!0):k(i.children,o=>{s=s.set(new P(o),!0)}),ze(n,new jt(i.path,s,e))}return[]}function gt(n,t,e){return ze(n,new xe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function s0(n,t,e,i,r=!1){const s=t._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||qr(o,t))){const c=function Sc(n,t,e,i){const r=t._queryIdentifier,s=[];let o=[];const a=he(n);if("default"===r)for(const[c,d]of n.views.entries())o=o.concat(Br(d,e,i)),Fr(d)&&(n.views.delete(c),d.query._queryParams.loadsAllData()||s.push(d.query));else{const c=n.views.get(r);c&&(o=o.concat(Br(c,e,i)),Fr(c)&&(n.views.delete(r),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!he(n)&&s.push(new(function Tc(){return m(t0,"Reference.ts has not been loaded"),t0}())(t._repo,t._path)),{removed:s,events:o}}(o,t,e,i);(function wc(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const d=c.removed;if(a=c.events,!r){const u=-1!==d.findIndex(f=>f._queryParams.loadsAllData()),h=n.syncPointTree_.findOnPath(s,(f,_)=>he(_));if(u&&!h){const f=n.syncPointTree_.subtree(s);if(!f.isEmpty()){const _=function Bc(n){return n.fold((t,e,i)=>{if(e&&he(e))return[n0(e)];{let r=[];return e&&(r=Zr(e)),k(i,(s,o)=>{r=r.concat(o)}),r}})}(f);for(let g=0;g<_.length;++g){const I=_[g],R=I.query,Z=Qr(n,I);n.listenProvider_.startListening(vt(R),yt(n,R),Z.hashFn,Z.onComplete)}}}!h&&d.length>0&&!i&&(u?n.listenProvider_.stopListening(vt(t),null):d.forEach(f=>{const _=n.queryToTagMap.get(l0(f));n.listenProvider_.stopListening(vt(f),_)}))}!function Hc(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=l0(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,d)}return a}function Kr(n,t,e,i){const r=Tn(n,i);if(null!=r){const s=wn(r),o=s.path,a=s.queryId,c=B(o,t);return xn(n,o,new xe(hn(a),c,e))}return[]}function Pn(n,t,e,i=!1){const r=t._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(r,(f,_)=>{const g=B(f,r);s=s||ue(_,g),o=o||he(_)});let c,a=n.syncPointTree_.get(r);a?(o=o||he(a),s=s||ue(a,E())):(a=new Wr,n.syncPointTree_=n.syncPointTree_.set(r,a)),null!=s?c=!0:(c=!1,s=y.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((_,g)=>{const I=ue(g,E());I&&(s=s.updateImmediateChild(_,I))}));const d=qr(a,t);if(!d&&!t._queryParams.loadsAllData()){const f=l0(t);m(!n.queryToTagMap.has(f),"View does not exist, but we have a tag");const _=function Uc(){return Nc++}();n.queryToTagMap.set(f,_),n.tagToQueryMap.set(_,f)}let h=function xc(n,t,e,i,r,s){const o=Gr(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,o),function Ic(n,t){n.eventRegistrations_.push(t)}(o,e),function Ec(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(S,(s,o)=>{i.push(Ge(s,o))}),e.isFullyInitialized()&&i.push(Cr(e.getNode())),Ur(n,i,e.getNode(),t)}(o,e)}(a,t,e,Yt(n.pendingWriteTree_,r),s,c);if(!d&&!o&&!i){const f=Vr(a,t);h=h.concat(function Wc(n,t,e){const i=t._path,r=yt(n,t),s=Qr(n,e),o=n.listenProvider_.startListening(vt(t),r,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(i);if(r)m(!he(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((d,u,h)=>{if(!C(d)&&u&&he(u))return[n0(u).query];{let f=[];return u&&(f=f.concat(Zr(u).map(_=>_.query))),k(h,(_,g)=>{f=f.concat(g)}),f}});for(let d=0;d<c.length;++d){const u=c[d];n.listenProvider_.stopListening(vt(u),yt(n,u))}}return o}(n,t,f))}return h}function o0(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(o,a)=>{const d=ue(a,B(o,t));if(d)return d});return Or(r,t,s,e,!0)}function ze(n,t){return jr(t,n.syncPointTree_,null,Yt(n.pendingWriteTree_,E()))}function jr(n,t,e,i){if(C(n.path))return $r(n,t,e,i);{const r=t.get(E());null==e&&null!=r&&(e=ue(r,E()));let s=[];const o=v(n.path),a=n.operationForChild(o),c=t.children.get(o);if(c&&a){const d=e?e.getImmediateChild(o):null,u=Nr(i,o);s=s.concat(jr(a,c,d,u))}return r&&(s=s.concat(In(r,n,i,e))),s}}function $r(n,t,e,i){const r=t.get(E());null==e&&null!=r&&(e=ue(r,E()));let s=[];return t.children.inorderTraversal((o,a)=>{const c=e?e.getImmediateChild(o):null,d=Nr(i,o),u=n.operationForChild(o);u&&(s=s.concat($r(u,a,c,d)))}),r&&(s=s.concat(In(r,n,i,e))),s}function Qr(n,t){const e=t.query,i=yt(n,e);return{hashFn:()=>(function vc(n){return n.viewCache_.serverCache.getNode()}(t)||y.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function kc(n,t,e){const i=Tn(n,e);if(i){const r=wn(i),s=r.path,o=r.queryId,a=B(s,t);return xn(n,s,new ft(hn(o),a))}return[]}(n,e._path,i):function Lc(n,t){return ze(n,new ft({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function Dl(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return s0(n,e,null,s)}}}}function yt(n,t){const e=l0(t);return n.queryToTagMap.get(e)}function l0(n){return n._path.toString()+"$"+n._queryIdentifier}function Tn(n,t){return n.tagToQueryMap.get(t)}function wn(n){const t=n.indexOf("$");return m(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new P(n.substr(0,t))}}function xn(n,t,e){const i=n.syncPointTree_.get(t);return m(i,"Missing sync point for query tag that we're tracking"),In(i,e,Yt(n.pendingWriteTree_,t),null)}function vt(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Ac(){return m(r0,"Reference.ts has not been loaded"),r0}())(n._repo,n._path):n}class Sn{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Sn(e)}node(){return this.node_}}class On{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=A(this.path_,t);return new On(this.syncTree_,e)}node(){return o0(this.syncTree_,this.path_)}}const Gc=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},Yr=function(n,t,e){return n&&"object"==typeof n?(m(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Zc(n[".sv"],t,e):"object"==typeof n[".sv"]?Vc(n[".sv"],t):void m(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Zc=function(n,t,e){if("timestamp"===n)return e.timestamp;m(!1,"Unexpected server value: "+n)},Vc=function(n,t,e){n.hasOwnProperty("increment")||m(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&m(!1,"Unexpected increment value: "+i);const r=t.node();if(m(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return"number"!=typeof o?i:o+i},Jr=function(n,t,e,i){return Nn(t,new On(e,n),i)},An=function(n,t,e){return Nn(n,new Sn(t),e)};function Nn(n,t,e){const i=n.getPriority().val(),r=Yr(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const o=n,a=Yr(o.getValue(),t,e);return a!==o.getValue()||r!==o.getPriority().val()?new Ue(a,N(r)):n}{const o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Ue(r))),o.forEachChild(S,(a,c)=>{const d=Nn(c,t.getImmediateChild(a),e);d!==c&&(s=s.updateImmediateChild(a,d))}),s}}class Rn{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function a0(n,t){let e=t instanceof P?t:new P(t),i=n,r=v(e);for(;null!==r;){const s=De(i.node.children,r)||{children:{},childCount:0};i=new Rn(r,i,s),e=w(e),r=v(e)}return i}function Ae(n){return n.node.value}function Dn(n,t){n.node.value=t,Ln(n)}function Xr(n){return n.node.childCount>0}function c0(n,t){k(n.node.children,(e,i)=>{t(new Rn(e,n,i))})}function es(n,t,e,i){e&&!i&&t(n),c0(n,r=>{es(r,t,!0,i)}),e&&i&&t(n)}function Ct(n){return new P(null===n.parent?n.name:Ct(n.parent)+"/"+n.name)}function Ln(n){null!==n.parent&&function Kc(n,t,e){const i=function qc(n){return void 0===Ae(n)&&!Xr(n)}(e),r=te(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,Ln(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,Ln(n))}(n.parent,n.name,n)}const jc=/[\[\].#$\/\u0000-\u001F\u007F]/,$c=/[\[\].#$\u0000-\u001F\u007F]/,kn=10485760,d0=function(n){return"string"==typeof n&&0!==n.length&&!jc.test(n)},ts=function(n){return"string"==typeof n&&0!==n.length&&!$c.test(n)},It=function(n,t,e){const i=e instanceof P?new ha(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+Te(i));if("function"==typeof t)throw new Error(n+"contains a function "+Te(i)+" with contents = "+t.toString());if(Ft(t))throw new Error(n+"contains "+t.toString()+" "+Te(i));if("string"==typeof t&&t.length>kn/3&&Dt(t)>kn)throw new Error(n+"contains a string greater than "+kn+" utf8 bytes "+Te(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(k(t,(o,a)=>{if(".value"===o)r=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!d0(o)))throw new Error(n+" contains an invalid key ("+o+") "+Te(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function fa(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=Dt(t),ur(n)})(i,o),It(n,a,i),function pa(n){const t=n.parts_.pop();n.byteLength_-=Dt(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Te(i)+" in addition to actual children.")}},Fn=function(n,t,e,i){if(!(i&&void 0===e||ts(e)))throw new Error(Le(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Jc=function(n,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Fn(n,t,e,i)};class Xc{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function u0(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!Q0(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function W(n,t,e){u0(n,e),function ss(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(ed(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}(n,i=>V(i,t)||V(t,i))}function ed(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();Ee&&L("event: "+e.toString()),Be(i)}}}const td=25;class nd{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Xc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Kt(),this.transactionQueueTree_=new Rn,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ls(n){const e=n.infoData_.getNode(new P(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Pt(n){return Gc({timestamp:ls(n)})}function as(n,t,e,i,r){n.dataUpdateCount++;const s=new P(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let o=[];if(r)if(i){const c=Rt(e,d=>N(d));o=function Mc(n,t,e,i){const r=Tn(n,i);if(r){const s=wn(r),o=s.path,a=s.queryId,c=B(o,t),d=O.fromObject(e);return xn(n,o,new Ve(hn(a),c,d))}return[]}(n.serverSyncTree_,s,c,r)}else{const c=N(e);o=Kr(n.serverSyncTree_,s,c,r)}else if(i){const c=Rt(e,d=>N(d));o=function Dc(n,t,e){const i=O.fromObject(e);return ze(n,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,c)}else{const c=N(e);o=gt(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=je(n,s)),W(n.eventQueue_,a,o)}function cs(n,t){Bn(n,"connected",t),!1===t&&function ld(n){Ke(n,"onDisconnectEvents");const t=Pt(n),e=Kt();cn(n.onDisconnect_,E(),(r,s)=>{const o=Jr(r,s,n.serverSyncTree_,t);Ze(e,r,o)});let i=[];cn(e,E(),(r,s)=>{i=i.concat(gt(n.serverSyncTree_,r,s));const o=Gn(n,r);je(n,o)}),n.onDisconnect_=Kt(),W(n.eventQueue_,E(),i)}(n)}function Bn(n,t,e){const i=new P("/.info/"+t),r=N(e);n.infoData_.updateSnapshot(i,r);const s=gt(n.infoSyncTree_,i,r);W(n.eventQueue_,i,s)}function h0(n){return n.nextWriteId_++}function Hn(n,t,e,i,r){Ke(n,"set",{path:t.toString(),value:e,priority:i});const s=Pt(n),o=N(e,i),a=o0(n.serverSyncTree_,t),c=An(o,a,s),d=h0(n),u=En(n.serverSyncTree_,t,c,d,!0);u0(n.eventQueue_,u),n.server_.put(t.toString(),o.val(!0),(f,_)=>{const g="ok"===f;g||M("set at "+t+" failed: "+f);const I=fe(n.serverSyncTree_,d,!g);W(n.eventQueue_,t,I),function pe(n,t,e,i){t&&Be(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const o=new Error(s);o.code=r,t(o)}})}(0,r,f,_)});const h=Gn(n,t);je(n,h),W(n.eventQueue_,h,[])}function Ke(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),L(e,...t)}function Wn(n,t,e){return o0(n.serverSyncTree_,t,e)||y.EMPTY_NODE}function f0(n,t=n.transactionQueueTree_){if(t||p0(n,t),Ae(t)){const e=fs(n,t);m(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function pd(n,t,e){const i=e.map(d=>d.currentWriteId),r=Wn(n,t,i);let s=r;const o=r.hash();for(let d=0;d<e.length;d++){const u=e[d];m(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=B(t,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),c=t;n.server_.put(c.toString(),a,d=>{Ke(n,"transaction put response",{path:c.toString(),status:d});let u=[];if("ok"===d){const h=[];for(let f=0;f<e.length;f++)e[f].status=2,u=u.concat(fe(n.serverSyncTree_,e[f].currentWriteId)),e[f].onComplete&&h.push(()=>e[f].onComplete(null,!0,e[f].currentOutputSnapshotResolved)),e[f].unwatcher();p0(n,a0(n.transactionQueueTree_,t)),f0(n,n.transactionQueueTree_),W(n.eventQueue_,t,u);for(let f=0;f<h.length;f++)Be(h[f])}else{if("datastale"===d)for(let h=0;h<e.length;h++)e[h].status=3===e[h].status?4:0;else{M("transaction at "+c.toString()+" failed: "+d);for(let h=0;h<e.length;h++)e[h].status=4,e[h].abortReason=d}je(n,t)}},o)}(n,Ct(t),e)}else Xr(t)&&c0(t,e=>{f0(n,e)})}function je(n,t){const e=hs(n,t),i=Ct(e);return function _d(n,t,e){if(0===t.length)return;const i=[];let r=[];const o=t.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){const c=t[a],d=B(e,c.path);let h,u=!1;if(m(null!==d,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)u=!0,h=c.abortReason,r=r.concat(fe(n.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=td)u=!0,h="maxretry",r=r.concat(fe(n.serverSyncTree_,c.currentWriteId,!0));else{const f=Wn(n,c.path,o);c.currentInputSnapshot=f;const _=t[a].update(f.val());if(void 0!==_){It("transaction failed: Data returned ",_,c.path);let g=N(_);"object"==typeof _&&null!=_&&te(_,".priority")||(g=g.updatePriority(f.getPriority()));const R=c.currentWriteId,Z=Pt(n),v0=An(g,f,Z);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=v0,c.currentWriteId=h0(n),o.splice(o.indexOf(R),1),r=r.concat(En(n.serverSyncTree_,c.path,v0,c.currentWriteId,c.applyLocally)),r=r.concat(fe(n.serverSyncTree_,R,!0))}else u=!0,h="nodata",r=r.concat(fe(n.serverSyncTree_,c.currentWriteId,!0))}W(n.eventQueue_,e,r),r=[],u&&(t[a].status=2,setTimeout(t[a].unwatcher,Math.floor(0)),t[a].onComplete&&i.push("nodata"===h?()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot):()=>t[a].onComplete(new Error(h),!1,null)))}p0(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)Be(i[a]);f0(n,n.transactionQueueTree_)}(n,fs(n,e),i),i}function hs(n,t){let e,i=n.transactionQueueTree_;for(e=v(t);null!==e&&void 0===Ae(i);)i=a0(i,e),e=v(t=w(t));return i}function fs(n,t){const e=[];return ps(n,t,e),e.sort((i,r)=>i.order-r.order),e}function ps(n,t,e){const i=Ae(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);c0(t,r=>{ps(n,r,e)})}function p0(n,t){const e=Ae(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,Dn(t,e.length>0?e:void 0)}c0(t,i=>{p0(n,i)})}function Gn(n,t){const e=Ct(hs(n,t)),i=a0(n.transactionQueueTree_,t);return function zc(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{Zn(n,r)}),Zn(n,i),es(i,r=>{Zn(n,r)}),e}function Zn(n,t){const e=Ae(t);if(e){const i=[];let r=[],s=-1;for(let o=0;o<e.length;o++)3===e[o].status||(1===e[o].status?(m(s===o-1,"All SENT items should be at beginning of queue."),s=o,e[o].status=3,e[o].abortReason="set"):(m(0===e[o].status,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(fe(n.serverSyncTree_,e[o].currentWriteId,!0)),e[o].onComplete&&i.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Dn(t,void 0):e.length=s+1,W(n.eventQueue_,Ct(t),r);for(let o=0;o<i.length;o++)Be(i[o])}}const Vn=function(n,t){const e=yd(n),i=e.namespace;return"firebase.com"===e.domain&&$(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&$("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&M("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Z0(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new P(e.pathString)}},yd=function(n){let t="",e="",i="",r="",s="",o=!0,a="https",c=443;if("string"==typeof n){let d=n.indexOf("//");d>=0&&(a=n.substring(0,d-1),n=n.substring(d+2));let u=n.indexOf("/");-1===u&&(u=n.length);let h=n.indexOf("?");-1===h&&(h=n.length),t=n.substring(0,Math.min(u,h)),u<h&&(r=function md(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(u,h)));const f=function gd(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):M(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,h)));d=t.indexOf(":"),d>=0?(o="https"===a||"wss"===a,c=parseInt(t.substring(d+1),10)):d=t.length;const _=t.slice(0,d);if("localhost"===_.toLowerCase())e="localhost";else if(_.split(".").length<=2)e=_;else{const g=t.indexOf(".");i=t.substring(0,g).toLowerCase(),e=t.substring(g+1),s=i}"ns"in f&&(s=f.ns)}return{host:t,port:c,domain:e,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};class ms{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+D(this.snapshot.exportVal())}}class gs{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class qn{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return m(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class G{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return C(this._path)?null:$0(this._path)}get ref(){return new j(this._repo,this._path)}get _queryIdentifier(){const t=Ir(this._queryParams),e=W0(t);return"{}"===e?"default":e}get _queryObject(){return Ir(this._queryParams)}isEqual(t){if(!((t=ke(t))instanceof G))return!1;const e=this._repo===t._repo,i=Q0(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function da(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}class j extends G{constructor(t,e){super(t,e,new sn,!1)}get parent(){const t=dr(this._path);return null===t?null:new j(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Ne{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new P(t),i=me(this.ref,t);return new Ne(this._node.getChild(e),i,S)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new Ne(r,me(this.ref,i),S)))}hasChild(t){const e=new P(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function g0(n,t){return(n=ke(n))._checkNotDeleted("ref"),void 0!==t?me(n._root,t):n._root}function me(n,t){return null===v((n=ke(n))._path)?Jc("child","path",t,!1):Fn("child","path",t,!1),new j(n._repo,A(n._path,t))}function zn(n,t){(function(n,t){if(".info"===v(t))throw new Error(n+" failed = Can't modify data under /.info/")})("set",(n=ke(n))._path),function(n,t,e,i){i&&void 0===t||It(Le(n,"value"),t,e)}("set",t,n._path,!1);const e=new Qe;return Hn(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function ys(n){n=ke(n);const t=new qn(()=>{}),e=new Tt(t);return function sd(n,t,e){const i=function Fc(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(d,u)=>{const h=B(d,e);i=i||ue(u,h)});let r=n.syncPointTree_.get(e);r?i=i||ue(r,E()):(r=new Wr,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,o=s?new ce(i,!0,!1):null;return function Cc(n){return Qt(n.viewCache_)}(Gr(r,t,Yt(n.pendingWriteTree_,t._path),s?o.getNode():y.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(r=>{const s=N(r).withIndex(t._queryParams.getIndex());let o;if(Pn(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())o=gt(n.serverSyncTree_,t._path,s);else{const a=yt(n.serverSyncTree_,t);o=Kr(n.serverSyncTree_,t._path,s,a)}return W(n.eventQueue_,t._path,o),s0(n.serverSyncTree_,t,e,null,!0),s},r=>(Ke(n,"get for query "+D(t)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,e).then(i=>new Ne(i,new j(n._repo,n._path),n._queryParams.getIndex()))}class Tt{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new ms("value",this,new Ne(t.snapshotNode,new j(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new gs(this,t,e):null}matches(t){return t instanceof Tt&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}(function Pc(n){m(!t0,"__referenceConstructor has already been defined"),t0=n})(j),function Oc(n){m(!r0,"__referenceConstructor has already been defined"),r0=n}(j);const Kn={};function Is(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||$("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),L("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c,d,o=Vn(s,r),a=o.repoInfo;typeof process<"u"&&process.env&&(d=process.env.FIREBASE_DATABASE_EMULATOR_HOST),d?(c=!0,s=`http://${d}?ns=${a.namespace}`,o=Vn(s,r),a=o.repoInfo):c=!o.repoInfo.secure;const u=r&&c?new st(st.OWNER):new Hl(n.name,n.options,t);(function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!d0(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ts(n)}(e))throw new Error(Le(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),C(o.path)||$("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function Ld(n,t,e,i){let r=Kn[t.name];r||(r={},Kn[t.name]=r);let s=r[n.toURLString()];return s&&$("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new nd(n,false,e,i),r[n.toURLString()]=s,s}(a,n,u,new Bl(n.name,e));return new Md(h,n)}class Md{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function id(n,t,e){if(n.stats_=z0(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new zt(n.repoInfo_,(i,r,s,o)=>{as(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>cs(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{D(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new we(n.repoInfo_,t,(i,r,s,o)=>{as(n,i,r,s,o)},i=>{cs(n,i)},i=>{!function rd(n,t){k(t,(e,i)=>{Bn(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function Gl(n,t){const e=n.toString();return q0[e]||(q0[e]=t()),q0[e]}(n.repoInfo_,()=>new Ga(n.stats_,n.server_)),n.infoData_=new Fa,n.infoSyncTree_=new zr({startListening:(i,r,s,o)=>{let a=[];const c=n.infoData_.getNode(i._path);return c.isEmpty()||(a=gt(n.infoSyncTree_,i._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Bn(n,"connected",!1),n.serverSyncTree_=new zr({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,c)=>{const d=o(a,c);W(n.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new j(this._repo,E())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Dd(n,t){const e=Kn[t];(!e||e[n.key]!==n)&&$(`Database ${t}(${n.repoInfo_}) has already been deleted.`),function us(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&$("Cannot call "+t+" on a deleted database.")}}function jn(n=function pl(n=Lt){const t=be.get(n);if(!t&&n===Lt&&oi())return D0();if(!t)throw ne.create("no-app",{appName:n});return t}(),t){const e=function vi(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}(n,"database").getImmediate({identifier:t});if(!e._instanceStarted){const i=(n=>{const t=(n=>{var t,e;return null===(e=null===(t=Ot())||void 0===t?void 0:t.emulatorHosts)||void 0===e?void 0:e[n]})(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return"["===t[0]?[t.substring(1,e-1),i]:[t.substring(0,e),i]})("database");i&&function Fd(n,t,e,i={}){(n=ke(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&$("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&$('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new st(st.OWNER);else if(i.mockUserToken){const o="string"==typeof i.mockUserToken?i.mockUserToken:function Ys(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i=t||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[St(JSON.stringify({alg:"none",type:"JWT"})),St(JSON.stringify(o)),""].join(".")}(i.mockUserToken,n.app.options.projectId);s=new st(o)}!function Rd(n,t,e,i){n.repoInfo_=new Z0(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(e,...i)}return e}function xt(n){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function p(n,t,e){return(t=function Gd(n){var t=function Wd(n,t){if("object"!==xt(n)||null===n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var i=e.call(n,t||"default");if("object"!==xt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"===xt(t)?t:String(t)}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}we.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},we.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function Bd(n){(function xi(n){B0=n})("10.1.0"),Mt(new Xe("database",(t,{instanceIdentifier:e})=>Is(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),Me(Ti,"1.0.1",n),Me(Ti,"1.0.1","esm2017")}();let T=(()=>{class n{static addClass(e,i){e&&i&&(e.classList?e.classList.add(i):e.className+=" "+i)}static addMultipleClasses(e,i){if(e&&i)if(e.classList){let r=i.trim().split(" ");for(let s=0;s<r.length;s++)e.classList.add(r[s])}else{let r=i.split(" ");for(let s=0;s<r.length;s++)e.className+=" "+r[s]}}static removeClass(e,i){e&&i&&(e.classList?e.classList.remove(i):e.className=e.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(e,i){return!(!e||!i)&&(e.classList?e.classList.contains(i):new RegExp("(^| )"+i+"( |$)","gi").test(e.className))}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(i){return i!==e})}static find(e,i){return Array.from(e.querySelectorAll(i))}static findSingle(e,i){return this.isElement(e)?e.querySelector(i):null}static index(e){let i=e.parentNode.childNodes,r=0;for(var s=0;s<i.length;s++){if(i[s]==e)return r;1==i[s].nodeType&&r++}return-1}static indexWithinGroup(e,i){let r=e.parentNode?e.parentNode.childNodes:[],s=0;for(var o=0;o<r.length;o++){if(r[o]==e)return s;r[o].attributes&&r[o].attributes[i]&&1==r[o].nodeType&&s++}return-1}static appendOverlay(e,i,r="self"){"self"!==r&&e&&i&&this.appendChild(e,i)}static alignOverlay(e,i,r="self",s=!0){e&&i&&(s&&(e.style.minWidth=`${n.getOuterWidth(i)}px`),"self"===r?this.relativePosition(e,i):this.absolutePosition(e,i))}static relativePosition(e,i){const r=Z=>{if(Z)return"relative"===getComputedStyle(Z).getPropertyValue("position")?Z:r(Z.parentElement)},s=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),o=i.offsetHeight,a=i.getBoundingClientRect(),c=this.getWindowScrollTop(),d=this.getWindowScrollLeft(),u=this.getViewport(),f=r(e)?.getBoundingClientRect()||{top:-1*c,left:-1*d};let _,g;a.top+o+s.height>u.height?(_=a.top-f.top-s.height,e.style.transformOrigin="bottom",a.top+_<0&&(_=-1*a.top)):(_=o+a.top-f.top,e.style.transformOrigin="top");const I=a.left+s.width-u.width;g=s.width>u.width?-1*(a.left-f.left):I>0?a.left-f.left-I:a.left-f.left,e.style.top=_+"px",e.style.left=g+"px"}static absolutePosition(e,i){const r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=r.height,o=r.width,a=i.offsetHeight,c=i.offsetWidth,d=i.getBoundingClientRect(),u=this.getWindowScrollTop(),h=this.getWindowScrollLeft(),f=this.getViewport();let _,g;d.top+a+s>f.height?(_=d.top+u-s,e.style.transformOrigin="bottom",_<0&&(_=u)):(_=a+d.top+u,e.style.transformOrigin="top"),g=d.left+o>f.width?Math.max(0,d.left+h+c-o):d.left+h,e.style.top=_+"px",e.style.left=g+"px"}static getParents(e,i=[]){return null===e.parentNode?i:this.getParents(e.parentNode,i.concat([e.parentNode]))}static getScrollableParents(e){let i=[];if(e){let r=this.getParents(e);const s=/(auto|scroll)/,o=a=>{let c=window.getComputedStyle(a,null);return s.test(c.getPropertyValue("overflow"))||s.test(c.getPropertyValue("overflowX"))||s.test(c.getPropertyValue("overflowY"))};for(let a of r){let c=1===a.nodeType&&a.dataset.scrollselectors;if(c){let d=c.split(",");for(let u of d){let h=this.findSingle(a,u);h&&o(h)&&i.push(h)}}9!==a.nodeType&&o(a)&&i.push(a)}}return i}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementDimensions(e){let i={};return e.style.visibility="hidden",e.style.display="block",i.width=e.offsetWidth,i.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",i}static scrollInView(e,i){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,o=getComputedStyle(e).getPropertyValue("paddingTop"),a=o?parseFloat(o):0,c=e.getBoundingClientRect(),u=i.getBoundingClientRect().top+document.body.scrollTop-(c.top+document.body.scrollTop)-s-a,h=e.scrollTop,f=e.clientHeight,_=this.getOuterHeight(i);u<0?e.scrollTop=h+u:u+_>f&&(e.scrollTop=h+u-f+_)}static fadeIn(e,i){e.style.opacity=0;let r=+new Date,s=0,o=function(){s=+e.style.opacity.replace(",",".")+((new Date).getTime()-r)/i,e.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(o)||setTimeout(o,16))};o()}static fadeOut(e,i){var r=1,a=50/i;let c=setInterval(()=>{(r-=a)<=0&&(r=0,clearInterval(c)),e.style.opacity=r},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,i){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(o){return-1!==[].indexOf.call(document.querySelectorAll(o),this)}).call(e,i)}static getOuterWidth(e,i){let r=e.offsetWidth;if(i){let s=getComputedStyle(e);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}static getHorizontalPadding(e){let i=getComputedStyle(e);return parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)}static getHorizontalMargin(e){let i=getComputedStyle(e);return parseFloat(i.marginLeft)+parseFloat(i.marginRight)}static innerWidth(e){let i=e.offsetWidth,r=getComputedStyle(e);return i+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static width(e){let i=e.offsetWidth,r=getComputedStyle(e);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static getInnerHeight(e){let i=e.offsetHeight,r=getComputedStyle(e);return i+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),i}static getOuterHeight(e,i){let r=e.offsetHeight;if(i){let s=getComputedStyle(e);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}static getHeight(e){let i=e.offsetHeight,r=getComputedStyle(e);return i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),i}static getWidth(e){let i=e.offsetWidth,r=getComputedStyle(e);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),i}static getViewport(){let e=window,i=document,r=i.documentElement,s=i.getElementsByTagName("body")[0];return{width:e.innerWidth||r.clientWidth||s.clientWidth,height:e.innerHeight||r.clientHeight||s.clientHeight}}static getOffset(e){var i=e.getBoundingClientRect();return{top:i.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:i.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,i){let r=e.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(i,e)}static getUserAgent(){if(navigator&&this.isClient())return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,i){if(this.isElement(i))i.appendChild(e);else{if(!(i&&i.el&&i.el.nativeElement))throw"Cannot append "+i+" to "+e;i.el.nativeElement.appendChild(e)}}static removeChild(e,i){if(this.isElement(i))i.removeChild(e);else{if(!i.el||!i.el.nativeElement)throw"Cannot remove "+e+" from "+i;i.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let i=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let i=document.createElement("div");i.className="p-scrollbar-measure",document.body.appendChild(i);let r=i.offsetWidth-i.clientWidth;return document.body.removeChild(i),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let i=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=i,i}static invokeElementMethod(e,i,r){e[i].apply(e,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:i[1]||"",version:i[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return!e||null===e.offsetParent}static isVisible(e){return e&&null!=e.offsetParent}static isExist(e){return null!==e&&typeof e<"u"&&e.nodeName&&e.parentNode}static focus(e,i){e&&document.activeElement!==e&&e.focus(i)}static getFocusableElements(e){let i=n.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let s of i)(s.offsetWidth||s.offsetHeight||s.getClientRects().length)&&r.push(s);return r}static getNextFocusableElement(e,i=!1){const r=n.getFocusableElements(e);let s=0;if(r&&r.length>0){const o=r.indexOf(r[0].ownerDocument.activeElement);i?s=-1==o||0===o?r.length-1:o-1:-1!=o&&o!==r.length-1&&(s=o+1)}return r[s]}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(e,i){if(!e)return null;switch(e){case"document":return document;case"window":return window;case"@next":return i?.nextElementSibling;case"@prev":return i?.previousElementSibling;case"@parent":return i?.parentElement;case"@grandparent":return i?.parentElement.parentElement;default:const r=typeof e;if("string"===r)return document.querySelector(e);if("object"===r&&e.hasOwnProperty("nativeElement"))return this.isExist(e.nativeElement)?e.nativeElement:void 0;const o=(a=e)&&a.constructor&&a.call&&a.apply?e():e;return o&&9===o.nodeType||this.isExist(o)?o:null}var a}static isClient(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}static getAttribute(e,i){if(e){const r=e.getAttribute(i);return isNaN(r)?"true"===r||"false"===r?"true"===r:r:+r}}}return p(n,"zindex",1e3),p(n,"calculatedScrollbarWidth",null),p(n,"calculatedScrollbarHeight",null),p(n,"browser",void 0),n})();class Zd{constructor(t,e=(()=>{})){p(this,"element",void 0),p(this,"listener",void 0),p(this,"scrollableParents",void 0),this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=T.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}class $n{static equals(t,e,i){return i?this.resolveFieldData(t,i)===this.resolveFieldData(e,i):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var s,o,a,i=Array.isArray(t),r=Array.isArray(e);if(i&&r){if((o=t.length)!=e.length)return!1;for(s=o;0!=s--;)if(!this.equalsByValue(t[s],e[s]))return!1;return!0}if(i!=r)return!1;var c=this.isDate(t),d=this.isDate(e);if(c!=d)return!1;if(c&&d)return t.getTime()==e.getTime();var u=t instanceof RegExp,h=e instanceof RegExp;if(u!=h)return!1;if(u&&h)return t.toString()==e.toString();var f=Object.keys(t);if((o=f.length)!==Object.keys(e).length)return!1;for(s=o;0!=s--;)if(!Object.prototype.hasOwnProperty.call(e,f[s]))return!1;for(s=o;0!=s--;)if(!this.equalsByValue(t[a=f[s]],e[a]))return!1;return!0}return t!=t&&e!=e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(-1==e.indexOf("."))return t[e];{let i=e.split("."),r=t;for(let s=0,o=i.length;s<o;++s){if(null==r)return null;r=r[i[s]]}return r}}return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,i){t&&e!==i&&(i>=t.length&&(i%=t.length,e%=t.length),t.splice(i,0,t.splice(e,1)[0]))}static insertIntoOrderedArray(t,e,i,r){if(i.length>0){let s=!1;for(let o=0;o<i.length;o++)if(this.findIndexInList(i[o],r)>e){i.splice(o,0,t),s=!0;break}s||i.push(t)}else i.push(t)}static findIndexInList(t,e){let i=-1;if(e)for(let r=0;r<e.length;r++)if(e[r]==t){i=r;break}return i}static contains(t,e){if(null!=t&&e&&e.length)for(let i of e)if(this.equals(t,i))return!0;return!1}static removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}static isDate(t){return"[object Date]"===Object.prototype.toString.call(t)}static isEmpty(t){return null==t||""===t||Array.isArray(t)&&0===t.length||!this.isDate(t)&&"object"==typeof t&&0===Object.keys(t).length}static isNotEmpty(t){return!this.isEmpty(t)}static compare(t,e,i,r=1){let s=-1;const o=this.isEmpty(t),a=this.isEmpty(e);return s=o&&a?0:o?r:a?-r:"string"==typeof t&&"string"==typeof e?t.localeCompare(e,i,{numeric:!0}):t<e?-1:t>e?1:0,s}static sort(t,e,i=1,r,s=1){return(1===s?i:s)*$n.compare(t,e,r,i)}static merge(t,e){if(null!=t||null!=e)return null!=t&&"object"!=typeof t||null!=e&&"object"!=typeof e?null!=t&&"string"!=typeof t||null!=e&&"string"!=typeof e?e||t:[t||"",e||""].join(" "):{...t||{},...e||{}}}static isPrintableCharacter(t=""){return this.isNotEmpty(t)&&1===t.length&&t.match(/\S| /)}static getItemValue(t,...e){return this.isFunction(t)?t(...e):t}static findLastIndex(t,e){let i=-1;if(this.isNotEmpty(t))try{i=t.findLastIndex(e)}catch{i=t.lastIndexOf([...t].reverse().find(e))}return i}static findLast(t,e){let i;if(this.isNotEmpty(t))try{i=t.findLast(e)}catch{i=[...t].reverse().find(e)}return i}}var Ps=0;function Ts(n="pn_id_"){return`${n}${++Ps}`}var Qn=function Vd(){let n=[];const r=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:r,set:(s,o,a)=>{o&&(o.style.zIndex=String(((s,o)=>{let a=n.length>0?n[n.length-1]:{key:s,value:o},c=a.value+(a.key===s?0:o)+1;return n.push({key:s,value:c}),c})(s,a)))},clear:s=>{s&&((s=>{n=n.filter(o=>o.value!==s)})(r(s)),s.style.zIndex="")},getCurrent:()=>n.length>0?n[n.length-1].value:0}}(),qd=ge(8645);let F=(()=>{class n{}return p(n,"STARTS_WITH","startsWith"),p(n,"CONTAINS","contains"),p(n,"NOT_CONTAINS","notContains"),p(n,"ENDS_WITH","endsWith"),p(n,"EQUALS","equals"),p(n,"NOT_EQUALS","notEquals"),p(n,"IN","in"),p(n,"LESS_THAN","lt"),p(n,"LESS_THAN_OR_EQUAL_TO","lte"),p(n,"GREATER_THAN","gt"),p(n,"GREATER_THAN_OR_EQUAL_TO","gte"),p(n,"BETWEEN","between"),p(n,"IS","is"),p(n,"IS_NOT","isNot"),p(n,"BEFORE","before"),p(n,"AFTER","after"),p(n,"DATE_IS","dateIs"),p(n,"DATE_IS_NOT","dateIsNot"),p(n,"DATE_BEFORE","dateBefore"),p(n,"DATE_AFTER","dateAfter"),n})(),Kd=(()=>{var n;class t{constructor(){p(this,"ripple",!1),p(this,"overlayOptions",{}),p(this,"filterMatchModeOptions",{text:[F.STARTS_WITH,F.CONTAINS,F.NOT_CONTAINS,F.ENDS_WITH,F.EQUALS,F.NOT_EQUALS],numeric:[F.EQUALS,F.NOT_EQUALS,F.LESS_THAN,F.LESS_THAN_OR_EQUAL_TO,F.GREATER_THAN,F.GREATER_THAN_OR_EQUAL_TO],date:[F.DATE_IS,F.DATE_IS_NOT,F.DATE_BEFORE,F.DATE_AFTER]}),p(this,"translation",{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",pending:"Pending",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",emptyFilterMessage:"No results found",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"{page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",previousPageLabel:"Previous Page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left"}}),p(this,"zIndex",{modal:1100,overlay:1e3,menu:1e3,tooltip:1100}),p(this,"translationSource",new qd.x),p(this,"translationObserver",this.translationSource.asObservable())}getTranslation(i){return this.translation[i]}setTranslation(i){this.translation={...this.translation,...i},this.translationSource.next(this.translation)}}return n=t,p(t,"\u0275fac",function(i){return new(i||n)}),p(t,"\u0275prov",l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),t})(),Yn=(()=>{var n;class t{}return n=t,p(t,"\u0275fac",function(i){return new(i||n)}),p(t,"\u0275mod",l.oAB({type:n})),p(t,"\u0275inj",l.cJS({imports:[H.ez]})),t})(),jd=(()=>{var n;class t{get disabled(){return this._disabled}set disabled(i){this._disabled=i,this.deactivate()}constructor(i,r,s,o,a,c){p(this,"platformId",void 0),p(this,"el",void 0),p(this,"zone",void 0),p(this,"config",void 0),p(this,"renderer",void 0),p(this,"changeDetector",void 0),p(this,"tooltipPosition",void 0),p(this,"tooltipEvent","hover"),p(this,"appendTo",void 0),p(this,"positionStyle",void 0),p(this,"tooltipStyleClass",void 0),p(this,"tooltipZIndex",void 0),p(this,"escape",!0),p(this,"showDelay",void 0),p(this,"hideDelay",void 0),p(this,"life",void 0),p(this,"positionTop",void 0),p(this,"positionLeft",void 0),p(this,"autoHide",!0),p(this,"fitContent",!0),p(this,"hideOnEscape",!0),p(this,"text",void 0),p(this,"tooltipOptions",void 0),p(this,"_tooltipOptions",{tooltipLabel:null,tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",positionStyle:null,tooltipStyleClass:null,tooltipZIndex:"auto",escape:!0,disabled:null,showDelay:null,hideDelay:null,positionTop:null,positionLeft:null,life:null,autoHide:!0,hideOnEscape:!0}),p(this,"_disabled",void 0),p(this,"container",void 0),p(this,"styleClass",void 0),p(this,"tooltipText",void 0),p(this,"showTimeout",void 0),p(this,"hideTimeout",void 0),p(this,"active",void 0),p(this,"mouseEnterListener",void 0),p(this,"mouseLeaveListener",void 0),p(this,"containerMouseleaveListener",void 0),p(this,"clickListener",void 0),p(this,"focusListener",void 0),p(this,"blurListener",void 0),p(this,"scrollHandler",void 0),p(this,"resizeListener",void 0),this.platformId=i,this.el=r,this.zone=s,this.config=o,this.renderer=a,this.changeDetector=c}ngAfterViewInit(){(0,H.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onInputClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("click",this.clickListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let i=this.getTarget(this.el.nativeElement);i.addEventListener("focus",this.focusListener),i.addEventListener("blur",this.blurListener)}})}ngOnChanges(i){i.tooltipPosition&&this.setOption({tooltipPosition:i.tooltipPosition.currentValue}),i.tooltipEvent&&this.setOption({tooltipEvent:i.tooltipEvent.currentValue}),i.appendTo&&this.setOption({appendTo:i.appendTo.currentValue}),i.positionStyle&&this.setOption({positionStyle:i.positionStyle.currentValue}),i.tooltipStyleClass&&this.setOption({tooltipStyleClass:i.tooltipStyleClass.currentValue}),i.tooltipZIndex&&this.setOption({tooltipZIndex:i.tooltipZIndex.currentValue}),i.escape&&this.setOption({escape:i.escape.currentValue}),i.showDelay&&this.setOption({showDelay:i.showDelay.currentValue}),i.hideDelay&&this.setOption({hideDelay:i.hideDelay.currentValue}),i.life&&this.setOption({life:i.life.currentValue}),i.positionTop&&this.setOption({positionTop:i.positionTop.currentValue}),i.positionLeft&&this.setOption({positionLeft:i.positionLeft.currentValue}),i.disabled&&this.setOption({disabled:i.disabled.currentValue}),i.text&&(this.setOption({tooltipLabel:i.text.currentValue}),this.active&&(i.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),i.autoHide&&this.setOption({autoHide:i.autoHide.currentValue}),i.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...i.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}isAutoHide(){return this.getOption("autoHide")}onMouseEnter(i){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(i){(this.isAutoHide()||!(T.hasClass(i.target,"p-tooltip")||T.hasClass(i.target,"p-tooltip-arrow")||T.hasClass(i.target,"p-tooltip-text")||T.hasClass(i.relatedTarget,"p-tooltip")||T.hasClass(i.relatedTarget,"p-tooltip-text")||T.hasClass(i.relatedTarget,"p-tooltip-arrow")))&&this.deactivate()}onFocus(i){this.activate()}onBlur(i){this.deactivate()}onInputClick(i){this.deactivate()}onPressEscape(){this.hideOnEscape&&this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let i=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},i)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let i=document.createElement("div");i.className="p-tooltip-arrow",this.container.appendChild(i),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?T.appendChild(this.container,this.el.nativeElement):T.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content"),this.isAutoHide()||this.bindContainerMouseleaveListener()}bindContainerMouseleaveListener(){this.containerMouseleaveListener||(this.containerMouseleaveListener=this.renderer.listen(this.container??this.container.nativeElement,"mouseleave",r=>{this.deactivate()}))}unbindContainerMouseleaveListener(){this.containerMouseleaveListener&&(this.bindContainerMouseleaveListener(),this.containerMouseleaveListener=null)}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),T.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?Qn.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&Qn.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let i=this.el.nativeElement.getBoundingClientRect();return{left:i.left+T.getWindowScrollLeft(),top:i.top+T.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let i=this.getHostOffset(),r=i.left+T.getOuterWidth(this.el.nativeElement),s=i.top+(T.getOuterHeight(this.el.nativeElement)-T.getOuterHeight(this.container))/2;this.container.style.left=r+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let i=this.getHostOffset(),r=i.left-T.getOuterWidth(this.container),s=i.top+(T.getOuterHeight(this.el.nativeElement)-T.getOuterHeight(this.container))/2;this.container.style.left=r+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let i=this.getHostOffset(),r=i.left+(T.getOuterWidth(this.el.nativeElement)-T.getOuterWidth(this.container))/2,s=i.top-T.getOuterHeight(this.container);this.container.style.left=r+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let i=this.getHostOffset(),r=i.left+(T.getOuterWidth(this.el.nativeElement)-T.getOuterWidth(this.container))/2,s=i.top+T.getOuterHeight(this.el.nativeElement);this.container.style.left=r+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}setOption(i){this._tooltipOptions={...this._tooltipOptions,...i}}getOption(i){return this._tooltipOptions[i]}getTarget(i){return T.hasClass(i,"p-inputwrapper")?T.findSingle(i,"input"):i}preAlign(i){this.container.style.left="-999px",this.container.style.top="-999px";let r="p-tooltip p-component p-tooltip-"+i;this.container.className=this.getOption("tooltipStyleClass")?r+" "+this.getOption("tooltipStyleClass"):r}isOutOfBounds(){let i=this.container.getBoundingClientRect(),r=i.top,s=i.left,o=T.getOuterWidth(this.container),a=T.getOuterHeight(this.container),c=T.getViewport();return s+o>c.width||s<0||r<0||r+a>c.height}onWindowResize(i){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Zd(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let i=this.getTarget(this.el.nativeElement);i.removeEventListener("focus",this.focusListener),i.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):T.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.unbindContainerMouseleaveListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&Qn.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return n=t,p(t,"\u0275fac",function(i){return new(i||n)(l.Y36(l.Lbi),l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(Kd),l.Y36(l.Qsj),l.Y36(l.sBO))}),p(t,"\u0275dir",l.lG2({type:n,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],hostBindings:function(i,r){1&i&&l.NdJ("keydown.escape",function(o){return r.onPressEscape(o)},!1,l.evT)},inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",autoHide:"autoHide",fitContent:"fitContent",hideOnEscape:"hideOnEscape",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[l.TTD]})),t})(),Jn=(()=>{var n;class t{}return n=t,p(t,"\u0275fac",function(i){return new(i||n)}),p(t,"\u0275mod",l.oAB({type:n})),p(t,"\u0275inj",l.cJS({imports:[H.ez]})),t})();function $d(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",50),l.NdJ("click",function(){const s=l.CHM(e).index,o=l.oxw();return l.KtG(o.selectBuildMode(s))}),l._UZ(1,"i"),l.qZA()}if(2&n){const e=t.$implicit,i=t.index,r=l.oxw();l.Gre("tool-l tool-l-",r.buildMode==i," d-flex justify-content-center align-items-center"),l.s9C("pTooltip",e),l.xp6(1),l.Gre("tool-text-l pi ",r.buildMaterialIcon[i],"")}}function Qd(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",50),l.NdJ("click",function(){const s=l.CHM(e).index,o=l.oxw();return l.KtG(o.selectActionTool(s+7))}),l._UZ(1,"i"),l.qZA()}if(2&n){const e=t.$implicit,i=t.index,r=l.oxw();l.MT6("tool-l tool-l-",r.buildMode==i+7," tool-l-disable-",0==r.buildHistory.length,"\n                        d-flex justify-content-center align-items-center"),l.s9C("pTooltip",e),l.xp6(1),l.Gre("tool-text-l pi ",r.actionToolIcon[i],"")}}function Yd(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",53),l.NdJ("click",function(){const s=l.CHM(e).index,o=l.oxw().index,a=l.oxw();return l.KtG(a.toggleCell(o,s))}),l.qZA()}if(2&n){const e=t.index,i=l.oxw().index;l.hYB("id","game_",i,"_",e,"")}}function Jd(n,t){if(1&n&&(l.TgZ(0,"div")(1,"div",51),l.YNc(2,Yd,1,2,"div",52),l.qZA()()),2&n){const e=l.oxw();l.xp6(2),l.Q6J("ngForOf",e.counter(e.cols/2))}}function Xd(n,t){1&n&&(l.TgZ(0,"div",54),l._UZ(1,"i",55),l.qZA())}function eu(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",57),l.NdJ("click",function(){const s=l.CHM(e).index,o=l.oxw().index,a=l.oxw();return l.KtG(a.toggleCell(o,s+a.cols/2))}),l.qZA()}if(2&n){const e=t.index,i=l.oxw().index,r=l.oxw();l.hYB("id","game_",i,"_",e+r.cols/2,"")}}function tu(n,t){if(1&n&&(l.TgZ(0,"div")(1,"div",51),l.YNc(2,eu,1,2,"div",56),l.qZA()()),2&n){const e=l.oxw();l.xp6(2),l.Q6J("ngForOf",e.counter(e.cols/2))}}function nu(n,t){if(1&n&&(l.TgZ(0,"div",54)(1,"i",55),l._uU(2),l.qZA()()),2&n){const e=l.oxw();l.xp6(2),l.hij(" ",e.lockCounter,"")}}function iu(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",58),l.NdJ("click",function(){const s=l.CHM(e).index,o=l.oxw();return l.KtG(o.selectBuildMode(s))}),l._UZ(1,"i"),l.qZA()}if(2&n){const e=t.$implicit,i=t.index,r=l.oxw();l.Gre("tool-r tool-r-",r.buildMode==i," d-flex justify-content-center align-items-center"),l.s9C("pTooltip",e),l.xp6(1),l.Gre("tool-text-r pi ",r.buildMaterialIcon[i],"")}}function ru(n,t){1&n&&(l.TgZ(0,"div"),l._uU(1," Draw "),l.qZA())}function su(n,t){if(1&n&&(l.TgZ(0,"div")(1,"div"),l._uU(2," Winner "),l.qZA(),l.TgZ(3,"div"),l._uU(4),l.qZA()()),2&n){const e=l.oxw(2);l.xp6(4),l.Oqu(e.player1Name)}}function ou(n,t){if(1&n&&(l.TgZ(0,"div")(1,"div"),l._uU(2,"Winner"),l.qZA(),l.TgZ(3,"div"),l._uU(4),l.qZA()()),2&n){const e=l.oxw(2);l.xp6(4),l.Oqu(e.player2Name)}}function lu(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",59)(1,"div",60)(2,"div",61)(3,"div",62),l.YNc(4,ru,2,0,"div",63),l.YNc(5,su,5,1,"div",63),l.YNc(6,ou,5,1,"div",63),l.qZA(),l.TgZ(7,"div",64)(8,"div",61)(9,"div",65),l._uU(10),l.qZA(),l.TgZ(11,"div",34)(12,"div"),l._uU(13,"Score"),l.qZA(),l._UZ(14,"div",66),l.TgZ(15,"div"),l._uU(16),l.qZA()(),l.TgZ(17,"div",34)(18,"div"),l._uU(19,"Born"),l.qZA(),l._UZ(20,"div",66),l.TgZ(21,"div"),l._uU(22),l.qZA()(),l.TgZ(23,"div",34)(24,"div"),l._uU(25,"Death"),l.qZA(),l._UZ(26,"div",66),l.TgZ(27,"div"),l._uU(28),l.qZA()()(),l._UZ(29,"div",67),l.TgZ(30,"div",61)(31,"div",65),l._uU(32),l.qZA(),l.TgZ(33,"div",34)(34,"div"),l._uU(35,"Score"),l.qZA(),l._UZ(36,"div",66),l.TgZ(37,"div"),l._uU(38),l.qZA()(),l.TgZ(39,"div",34)(40,"div"),l._uU(41,"Born"),l.qZA(),l._UZ(42,"div",66),l.TgZ(43,"div"),l._uU(44),l.qZA()(),l.TgZ(45,"div",34)(46,"div"),l._uU(47,"Death"),l.qZA(),l._UZ(48,"div",66),l.TgZ(49,"div"),l._uU(50),l.qZA()()()(),l.TgZ(51,"div",68)(52,"div",69),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.navToPage())}),l._uU(53,"Leaderboard"),l.qZA(),l.TgZ(54,"div",69),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return r.resetGame(),l.KtG(r.initPage())}),l._uU(55,"Play Again"),l.qZA(),l.TgZ(56,"div",69),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.menuAction(3))}),l._uU(57,"Main Menu"),l.qZA()()()()()}if(2&n){const e=l.oxw();l.xp6(4),l.Q6J("ngIf",e.count1Display==e.count2Display),l.xp6(1),l.Q6J("ngIf",e.count1Display>e.count2Display),l.xp6(1),l.Q6J("ngIf",e.count1Display<e.count2Display),l.xp6(4),l.Oqu(e.player1Name),l.xp6(6),l.Oqu(e.count1Display),l.xp6(6),l.Oqu(e.born1),l.xp6(6),l.Oqu(e.death1),l.xp6(4),l.Oqu(e.player2Name),l.xp6(6),l.Oqu(e.count2Display),l.xp6(6),l.Oqu(e.born2),l.xp6(6),l.Oqu(e.death2)}}let au=(()=>{var n;class t{constructor(i,r){this.router=i,this.gameService=r,this.buildMode=0,this.buildMaterial=[[[0,-1],[0,0],[0,1]],[[-1,0],[-1,1],[0,-1],[0,1],[1,1]],[[-1,1],[0,-1],[0,1],[1,0],[1,1]],[[0,0],[0,1],[1,0],[1,1]],[[-1,0],[0,-1],[0,1],[1,0]],[[-1,-2],[-1,1],[0,2],[1,-2],[1,2],[2,-1],[2,0],[2,1],[2,2]],[[-6,-4],[-6,-3],[-6,-2],[-6,2],[-6,3],[-6,4],[-4,-6],[-3,-6],[-2,-6],[-4,-1],[-3,-1],[-2,-1],[-4,1],[-3,1],[-2,1],[-4,6],[-3,6],[-2,6],[-1,-4],[-1,-3],[-1,-2],[-1,2],[-1,3],[-1,4],[1,-4],[1,-3],[1,-2],[1,2],[1,3],[1,4],[2,-6],[3,-6],[4,-6],[2,-1],[3,-1],[4,-1],[2,1],[3,1],[4,1],[2,6],[3,6],[4,6],[6,-4],[6,-3],[6,-2],[6,2],[6,3],[6,4]],[[0,0]]],this.actionTool=["Edit","Undo","Reset"],this.actionToolIcon=["pi-pencil","pi-undo","pi-times"],this.buildMaterialName=["Blinker","Glider Up","Glider Down","Farm","House","Spaceships","Castle"],this.buildMaterialIcon=["pi-eye","pi-send rotate","pi-send rotate-90","pi-table","pi-home","pi-share-alt","pi-shield"],this.count1Display=0,this.count2Display=0,this.born1=0,this.born2=0,this.death1=0,this.death2=0,this.rows=40,this.cols=90,this.game1Active=!0,this.game2Active=!0,this.generationCount=0,this.generationLimitDefault=500,this.generationLimit=this.generationLimitDefault,this.generationLimitUpgrade=500,this.controlButton=0,this.menuButtonAudioIcon="pi pi-volume-up",this.buildHistory=[],this.player1Lock=!1,this.player2Lock=!1,this.lockCounterDefault=10,this.lockCounter=this.lockCounterDefault,this.player1Name="User",this.player2Name="Computer",this.showResult=!1}ngOnInit(){this.initPage(),this.initializeFB()}initPage(){this.player1Name=this.gameService.players.player1.name,this.player2Name=this.gameService.players.player2.name,this.gameGrid=this.createEmptyGrid(this.rows,this.cols),setTimeout(()=>{this.initGame()},1e3)}initializeFB(){let r=D0({databaseURL:"https://game-of-life-ce-default-rtdb.europe-west1.firebasedatabase.app"});this.fbDatabase=jn(r)}initGame(){1==this.gameService.gameConfig.mode?(1==this.gameService.gameConfig.difficulty&&(this.gameGrid=Bs),2==this.gameService.gameConfig.difficulty&&(this.gameGrid=Hs),1==this.gameService.gameConfig.difficulty&&(this.gameGrid=Us),this.updateGrid(this.gameGrid),this.countLivingCells(this.gameGrid)):setTimeout(()=>{this.buildGame1()},3e3)}buildGame1(){clearInterval(this.lockIntervalId),this.player1Lock=!1,this.player2Lock=!0,this.lockIntervalId=setInterval(()=>{this.lockCounter<=0?(this.lockCounter=this.lockCounterDefault,clearInterval(this.lockIntervalId),this.buildGame2()):this.lockCounter--},1e3)}buildGame2(){clearInterval(this.lockIntervalId),this.player1Lock=!0,this.player2Lock=!1,this.lockIntervalId=setInterval(()=>{this.lockCounter<=0?(this.lockCounter=this.lockCounterDefault,clearInterval(this.lockIntervalId),this.buildComplete()):this.lockCounter--},1e3)}buildComplete(){clearInterval(this.lockIntervalId),this.player1Lock=!0,this.player2Lock=!0}createEmptyGrid(i,r){let s=new Array(i);for(let o=0;o<i;o++)s[o]=new Array(r).fill(0);return s}counter(i){return new Array(i)}pauseAudio(){}selectActionTool(i){this.buildMode=i,this.playAudio("audio5"),7==i?this.editBuild(i):8==i?this.undoLastBuild():9==i&&this.resetBuild()}editBuild(i){this.selectBuildMode(i)}undoLastBuild(){var i=this.buildHistory[this.buildHistory.length-1];this.toggleCell(i[1],i[2],i[0],!0),this.buildHistory.pop()}resetBuild(){}selectBuildMode(i){this.buildMode!=i&&(this.buildMode=i,this.playAudio("audio5"))}toggleCell(i,r,s=this.buildMode,o=!1){if(1!=this.controlButton){var c=1;r>this.cols/2&&(c=-1),this.buildMaterial[s].forEach(d=>{var u=i+d[0],h=r+d[1]*c;this.gameGrid[u][h]=0===this.gameGrid[u][h]?1:0;var f=document.getElementById("game_"+u+"_"+h),_=Math.floor(40*Math.random()+16).toString(16),g=Math.floor(80*Math.random()+16).toString(16),I=Math.floor(100*Math.random()+16).toString(16);f.style.backgroundColor=h<this.cols/2?0===this.gameGrid[u][h]?"#1D2738":"#E7"+g+_:0===this.gameGrid[u][h]?"#1D2738":"#"+I+"B9"+g}),this.countLivingCells(this.gameGrid),0==o&&(this.playAudio("audio1"),this.buildHistory.push([s,i,r]))}}countLivingCells(i){let r=0,s=0;for(let o=0;o<this.rows;o++)for(let a=0;a<this.cols;a++)1===i[o][a]&&(a<this.cols/2?r++:s++);this.count1Display-r>20&&this.count2Display-s>20&&this.playAudio("audio3"),this.count1Display=r,this.count2Display=s}updateGrid(i){for(let d=0;d<this.rows;d++)for(let u=0;u<this.cols;u++){let h=document.getElementById("game_"+d+"_"+u);var r=Math.floor(40*Math.random()+16).toString(16),s=Math.floor(80*Math.random()+16).toString(16),o=Math.floor(100*Math.random()+16).toString(16);h.style.backgroundColor=u<this.cols/2?0===i[d][u]?"#1D2738":"#E7"+s+r:0===i[d][u]?"#1D2738":"#"+o+"B9"+s}}calculateNextGeneration(i){const r=this.createEmptyGrid(this.rows,this.cols);for(let s=0;s<this.rows;s++)for(let o=0;o<this.cols;o++){const a=i[s][o],c=this.countNeighbors(i,s,o);0===a&&3===c?(r[s][o]=1,o<this.cols/2?this.born2++:this.born1++):1===a&&(c<2||c>3)?(r[s][o]=0,o<this.cols/2?this.death2++:this.death1++):r[s][o]=a}return r}countNeighbors(i,r,s){let o=0;const a=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(let c=0;c<a.length;c++){const[d,u]=a[c];o+=i[(r+d+this.rows)%this.rows][(s+u+this.cols)%this.cols]}return o}runNextGeneration(){this.generationCount>=this.generationLimit?(this.pauseGame(),this.gameEnd()):(this.generationCount++,this.updateProgressBar(this.generationCount),this.gameGrid=this.calculateNextGeneration(this.gameGrid),this.updateGrid(this.gameGrid),this.countLivingCells(this.gameGrid))}gameEnd(){this.showResult=!0,this.updateScore(this.player1Name,this.count1Display,this.count2Display),this.updateScore(this.player2Name,this.count2Display,this.count1Display)}updateProgressBar(i){var s=i/(1*this.generationLimit)*20;document.getElementById("progress-bar-fill").style.width=s+"rem"}playGame(){this.generationCount>=this.generationLimit&&(this.generationLimit+=this.generationLimitUpgrade),clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.runNextGeneration()},100),this.playAudio("audio2"),this.buildHistory=[]}pauseGame(){clearInterval(this.intervalId)}resetGame(){this.pauseGame(),this.generationCount=0,this.generationLimit=this.generationLimitDefault,this.game1Active=!0,this.game2Active=!0,this.gameGrid=this.createEmptyGrid(this.rows,this.cols),this.updateGrid(this.gameGrid),this.buildHistory=[],this.born1=this.born2=this.death1=this.death2=0,this.showResult=!1}playAudio(i){const r=document.getElementById(i);r.volume=.2,r.play()}menuAction(i){if(1==i)this.menuButtonAudioIcon="pi pi-volume-up"==this.menuButtonAudioIcon?"pi pi-volume-off":"pi pi-volume-up";else if(2==i)this.gameEnd();else{if(3!=i)return;this.router.navigateByUrl("home")}}updateScore(i,r,s){const o=g0(jn());var c=0,d=0,u=0;r==s&&(d=1),r>s&&(c=1),r<s&&(u=1),ys(me(o,"users/"+i)).then(h=>{if(h.exists()){var f=h.val(),_=f.gameStat;_[0]+=1,_[1]+=c,_[2]+=d,_[3]+=u,this.writeFB(i,r>f.score?r:f.score,_)}else console.log("No data available"),this.writeFB(i,r,[1,c,d,u])}).catch(h=>{console.error(h)})}writeFB(i,r,s){zn(g0(this.fbDatabase,"users/"+i),{name:i,score:r,gameStat:s})}navToPage(){this.router.navigateByUrl("leader-board")}}return(n=t).\u0275fac=function(i){return new(i||n)(l.Y36(ye.F0),l.Y36(ti))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-game-board"]],decls:81,vars:34,consts:[[1,"main-container"],[1,"d-flex","justify-content-between","p-4"],[1,"title","text-uppercase"],[1,"title1"],[1,"title2"],[1,"d-flex","flex-column","align-items-center","pb-3"],[1,"controls"],[1,"d-flex","justify-content-center"],["pTooltip","Play","tooltipPosition","bottom",3,"click"],[1,"pi","pi-play"],["pTooltip","Pause","tooltipPosition","bottom",3,"click"],[1,"pi","pi-pause"],["pTooltip","Restart","tooltipPosition","bottom",3,"click"],[1,"pi","pi-replay"],["pTooltip","Sound","tooltipPosition","bottom",3,"click"],["pTooltip","Help","tooltipPosition","bottom",3,"click"],[1,"pi","pi-question-circle"],["pTooltip","Quit","tooltipPosition","bottom",3,"click"],[1,"pi","pi-sign-out"],[1,"game-container","m-3"],[1,"stat-container","pb-4"],[1,"d-flex","justify-content-around"],[1,"w-25","d-flex","flex-column"],["for","player1"],[1,"text-center","pb-3"],[1,"progress-container","d-flex"],["id","progress-bar-fill",1,"progress-bar-fill"],[1,"progress-bar-1x"],[1,"progress-label"],[1,"progress-bar-2x"],[1,"w-25","d-flex","flex-column","text-end"],["for","player2"],[1,""],[1,"m-auto"],[1,"d-flex"],[1,"tool-container-l","p-3"],["id","mdoe","tooltipPosition","right",3,"class","pTooltip","click",4,"ngFor","ngForOf"],["id","game",1,"game","d-flex","p-4"],[4,"ngFor","ngForOf"],["class","game-lock d-flex justify-content-center align-items-center",4,"ngIf"],[1,"p-1"],[1,"tool-container-r","p-3"],["id","mdoe","tooltipPosition","left",3,"class","pTooltip","click",4,"ngFor","ngForOf"],["class","result-container d-flex justify-content-center align-items-center",4,"ngIf"],["id","audio1","src","assets/mixkit-extra-bonus-in-a-video-game-2045.wav"],["id","audio2","src","assets/mixkit-drums-of-war-call-2780.wav"],["id","audio3","src","assets/mixkit-arcade-mechanical-bling-210.wav"],["id","audio4","src","assets/mixkit-winning-a-coin-video-game-2069.wav"],["id","audio5","src","assets/mixkit-game-ball-tap-2073.wav"],["id","audio0","src","assets/war theme.ogg"],["id","mdoe","tooltipPosition","right",3,"pTooltip","click"],[1,"cell-container"],["class","cell cell-l",3,"id","click",4,"ngFor","ngForOf"],[1,"cell","cell-l",3,"id","click"],[1,"game-lock","d-flex","justify-content-center","align-items-center"],[1,"pi","pi-lock","position-absolute"],["class","cell cell-r",3,"id","click",4,"ngFor","ngForOf"],[1,"cell","cell-r",3,"id","click"],["id","mdoe","tooltipPosition","left",3,"pTooltip","click"],[1,"result-container","d-flex","justify-content-center","align-items-center"],[1,"result-card","p-5"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"title","d-flex","flex-column","text-center","text-danger"],[4,"ngIf"],[1,"d-flex","result-details"],[1,"p-3","text-danger"],[1,"p-3"],[1,"m-5","result-card-seperator"],[1,"d-flex","pb-4"],[1,"result-card-button","p-4",3,"click"]],template:function(i,r){1&i&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),l._uU(4,"Cellular"),l.qZA(),l.TgZ(5,"span",4),l._uU(6,"Empire"),l.qZA()(),l.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),l.NdJ("click",function(){return r.playGame(),r.controlButton=1}),l._UZ(11,"i",9),l.qZA(),l.TgZ(12,"div",10),l.NdJ("click",function(){return r.pauseGame(),r.controlButton=2}),l._UZ(13,"i",11),l.qZA(),l.TgZ(14,"div",12),l.NdJ("click",function(){return r.resetGame(),r.controlButton=3}),l._UZ(15,"i",13),l.qZA(),l.TgZ(16,"div",14),l.NdJ("click",function(){return r.menuAction(1),r.controlButton=4}),l._UZ(17,"i"),l.qZA(),l.TgZ(18,"div",15),l.NdJ("click",function(){return r.menuAction(2),r.controlButton=5}),l._UZ(19,"i",16),l.qZA(),l.TgZ(20,"div",17),l.NdJ("click",function(){return r.menuAction(3),r.controlButton=6}),l._UZ(21,"i",18),l.qZA()()()()(),l.TgZ(22,"div",19)(23,"div",20)(24,"div",21)(25,"div",22)(26,"label",23),l._uU(27),l.qZA(),l.TgZ(28,"span"),l._uU(29),l.qZA(),l._UZ(30,"div"),l.qZA(),l.TgZ(31,"div")(32,"div")(33,"div",24),l._uU(34),l.qZA(),l.TgZ(35,"div")(36,"div",25),l._UZ(37,"span",26),l.TgZ(38,"span",27)(39,"span",28),l._uU(40,"1"),l.qZA()(),l.TgZ(41,"span",27)(42,"span",28),l._uU(43,"2"),l.qZA()(),l.TgZ(44,"span",27)(45,"span",28),l._uU(46,"3"),l.qZA()(),l.TgZ(47,"span",29)(48,"span",28),l._uU(49,"4"),l.qZA()()()()()(),l.TgZ(50,"div",30)(51,"label",31),l._uU(52),l.qZA(),l.TgZ(53,"span"),l._uU(54),l.qZA(),l._UZ(55,"div",32),l.qZA()()(),l.TgZ(56,"div",33)(57,"div",34)(58,"div",35),l.YNc(59,$d,2,7,"div",36),l._UZ(60,"hr"),l.YNc(61,Qd,2,8,"div",36),l.qZA(),l.TgZ(62,"div",37)(63,"div")(64,"div"),l.YNc(65,Jd,3,1,"div",38),l.qZA(),l.YNc(66,Xd,2,0,"div",39),l.qZA(),l._UZ(67,"div",40),l.TgZ(68,"div")(69,"div"),l.YNc(70,tu,3,1,"div",38),l.qZA(),l.YNc(71,nu,3,1,"div",39),l.qZA()(),l.TgZ(72,"div",41),l.YNc(73,iu,2,7,"div",42),l.qZA()()()()(),l.YNc(74,lu,58,11,"div",43),l._UZ(75,"audio",44)(76,"audio",45)(77,"audio",46)(78,"audio",47)(79,"audio",48)(80,"audio",49)),2&i&&(l.xp6(10),l.Gre("control-button control-button-",1==r.controlButton,""),l.xp6(2),l.Gre("control-button control-button-",2==r.controlButton,""),l.xp6(2),l.Gre("control-button control-button-",3==r.controlButton,""),l.xp6(2),l.Gre("control-button control-button-",4==r.controlButton,""),l.xp6(1),l.Tol(r.menuButtonAudioIcon),l.xp6(1),l.Gre("control-button control-button-",5==r.controlButton,""),l.xp6(2),l.Gre("control-button control-button-",6==r.controlButton,""),l.xp6(7),l.Oqu(r.player1Name),l.xp6(2),l.hij("Population: ",r.count1Display,""),l.xp6(5),l.hij(" Generataions: ",r.generationCount," "),l.xp6(18),l.Oqu(r.player2Name),l.xp6(2),l.hij("Population: ",r.count2Display,""),l.xp6(5),l.Q6J("ngForOf",r.buildMaterialName),l.xp6(2),l.Q6J("ngForOf",r.actionTool),l.xp6(4),l.Q6J("ngForOf",r.counter(r.rows)),l.xp6(1),l.Q6J("ngIf",r.player1Lock&&1!=r.controlButton),l.xp6(4),l.Q6J("ngForOf",r.counter(r.rows)),l.xp6(1),l.Q6J("ngIf",r.player2Lock&&1!=r.controlButton),l.xp6(2),l.Q6J("ngForOf",r.buildMaterialName),l.xp6(1),l.Q6J("ngIf",r.showResult))},dependencies:[H.sg,H.O5,jd],styles:[".cell-container[_ngcontent-%COMP%]{display:flex}.cell[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:5px;border:1px solid #121b29;animation-duration:1s;cursor:pointer;background-color:#1d2738}.cell-l[_ngcontent-%COMP%]:hover{background-color:#e73e3988}.cell-r[_ngcontent-%COMP%]:hover{background-color:#4cb93188}.title[_ngcontent-%COMP%]{font-size:1.5rem}.title1[_ngcontent-%COMP%]{color:#e1113b}.title2[_ngcontent-%COMP%]{color:#fff}.menu-button[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{background:#E1113B!important}.game-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.game-lock[_ngcontent-%COMP%]{height:100%;width:100%;background:rgba(0,0,0,.3333333333);position:relative;z-index:1;top:-100%;border-radius:5px;color:#fff}.control-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:0 1rem;width:60px;height:60px;border-radius:50%;color:#f0f8ff;box-shadow:-3px -3px 4px #171e2c,3px 3px 5px 2px #000000d6,inset 0 0 #000,inset 0 0 #171e2c;transition:box-shadow .3s ease-in}.control-button[_ngcontent-%COMP%]:hover{box-shadow:0 0 #171e2c,0 0 #000000d6,inset 5px 5px 2px #000,inset -1px -1px 4px 1px #171e2c}.stat-container[_ngcontent-%COMP%]{color:#f5f5f5}.progress-container[_ngcontent-%COMP%]{width:20rem;height:1.5rem;background-color:#1d2738;border-radius:.3rem;overflow:hidden}.progress-bar-fill[_ngcontent-%COMP%]{height:1.5rem;width:.3rem;background-color:#e1113b;border-radius:.3rem;position:absolute;z-index:0}.progress-bar-1x[_ngcontent-%COMP%]{width:4rem;z-index:1;text-align:end}.progress-bar-2x[_ngcontent-%COMP%]{width:8rem;z-index:1;text-align:end}.progress-label[_ngcontent-%COMP%]{height:1rem;width:1rem;padding:3px;border:1px solid white;border-radius:.3rem}.game[_ngcontent-%COMP%]{background-color:#121b29}.tool-container-l[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#1d2738;border-radius:10px 0 0 10px}.tool-container-r[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#1d2738;border-radius:0 10px 10px 0}.tool-l[_ngcontent-%COMP%], .tool-r[_ngcontent-%COMP%]{height:50px;width:50px;color:#f0f8ff;border-radius:10px}.tool-l-disable-true[_ngcontent-%COMP%]{color:#384a65;cursor:not-allowed}.tool-l-true[_ngcontent-%COMP%]{color:#e73e39;box-shadow:inset 3px 3px 6px #0000004f,inset -4px -3px 4px -5px #6666}.tool-r-true[_ngcontent-%COMP%]{color:#4cb931;box-shadow:inset 3px 3px 6px #0000004f,inset -4px -3px 4px -5px #6666}.tool-l[_ngcontent-%COMP%]:hover{color:#e73e39}.tool-r[_ngcontent-%COMP%]:hover{color:#4cb931}.hover-pointer[_ngcontent-%COMP%]{position:absolute;width:45px;height:45px;border-radius:5px;border:1px solid rgba(130,130,130,.4509803922);cursor:pointer;z-index:0}.result-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;z-index:10;top:0;background-color:#000a}.result-card[_ngcontent-%COMP%]{width:60vw;height:60vh;background-color:#121b29;border-radius:10px;color:#fff}.title[_ngcontent-%COMP%]{font-size:3rem}.result-details[_ngcontent-%COMP%]{color:#384a65}.result-card-button[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s}.result-card-button[_ngcontent-%COMP%]:hover{scale:1.1}.result-card-seperator[_ngcontent-%COMP%]{border:2px solid #384A65;height:8rem}.rotate-45[_ngcontent-%COMP%]{transform:rotate(45deg)}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-135[_ngcontent-%COMP%]{transform:rotate(135deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-225[_ngcontent-%COMP%]{transform:rotate(225deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-315[_ngcontent-%COMP%]{transform:rotate(315deg)}"]}),t})();function du(n,t){if(1&n&&(l.TgZ(0,"tr",11)(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.qZA(),l.TgZ(9,"td"),l._uU(10),l.qZA(),l.TgZ(11,"td"),l._uU(12),l.qZA(),l.TgZ(13,"td"),l._uU(14),l.qZA()()),2&n){const e=t.$implicit,i=t.index;l.xp6(2),l.Oqu(i+1),l.xp6(2),l.Oqu(e[0]),l.xp6(2),l.Oqu(e[1]),l.xp6(2),l.Oqu(e[2][0]),l.xp6(2),l.Oqu(e[2][1]),l.xp6(2),l.Oqu(e[2][2]),l.xp6(2),l.Oqu(e[2][3])}}const uu=[{path:"",pathMatch:"full",redirectTo:"home"},{path:"home",component:Fs},{path:"landing",component:(()=>{var n;class t{}return(n=t).\u0275fac=function(i){return new(i||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-landing"]],decls:2,vars:0,template:function(i,r){1&i&&(l.TgZ(0,"p"),l._uU(1,"landing works!"),l.qZA())}}),t})()},{path:"game",component:au},{path:"leader-board",component:(()=>{var n;class t{constructor(i){this.router=i,this.playersList={},this.scores=[]}ngOnInit(){this.initializeFB(),this.getScores()}initializeFB(){D0({databaseURL:"https://game-of-life-ce-default-rtdb.europe-west1.firebasedatabase.app"})}getScores(){ys(me(g0(jn()),"users")).then(r=>{r.exists()?(this.playersList=r.val(),this.sortScores()):console.log("No data available")}).catch(r=>{console.error(r)})}sortScores(){var i=[];for(let r in this.playersList)i.push([this.playersList[r].name,this.playersList[r].score,this.playersList[r].gameStat]);i.sort(function(r,s){return s[1]-r[1]}),this.scores=i}navToPage(){this.router.navigateByUrl("home")}}return(n=t).\u0275fac=function(i){return new(i||n)(l.Y36(ye.F0))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-leader-board"]],decls:31,vars:1,consts:[[1,"main-container"],[1,"title","text-uppercase","text-center","pt-5"],[1,"title1"],[1,"title2"],[1,"title","text-uppercase","text-center","pt-3","pb-4"],[1,"title3"],[1,"text-center","pt-3","pb-4"],[1,"back-button","text-light",3,"click"],[1,"list-container","d-flex","justify-content-center","p-5"],[1,"text-center"],["class","m-2 text-center",4,"ngFor","ngForOf"],[1,"m-2","text-center"]],template:function(i,r){1&i&&(l.TgZ(0,"div",0)(1,"div",1)(2,"span",2),l._uU(3,"Cellular"),l.qZA(),l.TgZ(4,"span",3),l._uU(5,"Empire"),l.qZA()(),l.TgZ(6,"div",4)(7,"span",5),l._uU(8,"Leader Board"),l.qZA()(),l.TgZ(9,"div",6)(10,"span",7),l.NdJ("click",function(){return r.navToPage()}),l._uU(11,"Back to Main Menu"),l.qZA()(),l.TgZ(12,"div",8)(13,"table")(14,"thead",9)(15,"th"),l._uU(16,"Rank"),l.qZA(),l.TgZ(17,"th"),l._uU(18,"Name"),l.qZA(),l.TgZ(19,"th"),l._uU(20,"High Score"),l.qZA(),l.TgZ(21,"th"),l._uU(22,"Games Played"),l.qZA(),l.TgZ(23,"th"),l._uU(24,"Win"),l.qZA(),l.TgZ(25,"th"),l._uU(26,"Draw"),l.qZA(),l.TgZ(27,"th"),l._uU(28,"Lose"),l.qZA()(),l.TgZ(29,"tbody"),l.YNc(30,du,15,7,"tr",10),l.qZA()()()()),2&i&&(l.xp6(30),l.Q6J("ngForOf",r.scores))},dependencies:[H.sg],styles:[".main-containr[_ngcontent-%COMP%]{color:#fff!important}.title[_ngcontent-%COMP%]{font-size:2rem}.title3[_ngcontent-%COMP%]{color:#384a65}.list-container[_ngcontent-%COMP%]{width:100%}.list-item[_ngcontent-%COMP%]{height:3rem;width:80rem}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:1.5rem 4rem;color:#fff!important}tr[_ngcontent-%COMP%]{background:#1D2738;border:8px solid #081120;border-radius:10px!important}.back-button[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s;scale:1.1}.back-button[_ngcontent-%COMP%]:hover{scale:1.2}"]}),t})()}];let hu=(()=>{var n;class t{}return(n=t).\u0275fac=function(i){return new(i||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[ye.Bz.forChild(uu),ye.Bz]}),t})(),pu=(()=>{var n;class t{}return n=t,p(t,"\u0275fac",function(i){return new(i||n)}),p(t,"\u0275mod",l.oAB({type:n})),p(t,"\u0275inj",l.cJS({imports:[H.ez]})),t})();const _u=["*"];let ws=(()=>{var n;class t{constructor(){p(this,"label",void 0),p(this,"spin",!1),p(this,"styleClass",void 0),p(this,"role",void 0),p(this,"ariaLabel",void 0),p(this,"ariaHidden",void 0)}ngOnInit(){this.getAttributes()}getAttributes(){const i=$n.isEmpty(this.label);this.role=i?void 0:"img",this.ariaLabel=i?void 0:this.label,this.ariaHidden=i}getClassNames(){return`p-icon ${this.styleClass?this.styleClass+" ":""}${this.spin?"p-icon-spin":""}`}}return n=t,p(t,"\u0275fac",function(i){return new(i||n)}),p(t,"\u0275cmp",l.Xpm({type:n,selectors:[["ng-component"]],hostAttrs:[1,"p-element","p-icon-wrapper"],inputs:{label:"label",spin:"spin",styleClass:"styleClass"},standalone:!0,features:[l.jDz],ngContentSelectors:_u,decls:1,vars:0,template:function(i,r){1&i&&(l.F$t(),l.Hsn(0))},encapsulation:2,changeDetection:0})),t})(),mu=(()=>{var n;class t extends ws{constructor(...i){super(...i),p(this,"pathId",void 0)}ngOnInit(){this.pathId="url(#"+Ts()+")"}}return n=t,p(t,"\u0275fac",function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}()),p(t,"\u0275cmp",l.Xpm({type:n,selectors:[["SpinnerIcon"]],standalone:!0,features:[l.qOj,l.jDz],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){1&i&&(l.O4$(),l.TgZ(0,"svg",0)(1,"g"),l._UZ(2,"path",1),l.qZA(),l.TgZ(3,"defs")(4,"clipPath",2),l._UZ(5,"rect",3),l.qZA()()()),2&i&&(l.Tol(r.getClassNames()),l.uIk("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),l.xp6(1),l.uIk("clip-path",r.pathId),l.xp6(3),l.Q6J("id",r.pathId))},encapsulation:2})),t})(),xs=(()=>{var n;class t{}return n=t,p(t,"\u0275fac",function(i){return new(i||n)}),p(t,"\u0275mod",l.oAB({type:n})),p(t,"\u0275inj",l.cJS({imports:[H.ez]})),t})(),Ss=(()=>{var n;class t{}return n=t,p(t,"\u0275fac",function(i){return new(i||n)}),p(t,"\u0275mod",l.oAB({type:n})),p(t,"\u0275inj",l.cJS({imports:[H.ez,xs,Yn,mu,Yn]})),t})(),xu=(()=>{var n;class t extends ws{constructor(...i){super(...i),p(this,"pathId",void 0)}ngOnInit(){this.pathId="url(#"+Ts()+")"}}return n=t,p(t,"\u0275fac",function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}()),p(t,"\u0275cmp",l.Xpm({type:n,selectors:[["PlusIcon"]],standalone:!0,features:[l.qOj,l.jDz],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.67742 6.32258V0.677419C7.67742 0.497757 7.60605 0.325452 7.47901 0.198411C7.35197 0.0713707 7.17966 0 7 0C6.82034 0 6.64803 0.0713707 6.52099 0.198411C6.39395 0.325452 6.32258 0.497757 6.32258 0.677419V6.32258H0.677419C0.497757 6.32258 0.325452 6.39395 0.198411 6.52099C0.0713707 6.64803 0 6.82034 0 7C0 7.17966 0.0713707 7.35197 0.198411 7.47901C0.325452 7.60605 0.497757 7.67742 0.677419 7.67742H6.32258V13.3226C6.32492 13.5015 6.39704 13.6725 6.52358 13.799C6.65012 13.9255 6.82106 13.9977 7 14C7.17966 14 7.35197 13.9286 7.47901 13.8016C7.60605 13.6745 7.67742 13.5022 7.67742 13.3226V7.67742H13.3226C13.5022 7.67742 13.6745 7.60605 13.8016 7.47901C13.9286 7.35197 14 7.17966 14 7C13.9977 6.82106 13.9255 6.65012 13.799 6.52358C13.6725 6.39704 13.5015 6.32492 13.3226 6.32258H7.67742Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){1&i&&(l.O4$(),l.TgZ(0,"svg",0)(1,"g"),l._UZ(2,"path",1),l.qZA(),l.TgZ(3,"defs")(4,"clipPath",2),l._UZ(5,"rect",3),l.qZA()()()),2&i&&(l.Tol(r.getClassNames()),l.uIk("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),l.xp6(1),l.uIk("clip-path",r.pathId),l.xp6(3),l.Q6J("id",r.pathId))},encapsulation:2})),t})(),Mu=(()=>{var n;class t{}return n=t,p(t,"\u0275fac",function(i){return new(i||n)}),p(t,"\u0275mod",l.oAB({type:n})),p(t,"\u0275inj",l.cJS({imports:[H.ez,Ss,xs,Jn,ye.Bz,xu,Yn,Ss,Jn,ye.Bz]})),t})(),Fu=(()=>{var n;class t{}return(n=t).\u0275fac=function(i){return new(i||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[H.ez,hu,As,Jn,pu,Mu]}),t})()}}]);