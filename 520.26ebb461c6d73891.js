"use strict";(self.webpackChunkcellular_empire=self.webpackChunkcellular_empire||[]).push([[520],{3520:(ec,li,H)=>{H.r(li),H.d(li,{HomeModule:()=>$a});var q=H(6814),I0=H(95),r=H(5879);let pr=(()=>{var n;class t{}return(n=t).\u0275fac=function(i){return new(i||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[q.ez,I0.u5,I0.UX]}),t})();var E0=H(8076),fr=H(5861),Y=H(4303),_r=H(4537),p=H(9058),ai=H(7879);const ci="@firebase/database";let ze="";class mr{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,p.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,p.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class gr{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,p.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const hi=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new mr(t)}}catch{}return new gr},_0=hi("localStorage"),je=hi("sessionStorage"),b0=new ai.Yd("@firebase/database"),pi=function(){let n=1;return function(){return n++}}(),fi=function(n){const t=(0,p.dS)(n),e=new p.gQ;e.update(t);const i=e.digest();return p.US.encodeByteArray(i)},Z0=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=Z0.apply(null,i):t+="object"==typeof i?(0,p.Wl)(i):i,t+=" "}return t};let m0=null,_i=!0;const M=function(...n){if(!0===_i&&(_i=!1,null===m0&&!0===je.get("logging_enabled")&&function(n,t){(0,p.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(b0.logLevel=ai.in.VERBOSE,m0=b0.log.bind(b0),t&&je.set("logging_enabled",!0)):"function"==typeof n?m0=n:(m0=null,je.remove("logging_enabled"))}(!0)),m0){const t=Z0.apply(null,n);m0(t)}},B0=function(n){return function(...t){M(n,...t)}},$e=function(...n){const t="FIREBASE INTERNAL ERROR: "+Z0(...n);b0.error(t)},J=function(...n){const t=`FIREBASE FATAL ERROR: ${Z0(...n)}`;throw b0.error(t),new Error(t)},R=function(...n){const t="FIREBASE WARNING: "+Z0(...n);b0.warn(t)},pe=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},r0="[MIN_NAME]",t0="[MAX_NAME]",g0=function(n,t){if(n===t)return 0;if(n===r0||t===t0)return-1;if(t===r0||n===t0)return 1;{const e=vi(n),i=vi(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},Cr=function(n,t){return n===t?0:n<t?-1:1},H0=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,p.Wl)(t))},Xe=function(n){if("object"!=typeof n||null===n)return(0,p.Wl)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,p.Wl)(t[i]),e+=":",e+=Xe(n[t[i]]);return e+="}",e},gi=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let o=0;o<e;o+=t)i.push(n.substring(o,o+t>e?e:o+t));return i};function k(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const yi=function(n){(0,p.hu)(!pe(n),"Invalid JSON number");const i=1023;let o,s,l,a,c;0===n?(s=0,l=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,l=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const d=[];for(c=52;c;c-=1)d.push(l%2?1:0),l=Math.floor(l/2);for(c=11;c;c-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(o?1:0),d.reverse();const u=d.join("");let h="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);1===f.length&&(f="0"+f),h+=f}return h.toLowerCase()},wr=new RegExp("^-?(0*)\\d{1,10}$"),vi=function(n){if(wr.test(n)){const t=Number(n);if(t>=-2147483648&&t<=2147483647)return t}return null},S0=function(n){try{n()}catch(t){setTimeout(()=>{throw R("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},q0=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class Sr{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){R(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Or{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(o=>this.auth_=o)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(M("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',R(t)}}let W0=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const wi=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,bi="websocket",Si="long_polling";class tt{constructor(t,e,i,o,s=!1,l="",a=!1,c=!1){this.secure=e,this.namespace=i,this.webSocketOnly=o,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_0.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&_0.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Oi(n,t,e){let i;if((0,p.hu)("string"==typeof t,"typeof type must == string"),(0,p.hu)("object"==typeof e,"typeof params must == object"),t===bi)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==Si)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Ar(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const o=[];return k(e,(s,l)=>{o.push(s+"="+l)}),i+o.join("&")}class Nr{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,p.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,p.p$)(this.counters_)}}const it={},nt={};function rt(n){const t=n.toString();return it[t]||(it[t]=new Nr),it[t]}class kr{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<i.length;++o)i[o]&&S0(()=>{this.onMessage_(i[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class o0{constructor(t,e,i,o,s,l,a){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.transportSessionId=l,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=B0(t),this.stats_=rt(e),this.urlFn=c=>(this.appCheckToken&&(c.ac=this.appCheckToken),Oi(e,Si,c))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new kr(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,p.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ot((...s)=>{const[l,a,c,d,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=a,this.password=c;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,a)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&wi.test(location.hostname)&&(i.r="f");const o=this.urlFn(i);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){o0.forceAllow_=!0}static forceDisallow(){o0.forceDisallow_=!0}static isAvailable(){return!((0,p.Yr)()||!o0.forceAllow_&&(o0.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,p.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,p.h$)(e),o=gi(i,1840);for(let s=0;s<o.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,p.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,p.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class ot{constructor(t,e,i,o){if(this.onDisconnect=i,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,p.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=pi(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=ot.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(a){M("frame writing exception"),a.stack&&M(a.stack),M(a)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||M("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const l=this.pendingSegs.shift();i=i+"&seg"+o+"="+l.seg+"&ts"+o+"="+l.ts+"&d"+o+"="+l.d,o++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},o=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(o),i()})}addTag(t,e){(0,p.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const o=i.readyState;(!o||"loaded"===o||"complete"===o)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{M("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let _e=null;typeof MozWebSocket<"u"?_e=MozWebSocket:typeof WebSocket<"u"&&(_e=WebSocket);let O0=(()=>{class n{constructor(e,i,o,s,l,a,c){this.connId=e,this.applicationId=o,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=B0(this.connId),this.stats_=rt(i),this.connURL=n.connectionURL_(i,a,c,s,o),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,o,s,l){const a={v:"5"};return!(0,p.Yr)()&&typeof location<"u"&&location.hostname&&wi.test(location.hostname)&&(a.r="f"),i&&(a.s=i),o&&(a.ls=o),s&&(a.ac=s),l&&(a.p=l),Oi(e,bi,a)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_0.set("previous_websocket_failure",!0);try{let o;if((0,p.Yr)()){o={headers:{"User-Agent":`Firebase/5/${ze}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(o.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(o.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,a=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;a&&(o.proxy={origin:a})}this.mySock=new _e(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const s=o.message||o.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const s=o.message||o.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(e=!0)}return!e&&null!==_e&&!n.forceDisallow_}static previouslyFailed(){return _0.isInMemoryStorage||!0===_0.get("previous_websocket_failure")}markConnectionHealthy(){_0.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const o=(0,p.cI)(i);this.onMessage(o)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,p.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const o=this.extractFrameCount_(i);null!==o&&this.appendFrame_(o)}}send(e){this.resetKeepAlive();const i=(0,p.Wl)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const o=gi(i,16384);o.length>1&&this.sendString_(String(o.length));for(let s=0;s<o.length;s++)this.sendString_(o[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Di=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[o0,O0]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=O0&&O0.isAvailable();let o=i&&!O0.previouslyFailed();if(e.webSocketOnly&&(i||R("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[O0];else{const s=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class qi{constructor(t,e,i,o,s,l,a,c,d,u){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=o,this.authToken_=s,this.onMessage_=l,this.onReady_=a,this.onDisconnect_=c,this.onKill_=d,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=B0("c:"+this.id+":"),this.transportManager_=new Di(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=q0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=H0("t",t),i=H0("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=H0("t",t),i=H0("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=H0("t",t);if("d"in t){const i=t.d;if("h"===e){const o=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?$e("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$e("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,o=t.h;this.sessionId=t.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&R("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),q0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):q0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_0.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Wi{put(t,e,i,o){}merge(t,e,i,o){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class Ki{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,p.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let o=0;o<i.length;o++)i[o].callback.apply(i[o].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const o=this.getInitialEvent(t);o&&e.apply(i,o)}off(t,e,i){this.validateEventType_(t);const o=this.listeners_[t]||[];for(let s=0;s<o.length;s++)if(o[s].callback===e&&(!i||i===o[s].context))return void o.splice(s,1)}validateEventType_(t){(0,p.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class me extends Ki{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,p.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new me}getInitialEvent(t){return(0,p.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class w{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[i]=this.pieces_[o],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function x(){return new w("")}function v(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function s0(n){return n.pieces_.length-n.pieceNum_}function E(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new w(n.pieces_,t)}function lt(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function K0(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function Yi(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new w(t,0)}function O(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof w)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let o=0;o<i.length;o++)i[o].length>0&&e.push(i[o])}return new w(e,0)}function C(n){return n.pieceNum_>=n.pieces_.length}function D(n,t){const e=v(n),i=v(t);if(null===e)return t;if(e===i)return D(E(n),E(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function at(n,t){if(s0(n)!==s0(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function W(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(s0(n)>s0(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class io{constructor(t,e){this.errorPrefix_=e,this.parts_=K0(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,p.ug)(this.parts_[i]);Ji(this)}}function Ji(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+y0(n))}function y0(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class ct extends Ki{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new ct}getInitialEvent(t){return(0,p.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const V0=1e3;let ye,v0=(()=>{class n extends Wi{constructor(e,i,o,s,l,a,c,d){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=o,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=d,this.id=n.nextPersistentConnectionId_++,this.log_=B0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=V0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d&&!(0,p.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ct.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&me.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,o){const s=++this.requestNumber_,l={r:s,a:e,b:i};this.log_((0,p.Wl)(l)),(0,p.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),o&&(this.requestCBHash_[s]=o)}get(e){this.initConnection_();const i=new p.BH,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const c=a.d;"ok"===a.s?i.resolve(c):i.reject(c)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,o,s){this.initConnection_();const l=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+l),this.listens.has(a)||this.listens.set(a,new Map),(0,p.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,p.hu)(!this.listens.get(a).has(l),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:i,query:e,tag:o};this.listens.get(a).set(l,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,o=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(o)})}sendListen_(e){const i=e.query,o=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+o+" for "+s);const l={p:o};e.tag&&(l.q=i._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest("q",l,c=>{const d=c.d,u=c.s;n.warnOnListenWarnings_(d,i),(this.listens.get(o)&&this.listens.get(o).get(s))===e&&(this.log_("listen response",c),"ok"!==u&&this.removeListen_(o,s),e.onComplete&&e.onComplete(u,d))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,p.r3)(e,"w")){const o=(0,p.DV)(e,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',l=i._path.toString();R(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,p.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,p.w9)(e)?"auth":"gauth",o={cred:e};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(i,o,s=>{const l=s.s,a=s.d||"error";this.authToken_===e&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,o=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,o)})}unlisten(e,i){const o=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+o+" "+s),(0,p.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,s)&&this.connected_&&this.sendUnlisten_(o,s,e._queryObject,i)}sendUnlisten_(e,i,o,s){this.log_("Unlisten on "+e+" for "+i);const l={p:e};s&&(l.q=o,l.t=s),this.sendRequest("n",l)}onDisconnectPut(e,i,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:o})}onDisconnectMerge(e,i,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:o})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,o,s){const l={p:i,d:o};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(e,i,o,s){this.putInternal("p",e,i,o,s)}merge(e,i,o,s){this.putInternal("m",e,i,o,s)}putInternal(e,i,o,s,l){this.initConnection_();const a={p:i,d:o};void 0!==l&&(a.h=l),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,o=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,o,l=>{this.log_(i+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,p.Wl)(e));const i=e.r,o=this.requestCBHash_[i];o&&(delete this.requestCBHash_[i],o(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):$e("Unrecognized action received from server: "+(0,p.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,p.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=V0,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=V0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=V0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,fr.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),o=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),l=e.id+":"+n.nextConnectionId_++,a=e.lastSessionId;let c=!1,d=null;const u=function(){d?d.close():(c=!0,s())};e.realtime_={close:u,sendRequest:function(_){(0,p.hu)(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(_)}};const f=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[_,g]=yield Promise.all([e.authTokenProvider_.getToken(f),e.appCheckTokenProvider_.getToken(f)]);c?M("getToken() completed but was canceled"):(M("getToken() completed. Creating connection."),e.authToken_=_&&_.accessToken,e.appCheckToken_=g&&g.token,d=new qi(l,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,o,s,P=>{R(P+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},a))}catch(_){e.log_("Failed to get token: "+_),c||(e.repoInfo_.nodeAdmin&&R(_),u())}}})()}interrupt(e){M("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){M("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,p.xb)(this.interruptReasons_)&&(this.reconnectDelay_=V0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let o;o=i?i.map(l=>Xe(l)).join("$"):"default";const s=this.removeListen_(e,o);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const o=new w(e).toString();let s;if(this.listens.has(o)){const l=this.listens.get(o);s=l.get(i),l.delete(i),0===l.size&&this.listens.delete(o)}else s=void 0;return s}onAuthRevoked_(e,i){M("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){M("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,p.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+ze.replace(/\./g,"-")]=1,(0,p.uI)()?e["framework.cordova"]=1:(0,p.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=me.getInstance().currentlyOnline();return(0,p.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class T{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new T(t,e)}}class ge{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new T(r0,t),o=new T(r0,e);return 0!==this.compare(i,o)}minPost(){return T.MIN}}class $i extends ge{static get __EMPTY_NODE(){return ye}static set __EMPTY_NODE(t){ye=t}compare(t,e){return g0(t.name,e.name)}isDefinedOn(t){throw(0,p.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return T.MIN}maxPost(){return new T(t0,ye)}makePost(t,e){return(0,p.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new T(t,ye)}toString(){return".key"}}const z=new $i;class ve{constructor(t,e,i,o,s=null){this.isReverse_=o,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!t.isEmpty();)if(l=e?i(t.key,e):1,o&&(l*=-1),l<0)t=this.isReverse_?t.left:t.right;else{if(0===l){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let ut,K=(()=>{class n{constructor(e,i,o,s,l){this.key=e,this.value=i,this.color=o??n.RED,this.left=s??G.EMPTY_NODE,this.right=l??G.EMPTY_NODE}copy(e,i,o,s,l){return new n(e??this.key,i??this.value,o??this.color,s??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,o){let s=this;const l=o(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,i,o),null):0===l?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,o)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return G.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let o,s;if(o=this,i(e,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(e,i),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===i(e,o.key)){if(o.right.isEmpty())return G.EMPTY_NODE;s=o.right.min_(),o=o.copy(s.key,s.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(e,i))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class G{constructor(t,e=G.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new G(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,K.BLACK,null,null))}remove(t){return new G(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,K.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,o=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return o?o.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(o=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new ve(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new ve(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new ve(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new ve(this.root_,null,this.comparator_,!0,t)}}function uo(n,t){return g0(n.name,t.name)}function dt(n,t){return g0(n,t)}G.EMPTY_NODE=new class co{copy(t,e,i,o,s){return this}insert(t,e,i){return new K(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Xi=function(n){return"number"==typeof n?"number:"+yi(n):"string:"+n},en=function(n){if(n.isLeafNode()){const t=n.val();(0,p.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,p.r3)(t,".sv"),"Priority must be a string or number.")}else(0,p.hu)(n===ut||n.isEmpty(),"priority of unexpected type.");(0,p.hu)(n===ut||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let tn,nn,rn,A0=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,p.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),en(this.priorityNode_)}static set __childrenNodeConstructor(e){tn=e}static get __childrenNodeConstructor(){return tn}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return C(e)?this:".priority"===v(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const o=v(e);return null===o?i:i.isEmpty()&&".priority"!==o?this:((0,p.hu)(".priority"!==o||1===s0(e),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(E(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Xi(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?yi(this.value_):this.value_,this.lazyHash_=fi(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,p.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,o=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),l=n.VALUE_TYPE_ORDER.indexOf(o);return(0,p.hu)(s>=0,"Unknown leaf type: "+i),(0,p.hu)(l>=0,"Unknown leaf type: "+o),s===l?"object"===o?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&(this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const b=new class _o extends ge{compare(t,e){const i=t.node.getPriority(),o=e.node.getPriority(),s=i.compareTo(o);return 0===s?g0(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return T.MIN}maxPost(){return new T(t0,new A0("[PRIORITY-POST]",rn))}makePost(t,e){const i=nn(t);return new T(e,new A0("[PRIORITY-POST]",i))}toString(){return".priority"}},mo=Math.log(2);class go{constructor(t){this.count=parseInt(Math.log(t+1)/mo,10),this.current_=this.count-1;const o=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&o}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Ce=function(n,t,e,i){n.sort(t);const o=function(c,d){const u=d-c;let h,f;if(0===u)return null;if(1===u)return h=n[c],f=e?e(h):h,new K(f,h.node,K.BLACK,null,null);{const _=parseInt(u/2,10)+c,g=o(c,_),P=o(_+1,d);return h=n[_],f=e?e(h):h,new K(f,h.node,K.BLACK,g,P)}},a=function(c){let d=null,u=null,h=n.length;const f=function(g,P){const N=h-g,F=h;h-=g;const Je=o(N+1,F),si=n[N],Xa=e?e(si):si;_(new K(Xa,si.node,P,null,Je))},_=function(g){d?(d.left=g,d=g):(u=g,d=g)};for(let g=0;g<c.count;++g){const P=c.nextBitIsOne(),N=Math.pow(2,c.count-(g+1));P?f(N,K.BLACK):(f(N,K.BLACK),f(N,K.RED))}return u}(new go(n.length));return new G(i||t,a)};let ht;const N0={};class n0{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,p.hu)(N0&&b,"ChildrenNode.ts has not been loaded"),ht=ht||new n0({".priority":N0},{".priority":b}),ht}get(t){const e=(0,p.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof G?e:null}hasIndex(t){return(0,p.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,p.hu)(t!==z,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let o=!1;const s=e.getIterator(T.Wrap);let a,l=s.getNext();for(;l;)o=o||t.isDefinedOn(l.node),i.push(l),l=s.getNext();a=o?Ce(i,t.getCompare()):N0;const c=t.toString(),d=Object.assign({},this.indexSet_);d[c]=t;const u=Object.assign({},this.indexes_);return u[c]=a,new n0(u,d)}addToIndexes(t,e){const i=(0,p.UI)(this.indexes_,(o,s)=>{const l=(0,p.DV)(this.indexSet_,s);if((0,p.hu)(l,"Missing index implementation for "+s),o===N0){if(l.isDefinedOn(t.node)){const a=[],c=e.getIterator(T.Wrap);let d=c.getNext();for(;d;)d.name!==t.name&&a.push(d),d=c.getNext();return a.push(t),Ce(a,l.getCompare())}return N0}{const a=e.get(t.name);let c=o;return a&&(c=c.remove(new T(t.name,a))),c.insert(t,t.node)}});return new n0(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,p.UI)(this.indexes_,o=>{if(o===N0)return o;{const s=e.get(t.name);return s?o.remove(new T(t.name,s)):o}});return new n0(i,this.indexSet_)}}let Q0,y=(()=>{class n{constructor(e,i,o){this.children_=e,this.priorityNode_=i,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&en(this.priorityNode_),this.children_.isEmpty()&&(0,p.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Q0||(Q0=new n(new G(dt),null,n0.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Q0}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?Q0:i}}getChild(e){const i=v(e);return null===i?this:this.getImmediateChild(i).getChild(E(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,p.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const o=new T(e,i);let s,l;i.isEmpty()?(s=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(o,this.children_)):(s=this.children_.insert(e,i),l=this.indexMap_.addToIndexes(o,this.children_));const a=s.isEmpty()?Q0:this.priorityNode_;return new n(s,a,l)}}updateChild(e,i){const o=v(e);if(null===o)return i;{(0,p.hu)(".priority"!==v(e)||1===s0(e),".priority must be the last token in a path");const s=this.getImmediateChild(o).updateChild(E(e),i);return this.updateImmediateChild(o,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let o=0,s=0,l=!0;if(this.forEachChild(b,(a,c)=>{i[a]=c.val(e),o++,l&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):l=!1}),!e&&l&&s<2*o){const a=[];for(const c in i)a[c]=i[c];return a}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Xi(this.getPriority().val())+":"),this.forEachChild(b,(i,o)=>{const s=o.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":fi(e)}return this.lazyHash_}getPredecessorChildName(e,i,o){const s=this.resolveIndex_(o);if(s){const l=s.getPredecessorKey(new T(e,i));return l?l.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const o=i.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new T(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const o=i.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new T(i,this.children_.get(i)):null}forEachChild(e,i){const o=this.resolveIndex_(e);return o?o.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const o=this.resolveIndex_(i);if(o)return o.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,T.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,e)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const o=this.resolveIndex_(i);if(o)return o.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,T.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,e)>0;)s.getNext(),l=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Y0?-1:0}withIndex(e){if(e===z||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===z||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const o=this.getIterator(b),s=i.getIterator(b);let l=o.getNext(),a=s.getNext();for(;l&&a;){if(l.name!==a.name||!l.node.equals(a.node))return!1;l=o.getNext(),a=s.getNext()}return null===l&&null===a}return!1}return!1}}resolveIndex_(e){return e===z?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Y0=new class yo extends y{constructor(){super(new G(dt),y.EMPTY_NODE,n0.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return y.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(T,{MIN:{value:new T(r0,y.EMPTY_NODE)},MAX:{value:new T(t0,Y0)}}),$i.__EMPTY_NODE=y.EMPTY_NODE,A0.__childrenNodeConstructor=y,function ho(n){ut=n}(Y0),function fo(n){rn=n}(Y0);const vo=!0;function A(n,t=null){if(null===n)return y.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,p.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new A0(n,A(t));if(n instanceof Array||!vo){let e=y.EMPTY_NODE;return k(n,(i,o)=>{if((0,p.r3)(n,i)&&"."!==i.substring(0,1)){const s=A(o);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(A(t))}{const e=[];let i=!1;if(k(n,(l,a)=>{if("."!==l.substring(0,1)){const c=A(a);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),e.push(new T(l,c)))}}),0===e.length)return y.EMPTY_NODE;const s=Ce(e,uo,l=>l.name,dt);if(i){const l=Ce(e,b.getCompare());return new y(s,A(t),new n0({".priority":l},{".priority":b}))}return new y(s,A(t),n0.Default)}}!function po(n){nn=n}(A);class pt extends ge{constructor(t){super(),this.indexPath_=t,(0,p.hu)(!C(t)&&".priority"!==v(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),o=this.extractChild(e.node),s=i.compareTo(o);return 0===s?g0(t.name,e.name):s}makePost(t,e){const i=A(t),o=y.EMPTY_NODE.updateChild(this.indexPath_,i);return new T(e,o)}maxPost(){const t=y.EMPTY_NODE.updateChild(this.indexPath_,Y0);return new T(t0,t)}toString(){return K0(this.indexPath_,0).join("/")}}const ft=new class Co extends ge{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?g0(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return T.MIN}maxPost(){return T.MAX}makePost(t,e){const i=A(t);return new T(e,i)}toString(){return".value"}};function on(n){return{type:"value",snapshotNode:n}}function M0(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function J0(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function z0(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class _t{constructor(t){this.index_=t}updateChild(t,e,i,o,s,l){(0,p.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=t.getImmediateChild(e);return a.getChild(o).equals(i.getChild(o))&&a.isEmpty()===i.isEmpty()||(null!=l&&(i.isEmpty()?t.hasChild(e)?l.trackChildChange(J0(e,a)):(0,p.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?l.trackChildChange(M0(e,i)):l.trackChildChange(z0(e,i,a))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(b,(o,s)=>{e.hasChild(o)||i.trackChildChange(J0(o,s))}),e.isLeafNode()||e.forEachChild(b,(o,s)=>{if(t.hasChild(o)){const l=t.getImmediateChild(o);l.equals(s)||i.trackChildChange(z0(o,s,l))}else i.trackChildChange(M0(o,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?y.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class j0{constructor(t){this.indexedFilter_=new _t(t.getIndex()),this.index_=t.getIndex(),this.startPost_=j0.getStartPost_(t),this.endPost_=j0.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,o,s,l){return this.matches(new T(e,i))||(i=y.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,o,s,l)}updateFullNode(t,e,i){e.isLeafNode()&&(e=y.EMPTY_NODE);let o=e.withIndex(this.index_);o=o.updatePriority(y.EMPTY_NODE);const s=this;return e.forEachChild(b,(l,a)=>{s.matches(new T(l,a))||(o=o.updateImmediateChild(l,y.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,o,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class Po{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new j0(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,o,s,l){return this.rangedFilter_.matches(new T(e,i))||(i=y.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,o,s,l):this.fullLimitUpdateChild_(t,e,i,s,l)}updateFullNode(t,e,i){let o;if(e.isLeafNode()||e.isEmpty())o=y.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;o=y.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;o=o.updateImmediateChild(a.name,a.node),l++}}}else{let s;o=e.withIndex(this.index_),o=o.updatePriority(y.EMPTY_NODE),s=this.reverse_?o.getReverseIterator(this.index_):o.getIterator(this.index_);let l=0;for(;s.hasNext();){const a=s.getNext();l<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?l++:o=o.updateImmediateChild(a.name,y.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,o,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,o,s){let l;if(this.reverse_){const h=this.index_.getCompare();l=(f,_)=>h(_,f)}else l=this.index_.getCompare();const a=t;(0,p.hu)(a.numChildren()===this.limit_,"");const c=new T(e,i),d=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(e)){const h=a.getImmediateChild(e);let f=o.getChildAfterChild(this.index_,d,this.reverse_);for(;null!=f&&(f.name===e||a.hasChild(f.name));)f=o.getChildAfterChild(this.index_,f,this.reverse_);const _=null==f?1:l(f,c);if(u&&!i.isEmpty()&&_>=0)return s?.trackChildChange(z0(e,i,h)),a.updateImmediateChild(e,i);{s?.trackChildChange(J0(e,h));const P=a.updateImmediateChild(e,y.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(s?.trackChildChange(M0(f.name,f.node)),P.updateImmediateChild(f.name,f.node)):P}}return i.isEmpty()?t:u&&l(d,c)>=0?(null!=s&&(s.trackChildChange(J0(d.name,d.node)),s.trackChildChange(M0(e,i))),a.updateImmediateChild(e,i).updateImmediateChild(d.name,y.EMPTY_NODE)):t}}class mt{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=b}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,p.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,p.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:r0}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,p.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,p.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:t0}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,p.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===b}copy(){const t=new mt;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function sn(n){const t={};if(n.isDefault())return t;let e;if(n.index_===b?e="$priority":n.index_===ft?e="$value":n.index_===z?e="$key":((0,p.hu)(n.index_ instanceof pt,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,p.Wl)(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=(0,p.Wl)(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+(0,p.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=(0,p.Wl)(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+(0,p.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function ln(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==b&&(t.i=n.index_.toString()),t}class Pe extends Wi{constructor(t,e,i,o){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=o,this.log_=B0("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,p.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,o){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const l=Pe.getListenId_(t,i),a={};this.listens_[l]=a;const c=sn(t._queryParams);this.restRequest_(s+".json",c,(d,u)=>{let h=u;if(404===d&&(h=null,d=null),null===d&&this.onDataUpdate_(s,h,!1,i),(0,p.DV)(this.listens_,l)===a){let f;f=d?401===d?"permission_denied":"rest_error:"+d:"ok",o(f,null)}})}unlisten(t,e){const i=Pe.getListenId_(t,e);delete this.listens_[i]}get(t){const e=sn(t._queryParams),i=t._path.toString(),o=new p.BH;return this.restRequest_(i+".json",e,(s,l)=>{let a=l;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(i,a,!1,null),o.resolve(a)):o.reject(new Error(a))}),o.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,s])=>{o&&o.accessToken&&(e.auth=o.accessToken),s&&s.token&&(e.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,p.xO)(e);this.log_("Sending REST request for "+l);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&4===a.readyState){this.log_("REST Response for "+l+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=(0,p.cI)(a.responseText)}catch{R("Failed to parse JSON response for "+l+": "+a.responseText)}i(null,c)}else 401!==a.status&&404!==a.status&&R("Got unsuccessful REST response for "+l+" Status: "+a.status),i(a.status);i=null}},a.open("GET",l,!0),a.send()})}}class So{constructor(){this.rootNode_=y.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function xe(){return{value:null,children:new Map}}function k0(n,t,e){if(C(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=v(t);n.children.has(i)||n.children.set(i,xe()),k0(n.children.get(i),t=E(t),e)}}function Ct(n,t,e){null!==n.value?e(t,n.value):function Oo(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,o)=>{Ct(o,new w(t.toString()+"/"+i),e)})}class Ao{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&k(this.last_,(i,o)=>{e[i]=e[i]-o}),this.last_=t,e}}class ko{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ao(t);const i=1e4+2e4*Math.random();q0(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;k(t,(o,s)=>{s>0&&(0,p.r3)(this.statsToReport_,o)&&(e[o]=s,i=!0)}),i&&this.server_.reportStats(e),q0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var j=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(j||{});function xt(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class we{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=j.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(C(this.path)){if(null!=this.affectedTree.value)return(0,p.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new w(t));return new we(x(),e,this.revert)}}return(0,p.hu)(v(this.path)===t,"operationForChild called for unrelated child."),new we(E(this.path),this.affectedTree,this.revert)}}class $0{constructor(t,e){this.source=t,this.path=e,this.type=j.LISTEN_COMPLETE}operationForChild(t){return C(this.path)?new $0(this.source,x()):new $0(this.source,E(this.path))}}class C0{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=j.OVERWRITE}operationForChild(t){return C(this.path)?new C0(this.source,x(),this.snap.getImmediateChild(t)):new C0(this.source,E(this.path),this.snap)}}class R0{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=j.MERGE}operationForChild(t){if(C(this.path)){const e=this.children.subtree(new w(t));return e.isEmpty()?null:e.value?new C0(this.source,x(),e.value):new R0(this.source,x(),e)}return(0,p.hu)(v(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new R0(this.source,E(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class l0{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(C(t))return this.isFullyInitialized()&&!this.filtered_;const e=v(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class Ro{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function X0(n,t,e,i,o,s){const l=i.filter(a=>a.type===e);l.sort((a,c)=>function Fo(n,t,e){if(null==t.childName||null==e.childName)throw(0,p.g5)("Should only compare child_ events.");const i=new T(t.childName,t.snapshotNode),o=new T(e.childName,e.snapshotNode);return n.index_.compare(i,o)}(n,a,c)),l.forEach(a=>{const c=function Do(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,a,s);o.forEach(d=>{d.respondsTo(a.type)&&t.push(d.createEvent(c,n.query_))})})}function Ie(n,t){return{eventCache:n,serverCache:t}}function ee(n,t,e,i){return Ie(new l0(t,e,i),n.serverCache)}function cn(n,t,e,i){return Ie(n.eventCache,new l0(t,e,i))}function Ee(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function T0(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let wt;class S{constructor(t,e=(()=>(wt||(wt=new G(Cr)),wt))()){this.value=t,this.children=e}static fromObject(t){let e=new S(null);return k(t,(i,o)=>{e=e.set(new w(i),o)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:x(),value:this.value};if(C(t))return null;{const i=v(t),o=this.children.get(i);if(null!==o){const s=o.findRootMostMatchingPathAndValue(E(t),e);return null!=s?{path:O(new w(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(C(t))return this;{const e=v(t),i=this.children.get(e);return null!==i?i.subtree(E(t)):new S(null)}}set(t,e){if(C(t))return new S(e,this.children);{const i=v(t),s=(this.children.get(i)||new S(null)).set(E(t),e),l=this.children.insert(i,s);return new S(this.value,l)}}remove(t){if(C(t))return this.children.isEmpty()?new S(null):new S(null,this.children);{const e=v(t),i=this.children.get(e);if(i){const o=i.remove(E(t));let s;return s=o.isEmpty()?this.children.remove(e):this.children.insert(e,o),null===this.value&&s.isEmpty()?new S(null):new S(this.value,s)}return this}}get(t){if(C(t))return this.value;{const e=v(t),i=this.children.get(e);return i?i.get(E(t)):null}}setTree(t,e){if(C(t))return e;{const i=v(t),s=(this.children.get(i)||new S(null)).setTree(E(t),e);let l;return l=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new S(this.value,l)}}fold(t){return this.fold_(x(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((o,s)=>{i[o]=s.fold_(O(t,o),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,x(),e)}findOnPath_(t,e,i){const o=!!this.value&&i(e,this.value);if(o)return o;if(C(t))return null;{const s=v(t),l=this.children.get(s);return l?l.findOnPath_(E(t),O(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,x(),e)}foreachOnPath_(t,e,i){if(C(t))return this;{this.value&&i(e,this.value);const o=v(t),s=this.children.get(o);return s?s.foreachOnPath_(E(t),O(e,o),i):new S(null)}}foreach(t){this.foreach_(x(),t)}foreach_(t,e){this.children.inorderTraversal((i,o)=>{o.foreach_(O(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class V{constructor(t){this.writeTree_=t}static empty(){return new V(new S(null))}}function te(n,t,e){if(C(t))return new V(new S(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const o=i.path;let s=i.value;const l=D(o,t);return s=s.updateChild(l,e),new V(n.writeTree_.set(o,s))}{const o=new S(e),s=n.writeTree_.setTree(t,o);return new V(s)}}}function It(n,t,e){let i=n;return k(e,(o,s)=>{i=te(i,O(t,o),s)}),i}function dn(n,t){if(C(t))return V.empty();{const e=n.writeTree_.setTree(t,new S(null));return new V(e)}}function Et(n,t){return null!=P0(n,t)}function P0(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(D(e.path,t)):null}function un(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(b,(i,o)=>{t.push(new T(i,o))}):n.writeTree_.children.inorderTraversal((i,o)=>{null!=o.value&&t.push(new T(i,o.value))}),t}function a0(n,t){if(C(t))return n;{const e=P0(n,t);return new V(null!=e?new S(e):n.writeTree_.subtree(t))}}function bt(n){return n.writeTree_.isEmpty()}function L0(n,t){return hn(x(),n.writeTree_,t)}function hn(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((o,s)=>{".priority"===o?((0,p.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=hn(O(n,o),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(O(n,".priority"),i)),e}}function be(n,t){return gn(t,n)}function qo(n,t){if(n.snap)return W(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&W(O(n.path,e),t))return!0;return!1}function Ko(n){return n.visible}function pn(n,t,e){let i=V.empty();for(let o=0;o<n.length;++o){const s=n[o];if(t(s)){const l=s.path;let a;if(s.snap)W(e,l)?(a=D(e,l),i=te(i,a,s.snap)):W(l,e)&&(a=D(l,e),i=te(i,x(),s.snap.getChild(a)));else{if(!s.children)throw(0,p.g5)("WriteRecord should have .snap or .children");if(W(e,l))a=D(e,l),i=It(i,a,s.children);else if(W(l,e))if(a=D(l,e),C(a))i=It(i,x(),s.children);else{const c=(0,p.DV)(s.children,v(a));if(c){const d=c.getChild(E(a));i=te(i,x(),d)}}}}}return i}function fn(n,t,e,i,o){if(i||o){const s=a0(n.visibleWrites,t);return!o&&bt(s)?e:o||null!=e||Et(s,x())?L0(pn(n.allWrites,function(d){return(d.visible||o)&&(!i||!~i.indexOf(d.writeId))&&(W(d.path,t)||W(t,d.path))},t),e||y.EMPTY_NODE):null}{const s=P0(n.visibleWrites,t);if(null!=s)return s;{const l=a0(n.visibleWrites,t);return bt(l)?e:null!=e||Et(l,x())?L0(l,e||y.EMPTY_NODE):null}}}function Se(n,t,e,i){return fn(n.writeTree,n.treePath,t,e,i)}function St(n,t){return function Vo(n,t,e){let i=y.EMPTY_NODE;const o=P0(n.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(b,(s,l)=>{i=i.updateImmediateChild(s,l)}),i;if(e){const s=a0(n.visibleWrites,t);return e.forEachChild(b,(l,a)=>{const c=L0(a0(s,new w(l)),a);i=i.updateImmediateChild(l,c)}),un(s).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}return un(a0(n.visibleWrites,t)).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}(n.writeTree,n.treePath,t)}function _n(n,t,e,i){return function Qo(n,t,e,i,o){(0,p.hu)(i||o,"Either existingEventSnap or existingServerSnap must exist");const s=O(t,e);if(Et(n.visibleWrites,s))return null;{const l=a0(n.visibleWrites,s);return bt(l)?o.getChild(e):L0(l,o.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function Oe(n,t){return function Jo(n,t){return P0(n.visibleWrites,t)}(n.writeTree,O(n.treePath,t))}function Ot(n,t,e){return function Yo(n,t,e,i){const o=O(t,e),s=P0(n.visibleWrites,o);return null!=s?s:i.isCompleteForChild(e)?L0(a0(n.visibleWrites,o),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function mn(n,t){return gn(O(n.treePath,t),n.writeTree)}function gn(n,t){return{treePath:n,writeTree:t}}class Xo{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,p.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,p.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(i);if(o){const s=o.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,z0(i,t.snapshotNode,o.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,J0(i,o.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,M0(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,p.g5)("Illegal combination of changes: "+t+" occurred after "+o);this.changeMap.set(i,z0(i,t.snapshotNode,o.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const yn=new class es{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class At{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new l0(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ot(this.writes_,t,i)}}getChildAfterChild(t,e,i){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:T0(this.viewCache_),s=function $o(n,t,e,i,o,s){return function zo(n,t,e,i,o,s,l){let a;const c=a0(n.visibleWrites,t),d=P0(c,x());if(null!=d)a=d;else{if(null==e)return[];a=L0(c,e)}if(a=a.withIndex(l),a.isEmpty()||a.isLeafNode())return[];{const u=[],h=l.getCompare(),f=s?a.getReverseIteratorFrom(i,l):a.getIteratorFrom(i,l);let _=f.getNext();for(;_&&u.length<o;)0!==h(_,i)&&u.push(_),_=f.getNext();return u}}(n.writeTree,n.treePath,t,e,i,o,s)}(this.writes_,o,e,1,i,t);return 0===s.length?null:s[0]}}function vn(n,t,e,i,o,s){const l=t.eventCache;if(null!=Oe(i,e))return t;{let a,c;if(C(e))if((0,p.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const d=T0(t),h=St(i,d instanceof y?d:y.EMPTY_NODE);a=n.filter.updateFullNode(t.eventCache.getNode(),h,s)}else{const d=Se(i,T0(t));a=n.filter.updateFullNode(t.eventCache.getNode(),d,s)}else{const d=v(e);if(".priority"===d){(0,p.hu)(1===s0(e),"Can't have a priority with additional path components");const u=l.getNode();c=t.serverCache.getNode();const h=_n(i,e,u,c);a=null!=h?n.filter.updatePriority(u,h):l.getNode()}else{const u=E(e);let h;if(l.isCompleteForChild(d)){c=t.serverCache.getNode();const f=_n(i,e,l.getNode(),c);h=null!=f?l.getNode().getImmediateChild(d).updateChild(u,f):l.getNode().getImmediateChild(d)}else h=Ot(i,d,t.serverCache);a=null!=h?n.filter.updateChild(l.getNode(),d,h,u,o,s):l.getNode()}}return ee(t,a,l.isFullyInitialized()||C(e),n.filter.filtersNodes())}}function Ae(n,t,e,i,o,s,l,a){const c=t.serverCache;let d;const u=l?n.filter:n.filter.getIndexedFilter();if(C(e))d=u.updateFullNode(c.getNode(),i,null);else if(u.filtersNodes()&&!c.isFiltered()){const _=c.getNode().updateChild(e,i);d=u.updateFullNode(c.getNode(),_,null)}else{const _=v(e);if(!c.isCompleteForPath(e)&&s0(e)>1)return t;const g=E(e),N=c.getNode().getImmediateChild(_).updateChild(g,i);d=".priority"===_?u.updatePriority(c.getNode(),N):u.updateChild(c.getNode(),_,N,g,yn,null)}const h=cn(t,d,c.isFullyInitialized()||C(e),u.filtersNodes());return vn(n,h,e,o,new At(o,h,s),a)}function Nt(n,t,e,i,o,s,l){const a=t.eventCache;let c,d;const u=new At(o,t,s);if(C(e))d=n.filter.updateFullNode(t.eventCache.getNode(),i,l),c=ee(t,d,!0,n.filter.filtersNodes());else{const h=v(e);if(".priority"===h)d=n.filter.updatePriority(t.eventCache.getNode(),i),c=ee(t,d,a.isFullyInitialized(),a.isFiltered());else{const f=E(e),_=a.getNode().getImmediateChild(h);let g;if(C(f))g=i;else{const P=u.getCompleteChild(h);g=null!=P?".priority"===lt(f)&&P.getChild(Yi(f)).isEmpty()?P:P.updateChild(f,i):y.EMPTY_NODE}c=_.equals(g)?t:ee(t,n.filter.updateChild(a.getNode(),h,g,f,u,l),a.isFullyInitialized(),n.filter.filtersNodes())}}return c}function Cn(n,t){return n.eventCache.isCompleteForChild(t)}function Tn(n,t,e){return e.foreach((i,o)=>{t=t.updateChild(i,o)}),t}function Mt(n,t,e,i,o,s,l,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let d,c=t;d=C(e)?i:new S(null).setTree(e,i);const u=t.serverCache.getNode();return d.children.inorderTraversal((h,f)=>{if(u.hasChild(h)){const g=Tn(0,t.serverCache.getNode().getImmediateChild(h),f);c=Ae(n,c,new w(h),g,o,s,l,a)}}),d.children.inorderTraversal((h,f)=>{const _=!t.serverCache.isCompleteForChild(h)&&null===f.value;if(!u.hasChild(h)&&!_){const P=Tn(0,t.serverCache.getNode().getImmediateChild(h),f);c=Ae(n,c,new w(h),P,o,s,l,a)}}),c}class cs{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,o=new _t(i.getIndex()),s=function xo(n){return n.loadsAllData()?new _t(n.getIndex()):n.hasLimit()?new Po(n):new j0(n)}(i);this.processor_=function ts(n){return{filter:n}}(s);const l=e.serverCache,a=e.eventCache,c=o.updateFullNode(y.EMPTY_NODE,l.getNode(),null),d=s.updateFullNode(y.EMPTY_NODE,a.getNode(),null),u=new l0(c,l.isFullyInitialized(),o.filtersNodes()),h=new l0(d,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Ie(h,u),this.eventGenerator_=new Ro(this.query_)}get query(){return this.query_}}function hs(n,t){const e=T0(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!C(t)&&!e.getImmediateChild(v(t)).isEmpty())?e.getChild(t):null}function Pn(n){return 0===n.eventRegistrations_.length}function xn(n,t,e){const i=[];if(e){(0,p.hu)(null==t,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(s=>{const l=s.createCancelEvent(e,o);l&&i.push(l)})}if(t){let o=[];for(let s=0;s<n.eventRegistrations_.length;++s){const l=n.eventRegistrations_[s];if(l.matches(t)){if(t.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(s+1));break}}else o.push(l)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return i}function wn(n,t,e,i){t.type===j.MERGE&&null!==t.source.queryId&&((0,p.hu)(T0(n.viewCache_),"We should always have a full cache before handling merges"),(0,p.hu)(Ee(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,s=function ns(n,t,e,i,o){const s=new Xo;let l,a;if(e.type===j.OVERWRITE){const d=e;d.source.fromUser?l=Nt(n,t,d.path,d.snap,i,o,s):((0,p.hu)(d.source.fromServer,"Unknown source."),a=d.source.tagged||t.serverCache.isFiltered()&&!C(d.path),l=Ae(n,t,d.path,d.snap,i,o,a,s))}else if(e.type===j.MERGE){const d=e;d.source.fromUser?l=function os(n,t,e,i,o,s,l){let a=t;return i.foreach((c,d)=>{const u=O(e,c);Cn(t,v(u))&&(a=Nt(n,a,u,d,o,s,l))}),i.foreach((c,d)=>{const u=O(e,c);Cn(t,v(u))||(a=Nt(n,a,u,d,o,s,l))}),a}(n,t,d.path,d.children,i,o,s):((0,p.hu)(d.source.fromServer,"Unknown source."),a=d.source.tagged||t.serverCache.isFiltered(),l=Mt(n,t,d.path,d.children,i,o,a,s))}else if(e.type===j.ACK_USER_WRITE){const d=e;l=d.revert?function as(n,t,e,i,o,s){let l;if(null!=Oe(i,e))return t;{const a=new At(i,t,o),c=t.eventCache.getNode();let d;if(C(e)||".priority"===v(e)){let u;if(t.serverCache.isFullyInitialized())u=Se(i,T0(t));else{const h=t.serverCache.getNode();(0,p.hu)(h instanceof y,"serverChildren would be complete if leaf node"),u=St(i,h)}d=n.filter.updateFullNode(c,u,s)}else{const u=v(e);let h=Ot(i,u,t.serverCache);null==h&&t.serverCache.isCompleteForChild(u)&&(h=c.getImmediateChild(u)),d=null!=h?n.filter.updateChild(c,u,h,E(e),a,s):t.eventCache.getNode().hasChild(u)?n.filter.updateChild(c,u,y.EMPTY_NODE,E(e),a,s):c,d.isEmpty()&&t.serverCache.isFullyInitialized()&&(l=Se(i,T0(t)),l.isLeafNode()&&(d=n.filter.updateFullNode(d,l,s)))}return l=t.serverCache.isFullyInitialized()||null!=Oe(i,x()),ee(t,d,l,n.filter.filtersNodes())}}(n,t,d.path,i,o,s):function ss(n,t,e,i,o,s,l){if(null!=Oe(o,e))return t;const a=t.serverCache.isFiltered(),c=t.serverCache;if(null!=i.value){if(C(e)&&c.isFullyInitialized()||c.isCompleteForPath(e))return Ae(n,t,e,c.getNode().getChild(e),o,s,a,l);if(C(e)){let d=new S(null);return c.getNode().forEachChild(z,(u,h)=>{d=d.set(new w(u),h)}),Mt(n,t,e,d,o,s,a,l)}return t}{let d=new S(null);return i.foreach((u,h)=>{const f=O(e,u);c.isCompleteForPath(f)&&(d=d.set(u,c.getNode().getChild(f)))}),Mt(n,t,e,d,o,s,a,l)}}(n,t,d.path,d.affectedTree,i,o,s)}else{if(e.type!==j.LISTEN_COMPLETE)throw(0,p.g5)("Unknown operation type: "+e.type);l=function ls(n,t,e,i,o){const s=t.serverCache;return vn(n,cn(t,s.getNode(),s.isFullyInitialized()||C(e),s.isFiltered()),e,i,yn,o)}(n,t,e.path,i,s)}const c=s.getChanges();return function rs(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const o=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Ee(n);(e.length>0||!n.eventCache.isFullyInitialized()||o&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(on(Ee(t)))}}(t,l,c),{viewCache:l,changes:c}}(n.processor_,o,t,e,i);return function is(n,t){(0,p.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,p.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,p.hu)(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,In(n,s.changes,s.viewCache.eventCache.getNode(),null)}function In(n,t,e,i){return function Lo(n,t,e,i){const o=[],s=[];return t.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function To(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(l.childName,l.snapshotNode))}),X0(n,o,"child_removed",t,i,e),X0(n,o,"child_added",t,i,e),X0(n,o,"child_moved",s,i,e),X0(n,o,"child_changed",t,i,e),X0(n,o,"value",t,i,e),o}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let Ne,ke;class En{constructor(){this.views=new Map}}function kt(n,t,e,i){const o=t.source.queryId;if(null!==o){const s=n.views.get(o);return(0,p.hu)(null!=s,"SyncTree gave us an op for an invalid query."),wn(s,t,e,i)}{let s=[];for(const l of n.views.values())s=s.concat(wn(l,t,e,i));return s}}function bn(n,t,e,i,o){const l=n.views.get(t._queryIdentifier);if(!l){let a=Se(e,o?i:null),c=!1;a?c=!0:i instanceof y?(a=St(e,i),c=!1):(a=y.EMPTY_NODE,c=!1);const d=Ie(new l0(a,c,!1),new l0(i,o,!1));return new cs(t,d)}return l}function Sn(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function c0(n,t){let e=null;for(const i of n.views.values())e=e||hs(i,t);return e}function On(n,t){return t._queryParams.loadsAllData()?Me(n):n.views.get(t._queryIdentifier)}function An(n,t){return null!=On(n,t)}function d0(n){return null!=Me(n)}function Me(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Ps=1;class Nn{constructor(t){this.listenProvider_=t,this.syncPointTree_=new S(null),this.pendingWriteTree_=function jo(){return{visibleWrites:V.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Rt(n,t,e,i,o){return function Uo(n,t,e,i,o){(0,p.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:o}),o&&(n.visibleWrites=te(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,o),o?D0(n,new C0({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function u0(n,t,e=!1){const i=function Bo(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function Ho(n,t){const e=n.allWrites.findIndex(a=>a.writeId===t);(0,p.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let o=i.visible,s=!1,l=n.allWrites.length-1;for(;o&&l>=0;){const a=n.allWrites[l];a.visible&&(l>=e&&qo(a,i.path)?o=!1:W(i.path,a.path)&&(s=!0)),l--}return!!o&&(s?(function Wo(n){n.visibleWrites=pn(n.allWrites,Ko,x()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=dn(n.visibleWrites,i.path):k(i.children,c=>{n.visibleWrites=dn(n.visibleWrites,O(i.path,c))}),!0))}(n.pendingWriteTree_,t)){let s=new S(null);return null!=i.snap?s=s.set(x(),!0):k(i.children,l=>{s=s.set(new w(l),!0)}),D0(n,new we(i.path,s,e))}return[]}function ie(n,t,e){return D0(n,new C0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function Re(n,t,e,i,o=!1){const s=t._path,l=n.syncPointTree_.get(s);let a=[];if(l&&("default"===t._queryIdentifier||An(l,t))){const c=function vs(n,t,e,i){const o=t._queryIdentifier,s=[];let l=[];const a=d0(n);if("default"===o)for(const[c,d]of n.views.entries())l=l.concat(xn(d,e,i)),Pn(d)&&(n.views.delete(c),d.query._queryParams.loadsAllData()||s.push(d.query));else{const c=n.views.get(o);c&&(l=l.concat(xn(c,e,i)),Pn(c)&&(n.views.delete(o),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!d0(n)&&s.push(new(function ms(){return(0,p.hu)(Ne,"Reference.ts has not been loaded"),Ne}())(t._repo,t._path)),{removed:s,events:l}}(l,t,e,i);(function gs(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const d=c.removed;if(a=c.events,!o){const u=-1!==d.findIndex(f=>f._queryParams.loadsAllData()),h=n.syncPointTree_.findOnPath(s,(f,_)=>d0(_));if(u&&!h){const f=n.syncPointTree_.subtree(s);if(!f.isEmpty()){const _=function Os(n){return n.fold((t,e,i)=>{if(e&&d0(e))return[Me(e)];{let o=[];return e&&(o=Sn(e)),k(i,(s,l)=>{o=o.concat(l)}),o}})}(f);for(let g=0;g<_.length;++g){const P=_[g],N=P.query,F=Ln(n,P);n.listenProvider_.startListening(re(N),ne(n,N),F.hashFn,F.onComplete)}}}!h&&d.length>0&&!i&&(u?n.listenProvider_.stopListening(re(t),null):d.forEach(f=>{const _=n.queryToTagMap.get(De(f));n.listenProvider_.stopListening(re(f),_)}))}!function As(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const o=De(i),s=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(s)}}}(n,d)}return a}function Mn(n,t,e,i){const o=Dt(n,i);if(null!=o){const s=Ft(o),l=s.path,a=s.queryId,c=D(l,t);return Gt(n,l,new C0(xt(a),c,e))}return[]}function Lt(n,t,e,i=!1){const o=t._path;let s=null,l=!1;n.syncPointTree_.foreachOnPath(o,(f,_)=>{const g=D(f,o);s=s||c0(_,g),l=l||d0(_)});let c,a=n.syncPointTree_.get(o);a?(l=l||d0(a),s=s||c0(a,x())):(a=new En,n.syncPointTree_=n.syncPointTree_.set(o,a)),null!=s?c=!0:(c=!1,s=y.EMPTY_NODE,n.syncPointTree_.subtree(o).foreachChild((_,g)=>{const P=c0(g,x());P&&(s=s.updateImmediateChild(_,P))}));const d=An(a,t);if(!d&&!t._queryParams.loadsAllData()){const f=De(t);(0,p.hu)(!n.queryToTagMap.has(f),"View does not exist, but we have a tag");const _=function Ns(){return Ps++}();n.queryToTagMap.set(f,_),n.tagToQueryMap.set(_,f)}let h=function ys(n,t,e,i,o,s){const l=bn(n,t,i,o,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,l),function ps(n,t){n.eventRegistrations_.push(t)}(l,e),function fs(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(b,(s,l)=>{i.push(M0(s,l))}),e.isFullyInitialized()&&i.push(on(e.getNode())),In(n,i,e.getNode(),t)}(l,e)}(a,t,e,be(n.pendingWriteTree_,o),s,c);if(!d&&!l&&!i){const f=On(a,t);h=h.concat(function Ms(n,t,e){const i=t._path,o=ne(n,t),s=Ln(n,e),l=n.listenProvider_.startListening(re(t),o,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(i);if(o)(0,p.hu)(!d0(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((d,u,h)=>{if(!C(d)&&u&&d0(u))return[Me(u).query];{let f=[];return u&&(f=f.concat(Sn(u).map(_=>_.query))),k(h,(_,g)=>{f=f.concat(g)}),f}});for(let d=0;d<c.length;++d){const u=c[d];n.listenProvider_.stopListening(re(u),ne(n,u))}}return l}(n,t,f))}return h}function Le(n,t,e){const o=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(l,a)=>{const d=c0(a,D(l,t));if(d)return d});return fn(o,t,s,e,!0)}function D0(n,t){return kn(t,n.syncPointTree_,null,be(n.pendingWriteTree_,x()))}function kn(n,t,e,i){if(C(n.path))return Rn(n,t,e,i);{const o=t.get(x());null==e&&null!=o&&(e=c0(o,x()));let s=[];const l=v(n.path),a=n.operationForChild(l),c=t.children.get(l);if(c&&a){const d=e?e.getImmediateChild(l):null,u=mn(i,l);s=s.concat(kn(a,c,d,u))}return o&&(s=s.concat(kt(o,n,i,e))),s}}function Rn(n,t,e,i){const o=t.get(x());null==e&&null!=o&&(e=c0(o,x()));let s=[];return t.children.inorderTraversal((l,a)=>{const c=e?e.getImmediateChild(l):null,d=mn(i,l),u=n.operationForChild(l);u&&(s=s.concat(Rn(u,a,c,d)))}),o&&(s=s.concat(kt(o,n,i,e))),s}function Ln(n,t){const e=t.query,i=ne(n,e);return{hashFn:()=>(function ds(n){return n.viewCache_.serverCache.getNode()}(t)||y.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return i?function Es(n,t,e){const i=Dt(n,e);if(i){const o=Ft(i),s=o.path,l=o.queryId,a=D(s,t);return Gt(n,s,new $0(xt(l),a))}return[]}(n,e._path,i):function Is(n,t){return D0(n,new $0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function xr(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(o,e);return Re(n,e,null,s)}}}}function ne(n,t){const e=De(t);return n.queryToTagMap.get(e)}function De(n){return n._path.toString()+"$"+n._queryIdentifier}function Dt(n,t){return n.tagToQueryMap.get(t)}function Ft(n){const t=n.indexOf("$");return(0,p.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new w(n.substr(0,t))}}function Gt(n,t,e){const i=n.syncPointTree_.get(t);return(0,p.hu)(i,"Missing sync point for query tag that we're tracking"),kt(i,e,be(n.pendingWriteTree_,t),null)}function re(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Ts(){return(0,p.hu)(ke,"Reference.ts has not been loaded"),ke}())(n._repo,n._path):n}class Ut{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Ut(e)}node(){return this.node_}}class Zt{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=O(this.path_,t);return new Zt(this.syncTree_,e)}node(){return Le(this.syncTree_,this.path_)}}const ks=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},Dn=function(n,t,e){return n&&"object"==typeof n?((0,p.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Rs(n[".sv"],t,e):"object"==typeof n[".sv"]?Ls(n[".sv"],t):void(0,p.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Rs=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,p.hu)(!1,"Unexpected server value: "+n)},Ls=function(n,t,e){n.hasOwnProperty("increment")||(0,p.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,p.hu)(!1,"Unexpected increment value: "+i);const o=t.node();if((0,p.hu)(null!==o&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return i;const l=o.getValue();return"number"!=typeof l?i:l+i},Fn=function(n,t,e,i){return Ht(t,new Zt(e,n),i)},Bt=function(n,t,e){return Ht(n,new Ut(t),e)};function Ht(n,t,e){const i=n.getPriority().val(),o=Dn(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const l=n,a=Dn(l.getValue(),t,e);return a!==l.getValue()||o!==l.getPriority().val()?new A0(a,A(o)):n}{const l=n;return s=l,o!==l.getPriority().val()&&(s=s.updatePriority(new A0(o))),l.forEachChild(b,(a,c)=>{const d=Ht(c,t.getImmediateChild(a),e);d!==c&&(s=s.updateImmediateChild(a,d))}),s}}class qt{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function Fe(n,t){let e=t instanceof w?t:new w(t),i=n,o=v(e);for(;null!==o;){const s=(0,p.DV)(i.node.children,o)||{children:{},childCount:0};i=new qt(o,i,s),e=E(e),o=v(e)}return i}function x0(n){return n.node.value}function Wt(n,t){n.node.value=t,Kt(n)}function Gn(n){return n.node.childCount>0}function Ge(n,t){k(n.node.children,(e,i)=>{t(new qt(e,n,i))})}function Un(n,t,e,i){e&&!i&&t(n),Ge(n,o=>{Un(o,t,!0,i)}),e&&i&&t(n)}function oe(n){return new w(null===n.parent?n.name:oe(n.parent)+"/"+n.name)}function Kt(n){null!==n.parent&&function Gs(n,t,e){const i=function Ds(n){return void 0===x0(n)&&!Gn(n)}(e),o=(0,p.r3)(n.node.children,t);i&&o?(delete n.node.children[t],n.node.childCount--,Kt(n)):!i&&!o&&(n.node.children[t]=e.node,n.node.childCount++,Kt(n))}(n.parent,n.name,n)}const Us=/[\[\].#$\/\u0000-\u001F\u007F]/,Zs=/[\[\].#$\u0000-\u001F\u007F]/,Vt=10485760,Ue=function(n){return"string"==typeof n&&0!==n.length&&!Us.test(n)},Zn=function(n){return"string"==typeof n&&0!==n.length&&!Zs.test(n)},le=function(n,t,e){const i=e instanceof w?new io(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+y0(i));if("function"==typeof t)throw new Error(n+"contains a function "+y0(i)+" with contents = "+t.toString());if(pe(t))throw new Error(n+"contains "+t.toString()+" "+y0(i));if("string"==typeof t&&t.length>Vt/3&&(0,p.ug)(t)>Vt)throw new Error(n+"contains a string greater than "+Vt+" utf8 bytes "+y0(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let o=!1,s=!1;if(k(t,(l,a)=>{if(".value"===l)o=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!Ue(l)))throw new Error(n+" contains an invalid key ("+l+") "+y0(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function no(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,p.ug)(t),Ji(n)})(i,l),le(n,a,i),function ro(n){const t=n.parts_.pop();n.byteLength_-=(0,p.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),o&&s)throw new Error(n+' contains ".value" child '+y0(i)+" in addition to actual children.")}},Yt=function(n,t,e,i){if(!(i&&void 0===e||Zn(e)))throw new Error((0,p.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qs=function(n,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Yt(n,t,e,i)};class Ws{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ze(n,t){let e=null;for(let i=0;i<t.length;i++){const o=t[i],s=o.getPath();null!==e&&!at(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(o)}e&&n.eventLists_.push(e)}function qn(n,t,e){Ze(n,e),Wn(n,i=>at(i,t))}function Z(n,t,e){Ze(n,e),Wn(n,i=>W(i,t)||W(t,i))}function Wn(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const o=n.eventLists_[i];o&&(t(o.path)?(Ks(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function Ks(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();m0&&M("event: "+e.toString()),S0(i)}}}const Vs=25;class Qs{constructor(t,e,i,o){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ws,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xe(),this.transactionQueueTree_=new qt,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Vn(n){const e=n.infoData_.getNode(new w(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ce(n){return ks({timestamp:Vn(n)})}function Qn(n,t,e,i,o){n.dataUpdateCount++;const s=new w(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let l=[];if(o)if(i){const c=(0,p.UI)(e,d=>A(d));l=function bs(n,t,e,i){const o=Dt(n,i);if(o){const s=Ft(o),l=s.path,a=s.queryId,c=D(l,t),d=S.fromObject(e);return Gt(n,l,new R0(xt(a),c,d))}return[]}(n.serverSyncTree_,s,c,o)}else{const c=A(e);l=Mn(n.serverSyncTree_,s,c,o)}else if(i){const c=(0,p.UI)(e,d=>A(d));l=function ws(n,t,e){const i=S.fromObject(e);return D0(n,new R0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,c)}else{const c=A(e);l=ie(n.serverSyncTree_,s,c)}let a=s;l.length>0&&(a=G0(n,s)),Z(n.eventQueue_,a,l)}function Yn(n,t){Jt(n,"connected",t),!1===t&&function $s(n){F0(n,"onDisconnectEvents");const t=ce(n),e=xe();Ct(n.onDisconnect_,x(),(o,s)=>{const l=Fn(o,s,n.serverSyncTree_,t);k0(e,o,l)});let i=[];Ct(e,x(),(o,s)=>{i=i.concat(ie(n.serverSyncTree_,o,s));const l=Xt(n,o);G0(n,l)}),n.onDisconnect_=xe(),Z(n.eventQueue_,x(),i)}(n)}function Jt(n,t,e){const i=new w("/.info/"+t),o=A(e);n.infoData_.updateSnapshot(i,o);const s=ie(n.infoSyncTree_,i,o);Z(n.eventQueue_,i,s)}function Be(n){return n.nextWriteId_++}function zt(n,t,e,i,o){F0(n,"set",{path:t.toString(),value:e,priority:i});const s=ce(n),l=A(e,i),a=Le(n.serverSyncTree_,t),c=Bt(l,a,s),d=Be(n),u=Rt(n.serverSyncTree_,t,c,d,!0);Ze(n.eventQueue_,u),n.server_.put(t.toString(),l.val(!0),(f,_)=>{const g="ok"===f;g||R("set at "+t+" failed: "+f);const P=u0(n.serverSyncTree_,d,!g);Z(n.eventQueue_,t,P),function h0(n,t,e,i){t&&S0(()=>{if("ok"===e)t(null);else{const o=(e||"error").toUpperCase();let s=o;i&&(s+=": "+i);const l=new Error(s);l.code=o,t(l)}})}(0,o,f,_)});const h=Xt(n,t);G0(n,h),Z(n.eventQueue_,h,[])}function jt(n,t,e){let i;i=".info"===v(t._path)?Re(n.infoSyncTree_,t,e):Re(n.serverSyncTree_,t,e),qn(n.eventQueue_,t._path,i)}function F0(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),M(e,...t)}function $t(n,t,e){return Le(n.serverSyncTree_,t,e)||y.EMPTY_NODE}function He(n,t=n.transactionQueueTree_){if(t||qe(n,t),x0(t)){const e=$n(n,t);(0,p.hu)(e.length>0,"Sending zero length transaction queue"),e.every(o=>0===o.status)&&function ol(n,t,e){const i=e.map(d=>d.currentWriteId),o=$t(n,t,i);let s=o;const l=o.hash();for(let d=0;d<e.length;d++){const u=e[d];(0,p.hu)(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=D(t,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),c=t;n.server_.put(c.toString(),a,d=>{F0(n,"transaction put response",{path:c.toString(),status:d});let u=[];if("ok"===d){const h=[];for(let f=0;f<e.length;f++)e[f].status=2,u=u.concat(u0(n.serverSyncTree_,e[f].currentWriteId)),e[f].onComplete&&h.push(()=>e[f].onComplete(null,!0,e[f].currentOutputSnapshotResolved)),e[f].unwatcher();qe(n,Fe(n.transactionQueueTree_,t)),He(n,n.transactionQueueTree_),Z(n.eventQueue_,t,u);for(let f=0;f<h.length;f++)S0(h[f])}else{if("datastale"===d)for(let h=0;h<e.length;h++)e[h].status=3===e[h].status?4:0;else{R("transaction at "+c.toString()+" failed: "+d);for(let h=0;h<e.length;h++)e[h].status=4,e[h].abortReason=d}G0(n,t)}},l)}(n,oe(t),e)}else Gn(t)&&Ge(t,e=>{He(n,e)})}function G0(n,t){const e=jn(n,t),i=oe(e);return function sl(n,t,e){if(0===t.length)return;const i=[];let o=[];const l=t.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){const c=t[a],d=D(e,c.path);let h,u=!1;if((0,p.hu)(null!==d,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)u=!0,h=c.abortReason,o=o.concat(u0(n.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=Vs)u=!0,h="maxretry",o=o.concat(u0(n.serverSyncTree_,c.currentWriteId,!0));else{const f=$t(n,c.path,l);c.currentInputSnapshot=f;const _=t[a].update(f.val());if(void 0!==_){le("transaction failed: Data returned ",_,c.path);let g=A(_);"object"==typeof _&&null!=_&&(0,p.r3)(_,".priority")||(g=g.updatePriority(f.getPriority()));const N=c.currentWriteId,F=ce(n),Je=Bt(g,f,F);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=Je,c.currentWriteId=Be(n),l.splice(l.indexOf(N),1),o=o.concat(Rt(n.serverSyncTree_,c.path,Je,c.currentWriteId,c.applyLocally)),o=o.concat(u0(n.serverSyncTree_,N,!0))}else u=!0,h="nodata",o=o.concat(u0(n.serverSyncTree_,c.currentWriteId,!0))}Z(n.eventQueue_,e,o),o=[],u&&(t[a].status=2,setTimeout(t[a].unwatcher,Math.floor(0)),t[a].onComplete&&i.push("nodata"===h?()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot):()=>t[a].onComplete(new Error(h),!1,null)))}qe(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)S0(i[a]);He(n,n.transactionQueueTree_)}(n,$n(n,e),i),i}function jn(n,t){let e,i=n.transactionQueueTree_;for(e=v(t);null!==e&&void 0===x0(i);)i=Fe(i,e),e=v(t=E(t));return i}function $n(n,t){const e=[];return Xn(n,t,e),e.sort((i,o)=>i.order-o.order),e}function Xn(n,t,e){const i=x0(t);if(i)for(let o=0;o<i.length;o++)e.push(i[o]);Ge(t,o=>{Xn(n,o,e)})}function qe(n,t){const e=x0(t);if(e){let i=0;for(let o=0;o<e.length;o++)2!==e[o].status&&(e[i]=e[o],i++);e.length=i,Wt(t,e.length>0?e:void 0)}Ge(t,i=>{qe(n,i)})}function Xt(n,t){const e=oe(jn(n,t)),i=Fe(n.transactionQueueTree_,t);return function Fs(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,o=>{ei(n,o)}),ei(n,i),Un(i,o=>{ei(n,o)}),e}function ei(n,t){const e=x0(t);if(e){const i=[];let o=[],s=-1;for(let l=0;l<e.length;l++)3===e[l].status||(1===e[l].status?((0,p.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,e[l].status=3,e[l].abortReason="set"):((0,p.hu)(0===e[l].status,"Unexpected transaction status in abort"),e[l].unwatcher(),o=o.concat(u0(n.serverSyncTree_,e[l].currentWriteId,!0)),e[l].onComplete&&i.push(e[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Wt(t,void 0):e.length=s+1,Z(n.eventQueue_,oe(t),o);for(let l=0;l<i.length;l++)S0(i[l])}}const ti=function(n,t){const e=cl(n),i=e.namespace;return"firebase.com"===e.domain&&J(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&J("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&R("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tt(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new w(e.pathString)}},cl=function(n){let t="",e="",i="",o="",s="",l=!0,a="https",c=443;if("string"==typeof n){let d=n.indexOf("//");d>=0&&(a=n.substring(0,d-1),n=n.substring(d+2));let u=n.indexOf("/");-1===u&&(u=n.length);let h=n.indexOf("?");-1===h&&(h=n.length),t=n.substring(0,Math.min(u,h)),u<h&&(o=function ll(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let o=e[i];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}t+="/"+o}return t}(n.substring(u,h)));const f=function al(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):R(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,h)));d=t.indexOf(":"),d>=0?(l="https"===a||"wss"===a,c=parseInt(t.substring(d+1),10)):d=t.length;const _=t.slice(0,d);if("localhost"===_.toLowerCase())e="localhost";else if(_.split(".").length<=2)e=_;else{const g=t.indexOf(".");i=t.substring(0,g).toLowerCase(),e=t.substring(g+1),s=i}"ns"in f&&(s=f.ns)}return{host:t,port:c,domain:e,subdomain:i,secure:l,scheme:a,pathString:o,namespace:s}};class tr{constructor(t,e,i,o){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=o}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,p.Wl)(this.snapshot.exportVal())}}class ir{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ii{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,p.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class B{constructor(t,e,i,o){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=o}get key(){return C(this._path)?null:lt(this._path)}get ref(){return new Q(this._repo,this._path)}get _queryIdentifier(){const t=ln(this._queryParams),e=Xe(t);return"{}"===e?"default":e}get _queryObject(){return ln(this._queryParams)}isEqual(t){if(!((t=(0,p.m9)(t))instanceof B))return!1;const e=this._repo===t._repo,i=at(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function eo(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}class Q extends B{constructor(t,e){super(t,e,new mt,!1)}get parent(){const t=Yi(this._path);return null===t?null:new Q(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class w0{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new w(t),i=e0(this.ref,t);return new w0(this._node.getChild(e),i,b)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,o)=>t(new w0(o,e0(this.ref,i),b)))}hasChild(t){const e=new w(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function U(n,t){return(n=(0,p.m9)(n))._checkNotDeleted("ref"),void 0!==t?e0(n._root,t):n._root}function e0(n,t){return null===v((n=(0,p.m9)(n))._path)?qs("child","path",t,!1):Yt("child","path",t,!1),new Q(n._repo,O(n._path,t))}function f0(n,t){(function(n,t){if(".info"===v(t))throw new Error(n+" failed = Can't modify data under /.info/")})("set",(n=(0,p.m9)(n))._path),function(n,t,e,i){i&&void 0===t||le((0,p.gK)(n,"value"),t,e)}("set",t,n._path,!1);const e=new p.BH;return zt(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function Ve(n){n=(0,p.m9)(n);const t=new ii(()=>{}),e=new de(t);return function zs(n,t,e){const i=function Ss(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(d,u)=>{const h=D(d,e);i=i||c0(u,h)});let o=n.syncPointTree_.get(e);o?i=i||c0(o,x()):(o=new En,n.syncPointTree_=n.syncPointTree_.set(e,o));const s=null!=i,l=s?new l0(i,!0,!1):null;return function us(n){return Ee(n.viewCache_)}(bn(o,t,be(n.pendingWriteTree_,t._path),s?l.getNode():y.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(o=>{const s=A(o).withIndex(t._queryParams.getIndex());let l;if(Lt(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())l=ie(n.serverSyncTree_,t._path,s);else{const a=ne(n.serverSyncTree_,t);l=Mn(n.serverSyncTree_,t._path,s,a)}return Z(n.eventQueue_,t._path,l),Re(n.serverSyncTree_,t,e,null,!0),s},o=>(F0(n,"get for query "+(0,p.Wl)(t)+" failed: "+o),Promise.reject(new Error(o))))}(n._repo,n,e).then(i=>new w0(i,new Q(n._repo,n._path),n._queryParams.getIndex()))}class de{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new tr("value",this,new w0(t.snapshotNode,new Q(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new ir(this,t,e):null}matches(t){return t instanceof de&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Qe{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new ir(this,t,e):null}createEvent(t,e){(0,p.hu)(null!=t.childName,"Child events should have a childName.");const i=e0(new Q(e._repo,e._path),t.childName),o=e._queryParams.getIndex();return new tr(t.type,this,new w0(t.snapshotNode,i,o),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Qe&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ye(n,t,e,i){return function ue(n,t,e,i,o){let s;if("object"==typeof i&&(s=void 0,o=i),"function"==typeof i&&(s=i),o&&o.onlyOnce){const c=e,d=(u,h)=>{jt(n._repo,n,a),c(u,h)};d.userCallback=e.userCallback,d.context=e.context,e=d}const l=new ii(e,s||void 0),a="value"===t?new de(l):new Qe(t,l);return function il(n,t,e){let i;i=".info"===v(t._path)?Lt(n.infoSyncTree_,t,e):Lt(n.serverSyncTree_,t,e),qn(n.eventQueue_,t._path,i)}(n._repo,n,a),()=>jt(n._repo,n,a)}(n,"value",t,e,i)}(function _s(n){(0,p.hu)(!Ne,"__referenceConstructor has already been defined"),Ne=n})(Q),function Cs(n){(0,p.hu)(!ke,"__referenceConstructor has already been defined"),ke=n}(Q);const ni={};function sr(n,t,e,i,o){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||J("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),M("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c,d,l=ti(s,o),a=l.repoInfo;typeof process<"u"&&process.env&&(d=process.env.FIREBASE_DATABASE_EMULATOR_HOST),d?(c=!0,s=`http://${d}?ns=${a.namespace}`,l=ti(s,o),a=l.repoInfo):c=!l.repoInfo.secure;const u=o&&c?new W0(W0.OWNER):new Or(n.name,n.options,t);(function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Ue(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Zn(n)}(e))throw new Error((0,p.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",l),C(l.path)||J("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function wl(n,t,e,i){let o=ni[t.name];o||(o={},ni[t.name]=o);let s=o[n.toURLString()];return s&&J("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Qs(n,false,e,i),o[n.toURLString()]=s,s}(a,n,u,new Sr(n.name,e));return new El(h,n)}class El{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Ys(n,t,e){if(n.stats_=rt(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Pe(n.repoInfo_,(i,o,s,l)=>{Qn(n,i,o,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Yn(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,p.Wl)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new v0(n.repoInfo_,t,(i,o,s,l)=>{Qn(n,i,o,s,l)},i=>{Yn(n,i)},i=>{!function Js(n,t){k(t,(e,i)=>{Jt(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function Mr(n,t){const e=n.toString();return nt[e]||(nt[e]=t()),nt[e]}(n.repoInfo_,()=>new ko(n.stats_,n.server_)),n.infoData_=new So,n.infoSyncTree_=new Nn({startListening:(i,o,s,l)=>{let a=[];const c=n.infoData_.getNode(i._path);return c.isEmpty()||(a=ie(n.infoSyncTree_,i._path,c),setTimeout(()=>{l("ok")},0)),a},stopListening:()=>{}}),Jt(n,"connected",!1),n.serverSyncTree_=new Nn({startListening:(i,o,s,l)=>(n.server_.listen(i,s,o,(a,c)=>{const d=l(a,c);Z(n.eventQueue_,i._path,d)}),[]),stopListening:(i,o)=>{n.server_.unlisten(i,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Q(this._repo,x())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function xl(n,t){const e=ni[t];(!e||e[n.key]!==n)&&J(`Database ${t}(${n.repoInfo_}) has already been deleted.`),function zn(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&J("Cannot call "+t+" on a deleted database.")}}function U0(n=(0,Y.Mq)(),t){const e=(0,Y.qX)(n,"database").getImmediate({identifier:t});if(!e._instanceStarted){const i=(0,p.P0)("database");i&&function bl(n,t,e,i={}){(n=(0,p.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&J("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let s;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&J('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new W0(W0.OWNER);else if(i.mockUserToken){const l="string"==typeof i.mockUserToken?i.mockUserToken:(0,p.Sg)(i.mockUserToken,n.app.options.projectId);s=new W0(l)}!function Pl(n,t,e,i){n.repoInfo_=new tt(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(o,t,e,s)}(e,...i)}return e}v0.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},v0.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function Sl(n){(function ui(n){ze=n})(Y.Jn),(0,Y.Xd)(new _r.wA("database",(t,{instanceIdentifier:e})=>sr(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Y.KN)(ci,"1.0.1",n),(0,Y.KN)(ci,"1.0.1","esm2017")}(),(0,Y.KN)("firebase","10.2.0","app");let ri=(()=>{var n;class t{constructor(){this.players={player1:{name:"User"},player2:{name:"Computer"}},this.gameConfig={mode:1,duration:5,difficulty:1},this.activePlayerID=0,this.hostGameURL=""}resetPlayers(){this.players={player1:{name:""},player2:{name:""}}}resetGameConfig(){this.gameConfig={mode:1,duration:1,difficulty:1}}initializeFB(){let o=(0,Y.ZF)({databaseURL:"https://game-of-life-ce-default-rtdb.europe-west1.firebasedatabase.app"});this.fbDatabase=U0(o)}}return(n=t).\u0275fac=function(i){return new(i||n)},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),t})();function kl(n,t){if(1&n&&r._UZ(0,"div",12),2&n){const e=t.index,i=r.oxw().index,o=r.oxw();r.Gre("cell cell-",o.gameGrid[i][e],""),r.hYB("id","game_",i,"_",e,"")}}function Rl(n,t){if(1&n&&(r.TgZ(0,"div")(1,"div",10),r.YNc(2,kl,1,5,"div",11),r.qZA()()),2&n){const e=t.$implicit;r.xp6(2),r.Q6J("ngForOf",e)}}function Ll(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",13)(1,"div",14),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.setMenu(2))}),r._uU(2,"Quick Game"),r.qZA(),r.TgZ(3,"div",14),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.setMenu(3))}),r._uU(4,"Multi Player Game"),r.qZA(),r.TgZ(5,"div",14),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.setMenu(5))}),r._uU(6,"Online Game"),r.qZA(),r.TgZ(7,"div",14),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.setMenu(4))}),r._uU(8,"About"),r.qZA(),r.TgZ(9,"div",14),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.navToPage())}),r._uU(10,"Leader Board"),r.qZA()()}}function Dl(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",15)(1,"div",16),r._uU(2,"- Quick Game -"),r.qZA(),r.TgZ(3,"div",17),r._uU(4,"Player Name: "),r.TgZ(5,"input",18),r.NdJ("ngModelChange",function(o){r.CHM(e);const s=r.oxw();return r.KtG(s.player1Name=o)}),r.qZA()(),r.TgZ(6,"div",19),r._uU(7),r.qZA(),r.TgZ(8,"div",20),r._uU(9,"Generations: "),r.TgZ(10,"span",21),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.duration=5)}),r._uU(11,"500"),r.qZA(),r.TgZ(12,"span",21),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.duration=10)}),r._uU(13,"1,000"),r.qZA(),r.TgZ(14,"span",21),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.duration=20)}),r._uU(15,"2,000"),r.qZA()(),r.TgZ(16,"div",22)(17,"div",14),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return o.difficulty=1,r.KtG(o.navToGame(1))}),r._uU(18,"Easy"),r.qZA(),r.TgZ(19,"div",14),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return o.difficulty=2,r.KtG(o.navToGame(1))}),r._uU(20,"Medium"),r.qZA(),r.TgZ(21,"div",14),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return o.difficulty=3,r.KtG(o.navToGame(1))}),r._uU(22,"Hard"),r.qZA()(),r.TgZ(23,"div",23),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.menu=1)}),r._uU(24,"Back"),r.qZA()()}if(2&n){const e=r.oxw();r.xp6(5),r.Q6J("ngModel",e.player1Name),r.xp6(2),r.Oqu(e.errorMessage),r.xp6(3),r.Gre("menu-button-small-",5==e.duration," p-3"),r.xp6(2),r.Gre("menu-button-small-",10==e.duration," p-3"),r.xp6(2),r.Gre("menu-button-small-",20==e.duration," p-3")}}function Fl(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",24)(1,"div",16),r._uU(2,"- Multi Player -"),r.qZA(),r.TgZ(3,"div",17),r._uU(4,"Player 1: "),r.TgZ(5,"input",25),r.NdJ("ngModelChange",function(o){r.CHM(e);const s=r.oxw();return r.KtG(s.player1Name=o)}),r.qZA()(),r.TgZ(6,"div",26),r._uU(7,"Player 2: "),r.TgZ(8,"input",27),r.NdJ("ngModelChange",function(o){r.CHM(e);const s=r.oxw();return r.KtG(s.player2Name=o)}),r.qZA()(),r.TgZ(9,"div",17),r._uU(10,"Generations: "),r.TgZ(11,"span",21),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.duration=5)}),r._uU(12,"500"),r.qZA(),r.TgZ(13,"span",21),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.duration=10)}),r._uU(14,"1000"),r.qZA(),r.TgZ(15,"span",21),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.duration=20)}),r._uU(16,"2000"),r.qZA()(),r.TgZ(17,"div",28),r._uU(18),r.qZA(),r.TgZ(19,"div",29),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.navToGame(2))}),r._uU(20,"Start"),r.qZA(),r.TgZ(21,"div",14),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.menu=1)}),r._uU(22,"Back"),r.qZA()()}if(2&n){const e=r.oxw();r.xp6(5),r.Q6J("ngModel",e.player1Name),r.xp6(3),r.Q6J("ngModel",e.player2Name),r.xp6(3),r.Gre("menu-button-small-",5==e.duration," p-3"),r.xp6(2),r.Gre("menu-button-small-",10==e.duration," p-3"),r.xp6(2),r.Gre("menu-button-small-",20==e.duration," p-3"),r.xp6(3),r.Oqu(e.errorMessage)}}function Gl(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div")(1,"div",31),r.NdJ("click",function(){r.CHM(e);const o=r.oxw(2);return r.KtG(o.onlineGameMode=1)}),r._uU(2,"Host the Game"),r.qZA(),r.TgZ(3,"div",32),r.NdJ("click",function(){r.CHM(e);const o=r.oxw(2);return r.KtG(o.onlineGameMode=2)}),r._uU(4,"Join the game"),r.qZA(),r.TgZ(5,"div",33),r.NdJ("click",function(){r.CHM(e);const o=r.oxw(2);return r.KtG(o.menu=1)}),r._uU(6,"Back"),r.qZA()()}}function Ul(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div")(1,"div",17),r._uU(2,"Name: "),r.TgZ(3,"input",34),r.NdJ("ngModelChange",function(o){r.CHM(e);const s=r.oxw(3);return r.KtG(s.player1Name=o)}),r.qZA()(),r.TgZ(4,"div",17),r._uU(5,"Generations: "),r.TgZ(6,"span",21),r.NdJ("click",function(){r.CHM(e);const o=r.oxw(3);return r.KtG(o.duration=5)}),r._uU(7,"500"),r.qZA(),r.TgZ(8,"span",21),r.NdJ("click",function(){r.CHM(e);const o=r.oxw(3);return r.KtG(o.duration=10)}),r._uU(9,"1,000"),r.qZA(),r.TgZ(10,"span",21),r.NdJ("click",function(){r.CHM(e);const o=r.oxw(3);return r.KtG(o.duration=20)}),r._uU(11,"2,000"),r.qZA()(),r.TgZ(12,"div",28),r._uU(13),r.qZA(),r.TgZ(14,"div",29),r.NdJ("click",function(){r.CHM(e);const o=r.oxw(3);return r.KtG(o.onlineGame(1))}),r._uU(15,"Start"),r.qZA(),r.TgZ(16,"div",14),r.NdJ("click",function(){r.CHM(e);const o=r.oxw(3);return r.KtG(o.onlineGameMode=0)}),r._uU(17,"Back"),r.qZA()()}if(2&n){const e=r.oxw(3);r.xp6(3),r.Q6J("ngModel",e.player1Name),r.xp6(3),r.Gre("menu-button-small-",5==e.duration," p-3"),r.xp6(2),r.Gre("menu-button-small-",10==e.duration," p-3"),r.xp6(2),r.Gre("menu-button-small-",20==e.duration," p-3"),r.xp6(3),r.Oqu(e.errorMessage)}}function Zl(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div")(1,"div",35)(2,"span"),r._uU(3,"Game ID: "),r.qZA(),r.TgZ(4,"span",36),r._uU(5),r.qZA()(),r.TgZ(6,"div",37),r._uU(7,"Waiting for 2nd player to join..."),r.qZA(),r.TgZ(8,"div",33),r.NdJ("click",function(){r.CHM(e);const o=r.oxw(3);return r.KtG(o.onlineGame(-1))}),r._uU(9,"Quit"),r.qZA()()}if(2&n){const e=r.oxw(3);r.xp6(5),r.Oqu(e.hostGameID)}}function Bl(n,t){if(1&n&&(r.TgZ(0,"div"),r.YNc(1,Ul,18,11,"div",30),r.YNc(2,Zl,10,1,"div",30),r.qZA()),2&n){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",!e.hostGameID),r.xp6(1),r.Q6J("ngIf",e.hostGameID)}}function Hl(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div")(1,"div",17),r._uU(2,"\xa0\xa0 Name: "),r.TgZ(3,"input",34),r.NdJ("ngModelChange",function(o){r.CHM(e);const s=r.oxw(2);return r.KtG(s.player2Name=o)}),r.qZA()(),r.TgZ(4,"div",26),r._uU(5,"Game ID: "),r.TgZ(6,"input",38),r.NdJ("ngModelChange",function(o){r.CHM(e);const s=r.oxw(2);return r.KtG(s.joinGameID=o)}),r.qZA()(),r.TgZ(7,"div",28),r._uU(8),r.qZA(),r.TgZ(9,"div",29),r.NdJ("click",function(){r.CHM(e);const o=r.oxw(2);return r.KtG(o.onlineGame(2))}),r._uU(10,"Join"),r.qZA(),r.TgZ(11,"div",14),r.NdJ("click",function(){r.CHM(e);const o=r.oxw(2);return r.KtG(o.onlineGameMode=0)}),r._uU(12,"Back"),r.qZA()()}if(2&n){const e=r.oxw(2);r.xp6(3),r.Q6J("ngModel",e.player2Name),r.xp6(3),r.Q6J("ngModel",e.joinGameID),r.xp6(2),r.Oqu(e.errorMessage)}}function ql(n,t){if(1&n&&(r.TgZ(0,"div",24)(1,"div",16),r._uU(2,"- Online Game -"),r.qZA(),r.YNc(3,Gl,7,0,"div",30),r.YNc(4,Bl,3,2,"div",30),r.YNc(5,Hl,13,3,"div",30),r.qZA()),2&n){const e=r.oxw();r.xp6(3),r.Q6J("ngIf",0==e.onlineGameMode),r.xp6(1),r.Q6J("ngIf",1==e.onlineGameMode),r.xp6(1),r.Q6J("ngIf",2==e.onlineGameMode)}}function Wl(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",24)(1,"div",39),r._uU(2,"MSc.Project (COMP702) "),r.qZA(),r.TgZ(3,"div",20),r._uU(4,"Submitted By"),r.qZA(),r.TgZ(5,"div",40),r._uU(6,"Neeraj Jain Cherukunnu Jinachandran"),r.qZA(),r.TgZ(7,"div",40),r._uU(8,"201666803"),r.qZA(),r.TgZ(9,"div",41),r._uU(10,"Primary Supervisor"),r.qZA(),r.TgZ(11,"div",40),r._uU(12,"Louwe Kuijer"),r.qZA(),r.TgZ(13,"div",41),r._uU(14,"Secondary Supervisor"),r.qZA(),r.TgZ(15,"div",40),r._uU(16,"Qiyi Tang"),r.qZA(),r.TgZ(17,"div",14),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.menu=1)}),r._uU(18,"Back"),r.qZA()()}}let ar=(()=>{var n;class t{constructor(i,o){this.router=i,this.gameService=o,this.rows=30,this.cols=60,this.menu=1,this.onlineGameMode=0,this.hostGameID="",this.joinGameID="",this.player1Name="",this.player2Name="",this.duration=5,this.difficulty=1,this.buildMaterial=[[[0,-1],[0,0],[0,1]],[[-1,0],[-1,1],[0,-1],[0,1],[1,1]],[[-1,1],[0,-1],[0,1],[1,0],[1,1]],[[0,0],[0,1],[1,0],[1,1]],[[-1,0],[0,-1],[0,1],[1,0]],[[-1,-2],[-1,1],[0,2],[1,-2],[1,2],[2,-1],[2,0],[2,1],[2,2]],[[-6,-4],[-6,-3],[-6,-2],[-6,2],[-6,3],[-6,4],[-4,-6],[-3,-6],[-2,-6],[-4,-1],[-3,-1],[-2,-1],[-4,1],[-3,1],[-2,1],[-4,6],[-3,6],[-2,6],[-1,-4],[-1,-3],[-1,-2],[-1,2],[-1,3],[-1,4],[1,-4],[1,-3],[1,-2],[1,2],[1,3],[1,4],[2,-6],[3,-6],[4,-6],[2,-1],[3,-1],[4,-1],[2,1],[3,1],[4,1],[2,6],[3,6],[4,6],[6,-4],[6,-3],[6,-2],[6,2],[6,3],[6,4]],[[0,0]]],this.errorMessage=""}ngOnInit(){this.gameGrid=this.createEmptyGrid(this.rows,this.cols),this.addRandomCells(),this.addRandomCells(),this.addRandomCells(),this.addRandomCells(),this.playGame(),this.gameService.initializeFB()}createEmptyGrid(i,o){let s=new Array(i);for(let l=0;l<i;l++)s[l]=new Array(o).fill(0);return s}playGame(){clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.runNextGeneration()},800)}runNextGeneration(){Math.floor(12*Math.random())%4==0&&this.addRandomCells(),this.gameGrid=this.calculateNextGeneration(this.gameGrid)}calculateNextGeneration(i){const o=this.createEmptyGrid(this.rows,this.cols);for(let s=0;s<this.rows;s++)for(let l=0;l<this.cols;l++){const a=i[s][l],c=this.countNeighbors(i,s,l);o[s][l]=0===a&&3===c?1:1===a&&(c<2||c>3)?0:a}return o}countNeighbors(i,o,s){let l=0;const a=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(let c=0;c<a.length;c++){const[d,u]=a[c];l+=i[(o+d+this.rows)%this.rows][(s+u+this.cols)%this.cols]}return l}addRandomCells(){var i=Math.floor(Math.random()*(this.rows-16))+8,o=Math.floor(Math.random()*(this.cols-16))+8,s=Math.floor(8*Math.random()),a=1;o>this.cols/2&&(a=-1),this.buildMaterial[s].forEach(c=>{var d=i+c[0],u=o+c[1]*a;this.gameGrid[d][u]=0===this.gameGrid[d][u]?1:0})}setMenu(i){this.menu=i,this.errorMessage=""}navToGame(i){if(1==i)this.gameService.players.player1.name=this.player1Name||"User",this.gameService.players.player2.name="Computer",this.gameService.gameConfig.duration=this.duration,this.gameService.gameConfig.difficulty=this.difficulty,this.gameService.gameConfig.mode=1,this.router.navigateByUrl("game");else{if(2!=i)return;""==this.player1Name?this.errorMessage="Enter player 1 name !":""==this.player2Name?this.errorMessage="Enter player 2 name !":this.player1Name==this.player2Name?this.errorMessage="Use different names":(this.errorMessage="",this.gameService.players.player1.name=this.player1Name,this.gameService.players.player2.name=this.player2Name,this.gameService.gameConfig.duration=this.duration,this.gameService.gameConfig.mode=2,this.router.navigateByUrl("game"))}}onlineGame(i){1==i?""==this.player1Name?this.errorMessage="Enter your name !":(this.errorMessage="",this.hostOnlineGame()):2==i?""==this.player2Name?this.errorMessage="Enter your name !":""==this.joinGameID?this.errorMessage="Enter Game ID !":(this.errorMessage="",this.checkOnlineGame()):-1==i&&(this.hostGameID="",this.joinGameID="",this.errorMessage="")}hostOnlineGame(){this.hostGameID=(new Date).getTime().toString().slice(-9,-3);var i={name:this.player1Name,score:0,status:"",message:"",duration:this.duration},o="games/"+this.hostGameID;f0(U(this.gameService.fbDatabase,o+"/player/1"),i),Ye(U(this.gameService.fbDatabase,o+"/player"),a=>{if(a.exists()){var c=a.val();c[1]&&c[2]&&(this.gameService.players.player1.name=this.player1Name,this.gameService.players.player2.name=c[2].name,this.gameService.gameConfig.duration=this.duration,this.gameService.gameConfig.mode=2,this.gameService.activePlayerID=1,this.gameService.hostGameURL=o,this.router.navigateByUrl("online-game"))}})}checkOnlineGame(){var i="games/"+this.joinGameID;Ve(e0(U(U0()),i+"/player")).then(s=>{if(s.exists()){var l=s.val();0==l.length?this.errorMessage="Wrong Game ID!":l[2]?this.errorMessage="Game room is full!":this.joinOnlineGame(i)}else console.log("No data available")}).catch(s=>{console.error(s)})}joinOnlineGame(i){var o={name:this.player2Name,score:0,status:"",message:"",duration:this.duration};f0(U(this.gameService.fbDatabase,i+"/player/2"),o),Ye(U(this.gameService.fbDatabase,i+"/player"),a=>{if(a.exists()){var c=a.val();c[1]&&c[2]&&(this.gameService.players.player1.name=c[1].name,this.gameService.players.player2.name=this.player2Name,this.gameService.gameConfig.duration=this.duration,this.gameService.gameConfig.mode=2,this.gameService.activePlayerID=2,this.gameService.hostGameURL=i,this.router.navigateByUrl("online-game"))}})}navToPage(){this.router.navigateByUrl("leader-board")}}return(n=t).\u0275fac=function(i){return new(i||n)(r.Y36(E0.F0),r.Y36(ri))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-home"]],decls:16,vars:6,consts:[[1,"main-container","d-flex","flex-column","align-items-center","text-center"],["id","game",1,"game","p-4"],[4,"ngFor","ngForOf"],[1,"home","position-absolute"],[1,"title","my-5","text-uppercase"],[2,"color","#E1113B"],[1,"menu","d-flex","flex-column","align-items-center","text-center","mt-5"],["id","menu-1",4,"ngIf"],["id","menu-2",4,"ngIf"],["id","menu-3",4,"ngIf"],[1,"cell-container"],[3,"class","id",4,"ngFor","ngForOf"],[3,"id"],["id","menu-1"],[1,"menu-button",3,"click"],["id","menu-2"],[1,"menu-title"],[1,"menu-sub-title","pt-3"],["maxlength","10","placeholder","User",1,"menu-input",3,"ngModel","ngModelChange"],[1,"text-danger","menu-sub-title","pt2-3"],[1,"menu-sub-title","pt-4"],[3,"click"],[1,"d-flex","pt-4"],[1,"menu-button","mt-3",3,"click"],["id","menu-3"],["maxlength","10","placeholder","P1",1,"menu-input",3,"ngModel","ngModelChange"],[1,"menu-sub-title"],["maxlength","10","placeholder","P2",1,"menu-input",3,"ngModel","ngModelChange"],[1,"text-danger","menu-sub-title","pt-3"],[1,"menu-button","mt-4",3,"click"],[4,"ngIf"],[1,"menu-button","m-3","mt-5",3,"click"],[1,"menu-button","m-3",3,"click"],[1,"menu-button","mt-5",3,"click"],["maxlength","10","placeholder","Enter Your Name",1,"menu-input",3,"ngModel","ngModelChange"],[1,"mt-5"],[1,"text-primary","pt-4"],[1,"text-success","menu-sub-title","py-3"],["maxlength","6","placeholder","Enter Game ID",1,"menu-input",3,"ngModel","ngModelChange"],[1,"pb-3"],[1,"menu-sub-title","text-light"],[1,"menu-sub-title","pt-5"]],template:function(i,o){1&i&&(r.TgZ(0,"div",0)(1,"div",1),r.YNc(2,Rl,3,1,"div",2),r.qZA(),r.TgZ(3,"div",3)(4,"div")(5,"div",4)(6,"span",5),r._uU(7,"Cellular"),r.qZA(),r._uU(8,"Empire"),r.qZA()(),r.TgZ(9,"div",6),r.YNc(10,Ll,11,0,"div",7),r.YNc(11,Dl,25,11,"div",8),r.YNc(12,Fl,23,12,"div",9),r.YNc(13,ql,6,3,"div",9),r.YNc(14,Wl,19,0,"div",9),r._UZ(15,"div"),r.qZA()()()),2&i&&(r.xp6(2),r.Q6J("ngForOf",o.gameGrid),r.xp6(8),r.Q6J("ngIf",1==o.menu),r.xp6(1),r.Q6J("ngIf",2==o.menu),r.xp6(1),r.Q6J("ngIf",3==o.menu),r.xp6(1),r.Q6J("ngIf",5==o.menu),r.xp6(1),r.Q6J("ngIf",4==o.menu))},dependencies:[q.sg,q.O5,I0.Fj,I0.JJ,I0.nD,I0.On],styles:[".main-container[_ngcontent-%COMP%]{color:#fff;overflow-x:hidden}.title[_ngcontent-%COMP%]{padding-top:25%;font-size:3rem}.game-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.game[_ngcontent-%COMP%]{height:648px;width:1248px;z-index:-1}.cell-container[_ngcontent-%COMP%]{display:flex}.cell[_ngcontent-%COMP%]{width:18px;height:18px;border-radius:5px;margin:1px;transition:background-color 1s ease-in-out}.cell-1[_ngcontent-%COMP%]{background-color:#121b29}@keyframes _ngcontent-%COMP%_new-cell{}.menu[_ngcontent-%COMP%]{font-size:1.5rem}.menu-title[_ngcontent-%COMP%]{color:#8c99b6;font-size:2rem}.menu-sub-title[_ngcontent-%COMP%]{color:#525c6e;font-size:1rem}.menu-button[_ngcontent-%COMP%]{margin:20px;padding:10px 20px;transition:all .3s ease-in-out;border:1px solid white;border-radius:10px}.menu-button[_ngcontent-%COMP%]:hover{scale:1.1;cursor:pointer!important}.menu-button-small-true[_ngcontent-%COMP%]{color:#fff}.menu-button-small-false[_ngcontent-%COMP%]:hover{scale:1.1;cursor:pointer!important}.menu-button-small-false[_ngcontent-%COMP%]{color:#525c6e}.menu-input[_ngcontent-%COMP%]{margin:15px;background:transparent;border:0px;border-bottom:1px solid white;color:#fff}"]}),t})();const Kl=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],Vl=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],Ql=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];function he(n){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function m(n,t,e){return(t=function Jl(n){var t=function Yl(n,t){if("object"!==he(n)||null===n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var i=e.call(n,t||"default");if("object"!==he(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"===he(t)?t:String(t)}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}let I=(()=>{class n{static addClass(e,i){e&&i&&(e.classList?e.classList.add(i):e.className+=" "+i)}static addMultipleClasses(e,i){if(e&&i)if(e.classList){let o=i.trim().split(" ");for(let s=0;s<o.length;s++)e.classList.add(o[s])}else{let o=i.split(" ");for(let s=0;s<o.length;s++)e.className+=" "+o[s]}}static removeClass(e,i){e&&i&&(e.classList?e.classList.remove(i):e.className=e.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(e,i){return!(!e||!i)&&(e.classList?e.classList.contains(i):new RegExp("(^| )"+i+"( |$)","gi").test(e.className))}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(i){return i!==e})}static find(e,i){return Array.from(e.querySelectorAll(i))}static findSingle(e,i){return this.isElement(e)?e.querySelector(i):null}static index(e){let i=e.parentNode.childNodes,o=0;for(var s=0;s<i.length;s++){if(i[s]==e)return o;1==i[s].nodeType&&o++}return-1}static indexWithinGroup(e,i){let o=e.parentNode?e.parentNode.childNodes:[],s=0;for(var l=0;l<o.length;l++){if(o[l]==e)return s;o[l].attributes&&o[l].attributes[i]&&1==o[l].nodeType&&s++}return-1}static appendOverlay(e,i,o="self"){"self"!==o&&e&&i&&this.appendChild(e,i)}static alignOverlay(e,i,o="self",s=!0){e&&i&&(s&&(e.style.minWidth=`${n.getOuterWidth(i)}px`),"self"===o?this.relativePosition(e,i):this.absolutePosition(e,i))}static relativePosition(e,i){const o=F=>{if(F)return"relative"===getComputedStyle(F).getPropertyValue("position")?F:o(F.parentElement)},s=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),l=i.offsetHeight,a=i.getBoundingClientRect(),c=this.getWindowScrollTop(),d=this.getWindowScrollLeft(),u=this.getViewport(),f=o(e)?.getBoundingClientRect()||{top:-1*c,left:-1*d};let _,g;a.top+l+s.height>u.height?(_=a.top-f.top-s.height,e.style.transformOrigin="bottom",a.top+_<0&&(_=-1*a.top)):(_=l+a.top-f.top,e.style.transformOrigin="top");const P=a.left+s.width-u.width;g=s.width>u.width?-1*(a.left-f.left):P>0?a.left-f.left-P:a.left-f.left,e.style.top=_+"px",e.style.left=g+"px"}static absolutePosition(e,i){const o=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=o.height,l=o.width,a=i.offsetHeight,c=i.offsetWidth,d=i.getBoundingClientRect(),u=this.getWindowScrollTop(),h=this.getWindowScrollLeft(),f=this.getViewport();let _,g;d.top+a+s>f.height?(_=d.top+u-s,e.style.transformOrigin="bottom",_<0&&(_=u)):(_=a+d.top+u,e.style.transformOrigin="top"),g=d.left+l>f.width?Math.max(0,d.left+h+c-l):d.left+h,e.style.top=_+"px",e.style.left=g+"px"}static getParents(e,i=[]){return null===e.parentNode?i:this.getParents(e.parentNode,i.concat([e.parentNode]))}static getScrollableParents(e){let i=[];if(e){let o=this.getParents(e);const s=/(auto|scroll)/,l=a=>{let c=window.getComputedStyle(a,null);return s.test(c.getPropertyValue("overflow"))||s.test(c.getPropertyValue("overflowX"))||s.test(c.getPropertyValue("overflowY"))};for(let a of o){let c=1===a.nodeType&&a.dataset.scrollselectors;if(c){let d=c.split(",");for(let u of d){let h=this.findSingle(a,u);h&&l(h)&&i.push(h)}}9!==a.nodeType&&l(a)&&i.push(a)}}return i}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementDimensions(e){let i={};return e.style.visibility="hidden",e.style.display="block",i.width=e.offsetWidth,i.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",i}static scrollInView(e,i){let o=getComputedStyle(e).getPropertyValue("borderTopWidth"),s=o?parseFloat(o):0,l=getComputedStyle(e).getPropertyValue("paddingTop"),a=l?parseFloat(l):0,c=e.getBoundingClientRect(),u=i.getBoundingClientRect().top+document.body.scrollTop-(c.top+document.body.scrollTop)-s-a,h=e.scrollTop,f=e.clientHeight,_=this.getOuterHeight(i);u<0?e.scrollTop=h+u:u+_>f&&(e.scrollTop=h+u-f+_)}static fadeIn(e,i){e.style.opacity=0;let o=+new Date,s=0,l=function(){s=+e.style.opacity.replace(",",".")+((new Date).getTime()-o)/i,e.style.opacity=s,o=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(l)||setTimeout(l,16))};l()}static fadeOut(e,i){var o=1,a=50/i;let c=setInterval(()=>{(o-=a)<=0&&(o=0,clearInterval(c)),e.style.opacity=o},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,i){var o=Element.prototype;return(o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||function(l){return-1!==[].indexOf.call(document.querySelectorAll(l),this)}).call(e,i)}static getOuterWidth(e,i){let o=e.offsetWidth;if(i){let s=getComputedStyle(e);o+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return o}static getHorizontalPadding(e){let i=getComputedStyle(e);return parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)}static getHorizontalMargin(e){let i=getComputedStyle(e);return parseFloat(i.marginLeft)+parseFloat(i.marginRight)}static innerWidth(e){let i=e.offsetWidth,o=getComputedStyle(e);return i+=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight),i}static width(e){let i=e.offsetWidth,o=getComputedStyle(e);return i-=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight),i}static getInnerHeight(e){let i=e.offsetHeight,o=getComputedStyle(e);return i+=parseFloat(o.paddingTop)+parseFloat(o.paddingBottom),i}static getOuterHeight(e,i){let o=e.offsetHeight;if(i){let s=getComputedStyle(e);o+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return o}static getHeight(e){let i=e.offsetHeight,o=getComputedStyle(e);return i-=parseFloat(o.paddingTop)+parseFloat(o.paddingBottom)+parseFloat(o.borderTopWidth)+parseFloat(o.borderBottomWidth),i}static getWidth(e){let i=e.offsetWidth,o=getComputedStyle(e);return i-=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight)+parseFloat(o.borderLeftWidth)+parseFloat(o.borderRightWidth),i}static getViewport(){let e=window,i=document,o=i.documentElement,s=i.getElementsByTagName("body")[0];return{width:e.innerWidth||o.clientWidth||s.clientWidth,height:e.innerHeight||o.clientHeight||s.clientHeight}}static getOffset(e){var i=e.getBoundingClientRect();return{top:i.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:i.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,i){let o=e.parentNode;if(!o)throw"Can't replace element";return o.replaceChild(i,e)}static getUserAgent(){if(navigator&&this.isClient())return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,i){if(this.isElement(i))i.appendChild(e);else{if(!(i&&i.el&&i.el.nativeElement))throw"Cannot append "+i+" to "+e;i.el.nativeElement.appendChild(e)}}static removeChild(e,i){if(this.isElement(i))i.removeChild(e);else{if(!i.el||!i.el.nativeElement)throw"Cannot remove "+e+" from "+i;i.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let i=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let i=document.createElement("div");i.className="p-scrollbar-measure",document.body.appendChild(i);let o=i.offsetWidth-i.clientWidth;return document.body.removeChild(i),this.calculatedScrollbarWidth=o,o}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let i=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=i,i}static invokeElementMethod(e,i,o){e[i].apply(e,o)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:i[1]||"",version:i[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return!e||null===e.offsetParent}static isVisible(e){return e&&null!=e.offsetParent}static isExist(e){return null!==e&&typeof e<"u"&&e.nodeName&&e.parentNode}static focus(e,i){e&&document.activeElement!==e&&e.focus(i)}static getFocusableElements(e){let i=n.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),o=[];for(let s of i)(s.offsetWidth||s.offsetHeight||s.getClientRects().length)&&o.push(s);return o}static getNextFocusableElement(e,i=!1){const o=n.getFocusableElements(e);let s=0;if(o&&o.length>0){const l=o.indexOf(o[0].ownerDocument.activeElement);i?s=-1==l||0===l?o.length-1:l-1:-1!=l&&l!==o.length-1&&(s=l+1)}return o[s]}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(e,i){if(!e)return null;switch(e){case"document":return document;case"window":return window;case"@next":return i?.nextElementSibling;case"@prev":return i?.previousElementSibling;case"@parent":return i?.parentElement;case"@grandparent":return i?.parentElement.parentElement;default:const o=typeof e;if("string"===o)return document.querySelector(e);if("object"===o&&e.hasOwnProperty("nativeElement"))return this.isExist(e.nativeElement)?e.nativeElement:void 0;const l=(a=e)&&a.constructor&&a.call&&a.apply?e():e;return l&&9===l.nodeType||this.isExist(l)?l:null}var a}static isClient(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}static getAttribute(e,i){if(e){const o=e.getAttribute(i);return isNaN(o)?"true"===o||"false"===o?"true"===o:o:+o}}}return m(n,"zindex",1e3),m(n,"calculatedScrollbarWidth",null),m(n,"calculatedScrollbarHeight",null),m(n,"browser",void 0),n})();class zl{constructor(t,e=(()=>{})){m(this,"element",void 0),m(this,"listener",void 0),m(this,"scrollableParents",void 0),this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=I.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}var oi=function jl(){let n=[];const o=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:o,set:(s,l,a)=>{l&&(l.style.zIndex=String(((s,l)=>{let a=n.length>0?n[n.length-1]:{key:s,value:l},c=a.value+(a.key===s?0:l)+1;return n.push({key:s,value:c}),c})(s,a)))},clear:s=>{s&&((s=>{n=n.filter(l=>l.value!==s)})(o(s)),s.style.zIndex="")},getCurrent:()=>n.length>0?n[n.length-1].value:0}}(),$l=H(8645);let L=(()=>{class n{}return m(n,"STARTS_WITH","startsWith"),m(n,"CONTAINS","contains"),m(n,"NOT_CONTAINS","notContains"),m(n,"ENDS_WITH","endsWith"),m(n,"EQUALS","equals"),m(n,"NOT_EQUALS","notEquals"),m(n,"IN","in"),m(n,"LESS_THAN","lt"),m(n,"LESS_THAN_OR_EQUAL_TO","lte"),m(n,"GREATER_THAN","gt"),m(n,"GREATER_THAN_OR_EQUAL_TO","gte"),m(n,"BETWEEN","between"),m(n,"IS","is"),m(n,"IS_NOT","isNot"),m(n,"BEFORE","before"),m(n,"AFTER","after"),m(n,"DATE_IS","dateIs"),m(n,"DATE_IS_NOT","dateIsNot"),m(n,"DATE_BEFORE","dateBefore"),m(n,"DATE_AFTER","dateAfter"),n})(),ea=(()=>{var n;class t{constructor(){m(this,"ripple",!1),m(this,"overlayOptions",{}),m(this,"filterMatchModeOptions",{text:[L.STARTS_WITH,L.CONTAINS,L.NOT_CONTAINS,L.ENDS_WITH,L.EQUALS,L.NOT_EQUALS],numeric:[L.EQUALS,L.NOT_EQUALS,L.LESS_THAN,L.LESS_THAN_OR_EQUAL_TO,L.GREATER_THAN,L.GREATER_THAN_OR_EQUAL_TO],date:[L.DATE_IS,L.DATE_IS_NOT,L.DATE_BEFORE,L.DATE_AFTER]}),m(this,"translation",{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",pending:"Pending",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",emptyFilterMessage:"No results found",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"{page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",previousPageLabel:"Previous Page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left"}}),m(this,"zIndex",{modal:1100,overlay:1e3,menu:1e3,tooltip:1100}),m(this,"translationSource",new $l.x),m(this,"translationObserver",this.translationSource.asObservable())}getTranslation(i){return this.translation[i]}setTranslation(i){this.translation={...this.translation,...i},this.translationSource.next(this.translation)}}return n=t,m(t,"\u0275fac",function(i){return new(i||n)}),m(t,"\u0275prov",r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),t})(),ur=(()=>{var n;class t{get disabled(){return this._disabled}set disabled(i){this._disabled=i,this.deactivate()}constructor(i,o,s,l,a,c){m(this,"platformId",void 0),m(this,"el",void 0),m(this,"zone",void 0),m(this,"config",void 0),m(this,"renderer",void 0),m(this,"changeDetector",void 0),m(this,"tooltipPosition",void 0),m(this,"tooltipEvent","hover"),m(this,"appendTo",void 0),m(this,"positionStyle",void 0),m(this,"tooltipStyleClass",void 0),m(this,"tooltipZIndex",void 0),m(this,"escape",!0),m(this,"showDelay",void 0),m(this,"hideDelay",void 0),m(this,"life",void 0),m(this,"positionTop",void 0),m(this,"positionLeft",void 0),m(this,"autoHide",!0),m(this,"fitContent",!0),m(this,"hideOnEscape",!0),m(this,"text",void 0),m(this,"tooltipOptions",void 0),m(this,"_tooltipOptions",{tooltipLabel:null,tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",positionStyle:null,tooltipStyleClass:null,tooltipZIndex:"auto",escape:!0,disabled:null,showDelay:null,hideDelay:null,positionTop:null,positionLeft:null,life:null,autoHide:!0,hideOnEscape:!0}),m(this,"_disabled",void 0),m(this,"container",void 0),m(this,"styleClass",void 0),m(this,"tooltipText",void 0),m(this,"showTimeout",void 0),m(this,"hideTimeout",void 0),m(this,"active",void 0),m(this,"mouseEnterListener",void 0),m(this,"mouseLeaveListener",void 0),m(this,"containerMouseleaveListener",void 0),m(this,"clickListener",void 0),m(this,"focusListener",void 0),m(this,"blurListener",void 0),m(this,"scrollHandler",void 0),m(this,"resizeListener",void 0),this.platformId=i,this.el=o,this.zone=s,this.config=l,this.renderer=a,this.changeDetector=c}ngAfterViewInit(){(0,q.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onInputClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("click",this.clickListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let i=this.getTarget(this.el.nativeElement);i.addEventListener("focus",this.focusListener),i.addEventListener("blur",this.blurListener)}})}ngOnChanges(i){i.tooltipPosition&&this.setOption({tooltipPosition:i.tooltipPosition.currentValue}),i.tooltipEvent&&this.setOption({tooltipEvent:i.tooltipEvent.currentValue}),i.appendTo&&this.setOption({appendTo:i.appendTo.currentValue}),i.positionStyle&&this.setOption({positionStyle:i.positionStyle.currentValue}),i.tooltipStyleClass&&this.setOption({tooltipStyleClass:i.tooltipStyleClass.currentValue}),i.tooltipZIndex&&this.setOption({tooltipZIndex:i.tooltipZIndex.currentValue}),i.escape&&this.setOption({escape:i.escape.currentValue}),i.showDelay&&this.setOption({showDelay:i.showDelay.currentValue}),i.hideDelay&&this.setOption({hideDelay:i.hideDelay.currentValue}),i.life&&this.setOption({life:i.life.currentValue}),i.positionTop&&this.setOption({positionTop:i.positionTop.currentValue}),i.positionLeft&&this.setOption({positionLeft:i.positionLeft.currentValue}),i.disabled&&this.setOption({disabled:i.disabled.currentValue}),i.text&&(this.setOption({tooltipLabel:i.text.currentValue}),this.active&&(i.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),i.autoHide&&this.setOption({autoHide:i.autoHide.currentValue}),i.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...i.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}isAutoHide(){return this.getOption("autoHide")}onMouseEnter(i){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(i){(this.isAutoHide()||!(I.hasClass(i.target,"p-tooltip")||I.hasClass(i.target,"p-tooltip-arrow")||I.hasClass(i.target,"p-tooltip-text")||I.hasClass(i.relatedTarget,"p-tooltip")||I.hasClass(i.relatedTarget,"p-tooltip-text")||I.hasClass(i.relatedTarget,"p-tooltip-arrow")))&&this.deactivate()}onFocus(i){this.activate()}onBlur(i){this.deactivate()}onInputClick(i){this.deactivate()}onPressEscape(){this.hideOnEscape&&this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let i=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},i)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let i=document.createElement("div");i.className="p-tooltip-arrow",this.container.appendChild(i),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?I.appendChild(this.container,this.el.nativeElement):I.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content"),this.isAutoHide()||this.bindContainerMouseleaveListener()}bindContainerMouseleaveListener(){this.containerMouseleaveListener||(this.containerMouseleaveListener=this.renderer.listen(this.container??this.container.nativeElement,"mouseleave",o=>{this.deactivate()}))}unbindContainerMouseleaveListener(){this.containerMouseleaveListener&&(this.bindContainerMouseleaveListener(),this.containerMouseleaveListener=null)}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),I.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?oi.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&oi.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let i=this.el.nativeElement.getBoundingClientRect();return{left:i.left+I.getWindowScrollLeft(),top:i.top+I.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let i=this.getHostOffset(),o=i.left+I.getOuterWidth(this.el.nativeElement),s=i.top+(I.getOuterHeight(this.el.nativeElement)-I.getOuterHeight(this.container))/2;this.container.style.left=o+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let i=this.getHostOffset(),o=i.left-I.getOuterWidth(this.container),s=i.top+(I.getOuterHeight(this.el.nativeElement)-I.getOuterHeight(this.container))/2;this.container.style.left=o+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let i=this.getHostOffset(),o=i.left+(I.getOuterWidth(this.el.nativeElement)-I.getOuterWidth(this.container))/2,s=i.top-I.getOuterHeight(this.container);this.container.style.left=o+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let i=this.getHostOffset(),o=i.left+(I.getOuterWidth(this.el.nativeElement)-I.getOuterWidth(this.container))/2,s=i.top+I.getOuterHeight(this.el.nativeElement);this.container.style.left=o+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}setOption(i){this._tooltipOptions={...this._tooltipOptions,...i}}getOption(i){return this._tooltipOptions[i]}getTarget(i){return I.hasClass(i,"p-inputwrapper")?I.findSingle(i,"input"):i}preAlign(i){this.container.style.left="-999px",this.container.style.top="-999px";let o="p-tooltip p-component p-tooltip-"+i;this.container.className=this.getOption("tooltipStyleClass")?o+" "+this.getOption("tooltipStyleClass"):o}isOutOfBounds(){let i=this.container.getBoundingClientRect(),o=i.top,s=i.left,l=I.getOuterWidth(this.container),a=I.getOuterHeight(this.container),c=I.getViewport();return s+l>c.width||s<0||o<0||o+a>c.height}onWindowResize(i){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new zl(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let i=this.getTarget(this.el.nativeElement);i.removeEventListener("focus",this.focusListener),i.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):I.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.unbindContainerMouseleaveListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&oi.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return n=t,m(t,"\u0275fac",function(i){return new(i||n)(r.Y36(r.Lbi),r.Y36(r.SBq),r.Y36(r.R0b),r.Y36(ea),r.Y36(r.Qsj),r.Y36(r.sBO))}),m(t,"\u0275dir",r.lG2({type:n,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],hostBindings:function(i,o){1&i&&r.NdJ("keydown.escape",function(l){return o.onPressEscape(l)},!1,r.evT)},inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",autoHide:"autoHide",fitContent:"fitContent",hideOnEscape:"hideOnEscape",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[r.TTD]})),t})(),ta=(()=>{var n;class t{}return n=t,m(t,"\u0275fac",function(i){return new(i||n)}),m(t,"\u0275mod",r.oAB({type:n})),m(t,"\u0275inj",r.cJS({imports:[q.ez]})),t})();function ia(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",54),r.NdJ("click",function(){const s=r.CHM(e).index,l=r.oxw();return r.KtG(l.selectBuildMode(s))}),r._UZ(1,"i"),r.qZA()}if(2&n){const e=t.$implicit,i=t.index,o=r.oxw();r.Gre("tool-l tool-l-",o.buildMode==i," d-flex justify-content-center align-items-center"),r.s9C("pTooltip",e),r.xp6(1),r.Gre("tool-text-l pi ",o.buildMaterialIcon[i],"")}}function na(n,t){if(1&n){const e=r.EpF();r.ynx(0),r.TgZ(1,"div",54),r.NdJ("click",function(){r.CHM(e);const o=r.oxw().index,s=r.oxw();return r.KtG(s.selectActionTool(o+7))}),r._UZ(2,"i"),r.qZA(),r.BQk()}if(2&n){const e=r.oxw(),i=e.index,o=e.$implicit,s=r.oxw();r.xp6(1),r.Gre("tool-l tool-l-",s.buildMode==i+7,"\n                                d-flex justify-content-center align-items-center"),r.s9C("pTooltip",o),r.xp6(1),r.Gre("tool-text-l pi ",s.actionToolIcon[i],"")}}function ra(n,t){if(1&n){const e=r.EpF();r.ynx(0),r.TgZ(1,"div",54),r.NdJ("click",function(){r.CHM(e);const o=r.oxw().index,s=r.oxw();return r.KtG(s.selectActionTool(o+7))}),r._UZ(2,"i"),r.qZA(),r.BQk()}if(2&n){const e=r.oxw(),i=e.$implicit,o=e.index,s=r.oxw();r.xp6(1),r.Gre("tool-l tool-l-disable-",0==s.buildHistory.length,"\n                                d-flex justify-content-center align-items-center"),r.s9C("pTooltip",i),r.xp6(1),r.Gre("tool-text-l pi ",s.actionToolIcon[o],"")}}function oa(n,t){if(1&n&&(r.ynx(0),r.YNc(1,na,3,7,"ng-container",55),r.YNc(2,ra,3,7,"ng-container",55),r.BQk()),2&n){const e=t.index;r.xp6(1),r.Q6J("ngIf",0==e),r.xp6(1),r.Q6J("ngIf",e>0)}}function sa(n,t){if(1&n&&(r.TgZ(0,"div",56),r._uU(1),r.qZA()),2&n){const e=r.oxw();r.xp6(1),r.hij(" ",e.lockCounter," ")}}function la(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",59),r.NdJ("click",function(){const s=r.CHM(e).index,l=r.oxw().index,a=r.oxw();return r.KtG(a.toggleCell(l,s))}),r.qZA()}if(2&n){const e=t.index,i=r.oxw().index;r.hYB("id","game_",i,"_",e,"")}}function aa(n,t){if(1&n&&(r.TgZ(0,"div")(1,"div",57),r.YNc(2,la,1,2,"div",58),r.qZA()()),2&n){const e=r.oxw();r.xp6(2),r.Q6J("ngForOf",e.counter(e.cols/2))}}function ca(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"i",62),r.NdJ("click",function(){r.CHM(e);const o=r.oxw(2);return r.KtG(o.unblockSection(1))}),r.qZA()}}function da(n,t){if(1&n&&(r.TgZ(0,"div",60),r.YNc(1,ca,1,0,"i",61),r.qZA()),2&n){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",!e.player1buildComplete)}}function ua(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",64),r.NdJ("click",function(){const s=r.CHM(e).index,l=r.oxw().index,a=r.oxw();return r.KtG(a.toggleCell(l,s+a.cols/2))}),r.qZA()}if(2&n){const e=t.index,i=r.oxw().index,o=r.oxw();r.hYB("id","game_",i,"_",e+o.cols/2,"")}}function ha(n,t){if(1&n&&(r.TgZ(0,"div")(1,"div",57),r.YNc(2,ua,1,2,"div",63),r.qZA()()),2&n){const e=r.oxw();r.xp6(2),r.Q6J("ngForOf",e.counter(e.cols/2))}}function pa(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"i",62),r.NdJ("click",function(){r.CHM(e);const o=r.oxw(2);return r.KtG(o.unblockSection(2))}),r.qZA()}}function fa(n,t){if(1&n&&(r.TgZ(0,"div",60),r.YNc(1,pa,1,0,"i",61),r.qZA()),2&n){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",!e.player2buildComplete)}}function _a(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",65),r.NdJ("click",function(){const s=r.CHM(e).index,l=r.oxw();return r.KtG(l.selectBuildMode(s))}),r._UZ(1,"i"),r.qZA()}if(2&n){const e=t.$implicit,i=t.index,o=r.oxw();r.Gre("tool-r tool-r-",o.buildMode==i," d-flex justify-content-center align-items-center"),r.s9C("pTooltip",e),r.xp6(1),r.Gre("tool-text-r pi ",o.buildMaterialIcon[i],"")}}function ma(n,t){if(1&n){const e=r.EpF();r.ynx(0),r.TgZ(1,"div",65),r.NdJ("click",function(){r.CHM(e);const o=r.oxw().index,s=r.oxw();return r.KtG(s.selectActionTool(o+7))}),r._UZ(2,"i"),r.qZA(),r.BQk()}if(2&n){const e=r.oxw(),i=e.index,o=e.$implicit,s=r.oxw();r.xp6(1),r.Gre("tool-r tool-r-",s.buildMode==i+7,"\n                                d-flex justify-content-center align-items-center"),r.s9C("pTooltip",o),r.xp6(1),r.Gre("tool-text-r pi ",s.actionToolIcon[i],"")}}function ga(n,t){if(1&n){const e=r.EpF();r.ynx(0),r.TgZ(1,"div",65),r.NdJ("click",function(){r.CHM(e);const o=r.oxw().index,s=r.oxw();return r.KtG(s.selectActionTool(o+7))}),r._UZ(2,"i"),r.qZA(),r.BQk()}if(2&n){const e=r.oxw(),i=e.$implicit,o=e.index,s=r.oxw();r.xp6(1),r.Gre("tool-r tool-r-disable-",0==s.buildHistory.length,"\n                                d-flex justify-content-center align-items-center"),r.s9C("pTooltip",i),r.xp6(1),r.Gre("tool-text-r pi ",s.actionToolIcon[o],"")}}function ya(n,t){if(1&n&&(r.ynx(0),r.YNc(1,ma,3,7,"ng-container",55),r.YNc(2,ga,3,7,"ng-container",55),r.BQk()),2&n){const e=t.index;r.xp6(1),r.Q6J("ngIf",0==e),r.xp6(1),r.Q6J("ngIf",e>0)}}function va(n,t){if(1&n&&(r.TgZ(0,"div",66),r._uU(1),r.qZA()),2&n){const e=r.oxw();r.xp6(1),r.hij(" ",e.lockCounter," ")}}function Ca(n,t){1&n&&(r.TgZ(0,"div"),r._uU(1," Draw "),r.qZA())}function Ta(n,t){if(1&n&&(r.TgZ(0,"div")(1,"div"),r._uU(2," Winner "),r.qZA(),r.TgZ(3,"div"),r._uU(4),r.qZA()()),2&n){const e=r.oxw(2);r.xp6(4),r.Oqu(e.player1Name)}}function Pa(n,t){if(1&n&&(r.TgZ(0,"div")(1,"div"),r._uU(2,"Winner"),r.qZA(),r.TgZ(3,"div"),r._uU(4),r.qZA()()),2&n){const e=r.oxw(2);r.xp6(4),r.Oqu(e.player2Name)}}function xa(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",67)(1,"div",68)(2,"div",69)(3,"div",70),r.YNc(4,Ca,2,0,"div",55),r.YNc(5,Ta,5,1,"div",55),r.YNc(6,Pa,5,1,"div",55),r.qZA(),r.TgZ(7,"div",71)(8,"div",69)(9,"div",72),r._uU(10),r.qZA(),r.TgZ(11,"div",20)(12,"div"),r._uU(13,"Score"),r.qZA(),r._UZ(14,"div",73),r.TgZ(15,"div"),r._uU(16),r.qZA()(),r.TgZ(17,"div",20)(18,"div"),r._uU(19,"Born"),r.qZA(),r._UZ(20,"div",73),r.TgZ(21,"div"),r._uU(22),r.qZA()(),r.TgZ(23,"div",20)(24,"div"),r._uU(25,"Death"),r.qZA(),r._UZ(26,"div",73),r.TgZ(27,"div"),r._uU(28),r.qZA()()(),r._UZ(29,"div",74),r.TgZ(30,"div",69)(31,"div",72),r._uU(32),r.qZA(),r.TgZ(33,"div",20)(34,"div"),r._uU(35,"Score"),r.qZA(),r._UZ(36,"div",73),r.TgZ(37,"div"),r._uU(38),r.qZA()(),r.TgZ(39,"div",20)(40,"div"),r._uU(41,"Born"),r.qZA(),r._UZ(42,"div",73),r.TgZ(43,"div"),r._uU(44),r.qZA()(),r.TgZ(45,"div",20)(46,"div"),r._uU(47,"Death"),r.qZA(),r._UZ(48,"div",73),r.TgZ(49,"div"),r._uU(50),r.qZA()()()(),r.TgZ(51,"div",75)(52,"div",76),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.navToPage())}),r._uU(53,"Leaderboard"),r.qZA(),r.TgZ(54,"div",76),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return o.resetGame(),r.KtG(o.initPage())}),r._uU(55,"Play Again"),r.qZA(),r.TgZ(56,"div",76),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.menuAction(5))}),r._uU(57,"Main Menu"),r.qZA()()()()()}if(2&n){const e=r.oxw();r.xp6(4),r.Q6J("ngIf",e.count1Display==e.count2Display),r.xp6(1),r.Q6J("ngIf",e.count1Display>e.count2Display),r.xp6(1),r.Q6J("ngIf",e.count1Display<e.count2Display),r.xp6(4),r.Oqu(e.player1Name),r.xp6(6),r.Oqu(e.count1Display),r.xp6(6),r.Oqu(e.born1),r.xp6(6),r.Oqu(e.death1),r.xp6(4),r.Oqu(e.player2Name),r.xp6(6),r.Oqu(e.count2Display),r.xp6(6),r.Oqu(e.born2),r.xp6(6),r.Oqu(e.death2)}}let wa=(()=>{var n;class t{constructor(i,o){this.router=i,this.gameService=o,this.buildMode=0,this.buildMaterial=[[[0,-1],[0,0],[0,1]],[[-1,0],[-1,1],[0,-1],[0,1],[1,1]],[[-1,1],[0,-1],[0,1],[1,0],[1,1]],[[0,0],[0,1],[1,0],[1,1]],[[-1,0],[0,-1],[0,1],[1,0]],[[-1,-2],[-1,1],[0,2],[1,-2],[1,2],[2,-1],[2,0],[2,1],[2,2]],[[-6,-4],[-6,-3],[-6,-2],[-6,2],[-6,3],[-6,4],[-4,-6],[-3,-6],[-2,-6],[-4,-1],[-3,-1],[-2,-1],[-4,1],[-3,1],[-2,1],[-4,6],[-3,6],[-2,6],[-1,-4],[-1,-3],[-1,-2],[-1,2],[-1,3],[-1,4],[1,-4],[1,-3],[1,-2],[1,2],[1,3],[1,4],[2,-6],[3,-6],[4,-6],[2,-1],[3,-1],[4,-1],[2,1],[3,1],[4,1],[2,6],[3,6],[4,6],[6,-4],[6,-3],[6,-2],[6,2],[6,3],[6,4]],[[0,0]]],this.actionTool=["Edit","Undo","Reset"],this.actionToolIcon=["pi-pencil","pi-undo","pi-times"],this.buildMaterialName=["Blinker","Glider Up","Glider Down","Farm","House","Spaceships","Castle"],this.buildMaterialIcon=["pi-eye","pi-send rotate","pi-send rotate-90","pi-table","pi-home","pi-share-alt","pi-shield"],this.count1Display=0,this.count2Display=0,this.born1=0,this.born2=0,this.death1=0,this.death2=0,this.rows=40,this.cols=90,this.game1Active=!0,this.game2Active=!0,this.generationCount=0,this.generationLimitDefault=500,this.generationLimit=this.generationLimitDefault,this.generationLimitUpgrade=500,this.controlButton=0,this.menuButton=["pi-play","pi-replay","pi-volume-up","pi-question-circle","pi-sign-out","1x"],this.gameSpeed={"0.5x":1e3,"1x":500,"2x":250,"5x":100},this.buildHistory=[],this.player1Lock=!1,this.player2Lock=!1,this.lockCounterDefault=60,this.lockCounter=this.lockCounterDefault,this.player1Name="User",this.player2Name="Computer",this.showResult=!1,this.happySmileyArray=["happy.svg","happy_smile.svg","happy_love.svg"],this.sadSmileyArray=["sad.svg","sad_cry.svg","sad_angry.svg"],this.player1Smiley=this.happySmileyArray[0],this.player2Smiley=this.happySmileyArray[0],this.assetPath="../../../../assets/",this.player1Message="Select the block to unlock "+this.lockCounterDefault+" Sec",this.player2Message="Select the block to unlock "+this.lockCounterDefault+" Sec",this.player1buildComplete=!1,this.player2buildComplete=!1}ngOnInit(){this.initPage(),this.initializeFB()}initPage(){this.player1Name=this.gameService.players.player1.name,this.player2Name=this.gameService.players.player2.name,this.generationLimitDefault=100*this.gameService.gameConfig.duration,this.generationLimit=this.generationLimitDefault,this.generationLimitUpgrade=this.generationLimitDefault,this.gameGrid=this.createEmptyGrid(this.rows,this.cols),setTimeout(()=>{this.initGame()},1e3),setTimeout(()=>{this.playAudio("audio0")},3e3)}initializeFB(){let o=(0,Y.ZF)({databaseURL:"https://game-of-life-ce-default-rtdb.europe-west1.firebasedatabase.app"});this.fbDatabase=U0(o)}initGame(){if(1==this.gameService.gameConfig.mode){var i=[];1==this.gameService.gameConfig.difficulty&&(i=Kl),2==this.gameService.gameConfig.difficulty&&(i=Vl),3==this.gameService.gameConfig.difficulty&&(i=Ql),this.gameGrid=JSON.parse(JSON.stringify(i)),this.updateGrid(this.gameGrid),this.countLivingCells(this.gameGrid),this.player1Message="Build your empire",this.player2Message="Build your empire"}else this.player1Lock=!0,this.player2Lock=!0}unblockSection(i){1==i&&(this.player1Message="Build your empire !",this.buildGame1(1),this.player1Lock=!1,this.player2Lock=!0),2==i&&(this.player2Message="Build your empire !",this.buildGame1(2),this.player1Lock=!0,this.player2Lock=!1)}buildGame1(i){clearInterval(this.lockIntervalId),this.lockIntervalId=setInterval(()=>{this.lockCounter<=0?(this.lockCounter=this.lockCounterDefault,clearInterval(this.lockIntervalId),1==i?this.player1buildComplete=!0:2==i&&(this.player2buildComplete=!0),this.buildComplete()):this.lockCounter--},1e3)}buildComplete(){clearInterval(this.lockIntervalId),this.player1Lock=!0,this.player2Lock=!0}createEmptyGrid(i,o){let s=new Array(i);for(let l=0;l<i;l++)s[l]=new Array(o).fill(0);return s}counter(i){return new Array(i)}pauseAudio(){}selectActionTool(i){this.playAudio("audio5"),7==i?(this.buildMode=i,this.editBuild(i)):8==i?this.undoLastBuild():9==i&&this.resetBuild()}editBuild(i){this.selectBuildMode(i)}undoLastBuild(){var i=this.buildHistory[this.buildHistory.length-1];this.toggleCell(i[1],i[2],i[0],!0),this.buildHistory.pop()}resetBuild(){}selectBuildMode(i){this.buildMode!=i&&(this.buildMode=i,this.playAudio("audio5"))}toggleCell(i,o,s=this.buildMode,l=!1){if(1!=this.controlButton){var c=1;o>this.cols/2&&(c=-1),this.buildMaterial[s].forEach(d=>{var u=i+d[0],h=o+d[1]*c;this.gameGrid[u][h]=0===this.gameGrid[u][h]?1:0;var f=document.getElementById("game_"+u+"_"+h),_=Math.floor(40*Math.random()+16).toString(16),g=Math.floor(80*Math.random()+16).toString(16),P=Math.floor(100*Math.random()+16).toString(16);f.style.backgroundColor=h<this.cols/2?0===this.gameGrid[u][h]?"#1D2738":"#E7"+g+_:0===this.gameGrid[u][h]?"#1D2738":"#"+P+"B9"+g}),this.countLivingCells(this.gameGrid),0==l&&(this.playAudio("audio1"),this.buildHistory.push([s,i,o]))}}countLivingCells(i){let o=0,s=0;for(let l=0;l<this.rows;l++)for(let a=0;a<this.cols;a++)1===i[l][a]&&(a<this.cols/2?o++:s++);this.count1Display-o>20&&this.count2Display-s>20&&this.playAudio("audio3"),this.generationCount%10==0&&this.smileyUpdates(o,s),this.count1Display=o,this.count2Display=s}smileyUpdates(i,o){if("pi-pause"==this.menuButton[0]){var s=i-o;0==s?(this.player1Smiley=this.happySmileyArray[0],this.player2Smiley=this.happySmileyArray[0]):s>0?s>80?(this.player1Smiley=this.happySmileyArray[2],this.player2Smiley=this.sadSmileyArray[2],this.tempMessageUpdate("I love this game!","I want to win!")):s>40?(this.player1Smiley=this.happySmileyArray[1],this.player2Smiley=this.sadSmileyArray[1],this.tempMessageUpdate("Nice!","Don't laugh, I am gonna win this game!")):(this.player1Smiley=this.happySmileyArray[0],this.player2Smiley=this.sadSmileyArray[0],this.tempMessageUpdate("Hehe...","Don't laugh!")):s<0&&(s<-80?(this.player1Smiley=this.sadSmileyArray[2],this.player2Smiley=this.happySmileyArray[2],this.tempMessageUpdate("I want to win!","I love this game!")):s<-40?(this.player1Smiley=this.sadSmileyArray[1],this.player2Smiley=this.happySmileyArray[1],this.tempMessageUpdate("Ohh no I am loosing!","Nice!")):(this.player1Smiley=this.sadSmileyArray[0],this.player2Smiley=this.happySmileyArray[0],this.tempMessageUpdate("Don't laugh, I am gonna win this game!","Hehe...")))}}tempMessageUpdate(i,o){i&&(this.player1Message=i),o&&(this.player2Message=o)}updateGrid(i){for(let d=0;d<this.rows;d++)for(let u=0;u<this.cols;u++){let h=document.getElementById("game_"+d+"_"+u);var o=Math.floor(40*Math.random()+16).toString(16),s=Math.floor(80*Math.random()+16).toString(16),l=Math.floor(100*Math.random()+16).toString(16);h.style.backgroundColor=u<this.cols/2?0===i[d][u]?"#1D2738":"#E7"+s+o:0===i[d][u]?"#1D2738":"#"+l+"B9"+s}}calculateNextGeneration(i){const o=this.createEmptyGrid(this.rows,this.cols);for(let s=0;s<this.rows;s++)for(let l=0;l<this.cols;l++){const a=i[s][l],c=this.countNeighbors(i,s,l);0===a&&3===c?(o[s][l]=1,l<this.cols/2?this.born2++:this.born1++):1===a&&(c<2||c>3)?(o[s][l]=0,l<this.cols/2?this.death2++:this.death1++):o[s][l]=a}return o}countNeighbors(i,o,s){let l=0;const a=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(let c=0;c<a.length;c++){const[d,u]=a[c];l+=i[(o+d+this.rows)%this.rows][(s+u+this.cols)%this.cols]}return l}runNextGeneration(){this.generationCount>=this.generationLimit?(this.pauseGame(),this.gameEnd()):(this.generationCount++,this.updateProgressBar(this.generationCount),this.gameGrid=this.calculateNextGeneration(this.gameGrid),this.updateGrid(this.gameGrid),this.countLivingCells(this.gameGrid))}gameEnd(){this.showResult=!0,this.updateScore(this.player1Name,this.count1Display,this.count2Display),this.updateScore(this.player2Name,this.count2Display,this.count1Display)}updateProgressBar(i){var s=i/(1*this.generationLimit)*15;document.getElementById("progress-bar-fill").style.width=s+"rem"}playGame(){this.generationCount>=this.generationLimit&&(this.generationLimit+=this.generationLimitUpgrade),clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.runNextGeneration()},this.gameSpeed[this.menuButton[5]]),this.playAudio("audio2"),this.buildHistory=[]}pauseGame(){clearInterval(this.intervalId)}resetGame(){this.pauseGame(),this.generationCount=0,this.generationLimit=this.generationLimitDefault,this.game1Active=!0,this.game2Active=!0,this.gameGrid=this.createEmptyGrid(this.rows,this.cols),this.updateGrid(this.gameGrid),this.buildHistory=[],this.born1=this.born2=this.death1=this.death2=0,this.showResult=!1,this.count1Display=this.count2Display=0,this.player1buildComplete=this.player2buildComplete=!1,this.menuButton[0]="pi-play"}playAudio(i){const o=document.getElementById(i);o.volume=.2,o.play()}menuAction(i){if(1==i)"pi-play"==this.menuButton[0]?(this.menuButton[0]="pi-pause",this.playGame()):(this.menuButton[0]="pi-play",this.pauseGame());else if(2==i)this.resetGame();else if(3==i)this.menuButton[2]="pi-volume-up"==this.menuButton[2]?"pi-volume-off":"pi-volume-up";else if(4==i)this.gameEnd();else if(5==i)this.router.navigateByUrl("home");else{if(6!=i)return;"0.5x"==this.menuButton[5]?this.menuButton[5]="1x":"1x"==this.menuButton[5]?this.menuButton[5]="2x":"2x"==this.menuButton[5]?this.menuButton[5]="5x":"5x"==this.menuButton[5]&&(this.menuButton[5]="0.5x"),"pi-pause"==this.menuButton[0]&&(this.pauseGame(),this.playGame())}}updateScore(i,o,s){const l=U(U0());var c=0,d=0,u=0;o==s&&(d=1),o>s&&(c=1),o<s&&(u=1),Ve(e0(l,"users/"+i)).then(h=>{if(h.exists()){var f=h.val(),_=f.gameStat;_[0]+=1,_[1]+=c,_[2]+=d,_[3]+=u,this.writeFB(i,o>f.score?o:f.score,_)}else console.log("No data available"),this.writeFB(i,o,[1,c,d,u])}).catch(h=>{console.error(h)})}writeFB(i,o,s){f0(U(this.fbDatabase,"users/"+i),{name:i,score:o,gameStat:s})}navToPage(){this.router.navigateByUrl("leader-board")}}return(n=t).\u0275fac=function(i){return new(i||n)(r.Y36(E0.F0),r.Y36(ri))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-game-board"]],decls:90,vars:37,consts:[["id","main-container",1,"m-auto","main-container","p-4"],[1,"d-flex","justify-content-between","align-items-center","pb-4"],[1,"title","text-uppercase"],[1,"title1"],[1,"title2"],[1,"d-flex","flex-column","align-items-center"],[1,"controls"],[1,"d-flex","justify-content-center"],["pTooltip","play/ Pause","tooltipPosition","bottom",1,"control-button",3,"click"],["pTooltip","Restart","tooltipPosition","bottom",1,"control-button","tooltipP",3,"click"],["pTooltip","Speed","tooltipPosition","bottom",1,"control-button","tooltipP",2,"font-weight","600",3,"click"],[1,"pi"],["pTooltip","Sound","tooltipPosition","bottom",1,"control-button","tooltipP",3,"click"],["pTooltip","Help","tooltipPosition","bottom",1,"control-button","tooltipP",3,"click"],["pTooltip","Quit","tooltipPosition","bottom",1,"control-button","tooltipP",3,"click"],[1,"game-container"],[1,"stat-container","pb-1"],[1,"d-flex","justify-content-between","pb-2"],[1,"d-flex","player-details","align-items-center",2,"width","680px"],[1,"player-message","d-flex","align-items-center","p-2","px-3"],[1,"d-flex"],[1,"playe1-avatar"],["alt","",3,"src"],[1,"px-3","ms-3","player-text-l"],[1,"px-3"],[1,"text-danger","score"],[1,""],[1,"text-center","pb-3",2,"width","270px"],[1,"progress-container","d-flex"],["id","progress-bar-fill",1,"progress-bar-fill"],[1,"m-auto",2,"font-size","0.8rem","z-index","1"],[1,"d-flex","player-details","align-items-center","justify-content-end",2,"width","680px"],[1,"px-3","text-end"],[1,"player-message","d-flex","justify-content-end","align-items-center","p-2","px-3"],[1,"px-3","me-3","player-text-r","text-end"],[1,"playe2-avatar"],[1,"m-auto"],[1,"tool-container-l","p-3"],["id","mdoe","tooltipPosition","right",3,"class","pTooltip","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["class","tool-l d-flex justify-content-center align-items-center",4,"ngIf"],["id","game",1,"game","d-flex","p-4"],["class","game-lock d-flex justify-content-center align-items-center",4,"ngIf"],[1,"p-1"],[1,"tool-container-r","p-3"],["id","mdoe","tooltipPosition","left",3,"class","pTooltip","click",4,"ngFor","ngForOf"],["class","tool-r d-flex justify-content-center align-items-center",4,"ngIf"],["class","result-container d-flex justify-content-center align-items-center",4,"ngIf"],["id","audio1","src","assets/mixkit-extra-bonus-in-a-video-game-2045.wav"],["id","audio2","src","assets/mixkit-drums-of-war-call-2780.wav"],["id","audio3","src","assets/mixkit-arcade-mechanical-bling-210.wav"],["id","audio4","src","assets/mixkit-winning-a-coin-video-game-2069.wav"],["id","audio5","src","assets/mixkit-game-ball-tap-2073.wav"],["id","audio0","src","assets/war theme.ogg"],["id","mdoe","tooltipPosition","right",3,"pTooltip","click"],[4,"ngIf"],[1,"tool-l","d-flex","justify-content-center","align-items-center"],[1,"cell-container"],["class","cell cell-l",3,"id","click",4,"ngFor","ngForOf"],[1,"cell","cell-l",3,"id","click"],[1,"game-lock","d-flex","justify-content-center","align-items-center"],["class","pi pi-lock position-absolute",3,"click",4,"ngIf"],[1,"pi","pi-lock","position-absolute",3,"click"],["class","cell cell-r",3,"id","click",4,"ngFor","ngForOf"],[1,"cell","cell-r",3,"id","click"],["id","mdoe","tooltipPosition","left",3,"pTooltip","click"],[1,"tool-r","d-flex","justify-content-center","align-items-center"],[1,"result-container","d-flex","justify-content-center","align-items-center"],[1,"result-card","p-5"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"title","d-flex","flex-column","text-center","text-danger"],[1,"d-flex","result-details"],[1,"p-3","text-danger"],[1,"p-3"],[1,"m-5","result-card-seperator"],[1,"d-flex","pb-4"],[1,"result-card-button","p-4",3,"click"]],template:function(i,o){1&i&&(r.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),r._uU(4,"Cellular"),r.qZA(),r.TgZ(5,"span",4),r._uU(6,"Empire"),r.qZA()(),r.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),r.NdJ("click",function(){return o.menuAction(1)}),r._UZ(11,"i"),r.qZA(),r.TgZ(12,"div",9),r.NdJ("click",function(){return o.menuAction(2)}),r._UZ(13,"i"),r.qZA(),r.TgZ(14,"div",10),r.NdJ("click",function(){return o.menuAction(6)}),r.TgZ(15,"i",11),r._uU(16),r.qZA()(),r.TgZ(17,"div",12),r.NdJ("click",function(){return o.menuAction(3)}),r._UZ(18,"i"),r.qZA(),r.TgZ(19,"div",13),r.NdJ("click",function(){return o.menuAction(4)}),r._UZ(20,"i"),r.qZA(),r.TgZ(21,"div",14),r.NdJ("click",function(){return o.menuAction(5)}),r._UZ(22,"i"),r.qZA()()()()(),r.TgZ(23,"div",15)(24,"div",16)(25,"div",17)(26,"div",18)(27,"div",19)(28,"div",20)(29,"div",21),r._UZ(30,"img",22),r.qZA()(),r.TgZ(31,"div",23),r._uU(32),r.qZA()(),r.TgZ(33,"div",24)(34,"div"),r._uU(35),r.qZA(),r.TgZ(36,"div",25),r._uU(37),r.qZA()()(),r.TgZ(38,"div",26)(39,"div",5)(40,"div",27),r._uU(41),r.qZA(),r.TgZ(42,"div")(43,"div",28),r._UZ(44,"div",29),r.TgZ(45,"div",30),r._uU(46),r.qZA()()()()(),r.TgZ(47,"div",31)(48,"div",32)(49,"div"),r._uU(50),r.qZA(),r.TgZ(51,"div",25),r._uU(52),r.qZA()(),r.TgZ(53,"div",33)(54,"div",34),r._uU(55),r.qZA(),r.TgZ(56,"div",20)(57,"div",35),r._UZ(58,"img",22),r.qZA()()()()()(),r.TgZ(59,"div",36)(60,"div",20)(61,"div",37),r.YNc(62,ia,2,7,"div",38),r._UZ(63,"hr"),r.YNc(64,oa,3,2,"ng-container",39),r._UZ(65,"hr"),r.YNc(66,sa,2,1,"div",40),r.qZA(),r.TgZ(67,"div",41)(68,"div")(69,"div"),r.YNc(70,aa,3,1,"div",39),r.qZA(),r.YNc(71,da,2,1,"div",42),r.qZA(),r._UZ(72,"div",43),r.TgZ(73,"div")(74,"div"),r.YNc(75,ha,3,1,"div",39),r.qZA(),r.YNc(76,fa,2,1,"div",42),r.qZA()(),r.TgZ(77,"div",44),r.YNc(78,_a,2,7,"div",45),r._UZ(79,"hr"),r.YNc(80,ya,3,2,"ng-container",39),r._UZ(81,"hr"),r.YNc(82,va,2,1,"div",46),r.qZA()()()()(),r.YNc(83,xa,58,11,"div",47),r._UZ(84,"audio",48)(85,"audio",49)(86,"audio",50)(87,"audio",51)(88,"audio",52)(89,"audio",53)),2&i&&(r.xp6(11),r.Gre("pi ",o.menuButton[0],""),r.xp6(2),r.Gre("pi ",o.menuButton[1],""),r.xp6(3),r.hij(" ",o.menuButton[5]," "),r.xp6(2),r.Gre("pi ",o.menuButton[2],""),r.xp6(2),r.Gre("pi ",o.menuButton[3],""),r.xp6(2),r.Gre("pi ",o.menuButton[4],""),r.xp6(8),r.Q6J("src",o.assetPath+o.player1Smiley,r.LSH),r.xp6(2),r.hij(" ",o.player1Message," "),r.xp6(3),r.Oqu(o.player1Name),r.xp6(2),r.hij("00",o.count1Display,""),r.xp6(4),r.hij(" Generataion:",o.generationLimit," "),r.xp6(5),r.Oqu(o.generationCount),r.xp6(4),r.Oqu(o.player2Name),r.xp6(2),r.hij("00",o.count2Display,""),r.xp6(3),r.hij(" ",o.player2Message," "),r.xp6(3),r.Q6J("src",o.assetPath+o.player2Smiley,r.LSH),r.xp6(4),r.Q6J("ngForOf",o.buildMaterialName),r.xp6(2),r.Q6J("ngForOf",o.actionTool),r.xp6(2),r.Q6J("ngIf",o.player2Lock&&1!=o.controlButton),r.xp6(4),r.Q6J("ngForOf",o.counter(o.rows)),r.xp6(1),r.Q6J("ngIf",o.player1Lock&&"pi-play"==o.menuButton[0]),r.xp6(4),r.Q6J("ngForOf",o.counter(o.rows)),r.xp6(1),r.Q6J("ngIf",o.player2Lock&&"pi-play"==o.menuButton[0]),r.xp6(2),r.Q6J("ngForOf",o.buildMaterialName),r.xp6(2),r.Q6J("ngForOf",o.actionTool),r.xp6(2),r.Q6J("ngIf",o.player1Lock&&1!=o.controlButton),r.xp6(1),r.Q6J("ngIf",o.showResult))},dependencies:[q.sg,q.O5,ur],styles:[".cell-container[_ngcontent-%COMP%]{display:flex}.cell[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:5px;border:1px solid #121b29;animation-duration:1s;cursor:pointer;background-color:#1d2738}.cell-l[_ngcontent-%COMP%]:hover{background-color:#e73e3988}.cell-r[_ngcontent-%COMP%]:hover{background-color:#4cb93188}.main-container[_ngcontent-%COMP%]{width:1708px}.title[_ngcontent-%COMP%]{font-size:1.5rem}.title1[_ngcontent-%COMP%]{color:#e1113b}.title2[_ngcontent-%COMP%]{color:#fff}.menu-button[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{background:#E1113B!important}.game-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.game-lock[_ngcontent-%COMP%]{height:100%;width:100%;background:rgba(0,0,0,.3333333333);position:relative;z-index:1;top:-100%;border-radius:5px;color:#fff}.game-lock[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]{font-size:3rem}.pi-lock[_ngcontent-%COMP%]:hover{scale:1.1}.control-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:0 0 0 1.5rem;width:55px;height:55px;border-radius:50%;color:#f0f8ff;box-shadow:-3px -3px 4px #171e2c,3px 3px 5px 2px #000000d6,inset 0 0 #000,inset 0 0 #171e2c;transition:box-shadow .3s ease-in}.control-button[_ngcontent-%COMP%]:hover{box-shadow:0 0 #171e2c,0 0 #000000d6,inset 5px 5px 2px #000,inset -1px -1px 4px 1px #171e2c}.stat-container[_ngcontent-%COMP%]{color:#f5f5f5}.score[_ngcontent-%COMP%]{font-size:1.5rem}.playe1-avatar[_ngcontent-%COMP%]{height:40px;width:40px;background:#e73e39;border-radius:5px;margin:5px}.playe2-avatar[_ngcontent-%COMP%]{height:40px;width:40px;background:#4CB931;border-radius:5px;margin:5px}.player-message[_ngcontent-%COMP%]{width:500px;box-shadow:inset 3px 3px 4px #2223,inset -4px -3px 4px -5px #6666;border-radius:10px;background-color:#121b29;font-size:.8rem;color:#6c83a5}.player-text-l[_ngcontent-%COMP%]{border-left:1px solid}.player-text-r[_ngcontent-%COMP%]{border-right:1px solid}.player-card-l[_ngcontent-%COMP%]{border-right:1px solid white}.player-card-r[_ngcontent-%COMP%]{border-left:1px solid white}.progress-container[_ngcontent-%COMP%]{width:15rem;height:1.2rem;background-color:#1d2738;border-radius:.3rem;overflow:hidden}.progress-bar-fill[_ngcontent-%COMP%]{height:1.2rem;width:.5rem;background-color:#e1113b;border-radius:.3rem;position:absolute;z-index:0}.progress-bar-1x[_ngcontent-%COMP%]{width:4rem;z-index:1;text-align:end}.progress-bar-2x[_ngcontent-%COMP%]{width:8rem;z-index:1;text-align:end}.progress-label[_ngcontent-%COMP%]{height:1rem;width:1rem;padding:3px;border:1px solid white;border-radius:.3rem}.game[_ngcontent-%COMP%]{background-color:#121b29}.tool-container-l[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#1d2738;border-radius:10px 0 0 10px}.tool-container-r[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#1d2738;border-radius:0 10px 10px 0}.tool-l[_ngcontent-%COMP%], .tool-r[_ngcontent-%COMP%]{height:50px;width:50px;color:#f0f8ff;border-radius:10px}.tool-l-disable-true[_ngcontent-%COMP%], .tool-r-disable-true[_ngcontent-%COMP%]{color:#384a65!important}.tool-l-true[_ngcontent-%COMP%]{color:#e73e39;box-shadow:inset 3px 3px 6px #0000004f,inset -4px -3px 4px -5px #6666}.tool-r-true[_ngcontent-%COMP%]{color:#4cb931;box-shadow:inset 3px 3px 6px #0000004f,inset -4px -3px 4px -5px #6666}.tool-l[_ngcontent-%COMP%]:hover{color:#e73e39}.tool-r[_ngcontent-%COMP%]:hover{color:#4cb931}.hover-pointer[_ngcontent-%COMP%]{position:absolute;width:45px;height:45px;border-radius:5px;border:1px solid rgba(130,130,130,.4509803922);cursor:pointer;z-index:0}.result-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;z-index:10;top:0;background-color:#000a}.result-card[_ngcontent-%COMP%]{width:60%;height:60%;background-color:#121b29;border-radius:10px;color:#fff}.title[_ngcontent-%COMP%]{font-size:3rem}.result-details[_ngcontent-%COMP%]{color:#384a65}.result-card-button[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s}.result-card-button[_ngcontent-%COMP%]:hover{scale:1.1}.result-card-seperator[_ngcontent-%COMP%]{border:2px solid #384A65;height:8rem}.rotate-45[_ngcontent-%COMP%]{transform:rotate(45deg)}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-135[_ngcontent-%COMP%]{transform:rotate(135deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-225[_ngcontent-%COMP%]{transform:rotate(225deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-315[_ngcontent-%COMP%]{transform:rotate(315deg)}"]}),t})(),Ia=(()=>{var n;class t{}return(n=t).\u0275fac=function(i){return new(i||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-landing"]],decls:2,vars:0,template:function(i,o){1&i&&(r.TgZ(0,"p"),r._uU(1,"landing works!"),r.qZA())}}),t})();function Ea(n,t){if(1&n&&(r.TgZ(0,"tr",11)(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td"),r._uU(6),r.qZA(),r.TgZ(7,"td"),r._uU(8),r.qZA(),r.TgZ(9,"td"),r._uU(10),r.qZA(),r.TgZ(11,"td"),r._uU(12),r.qZA(),r.TgZ(13,"td"),r._uU(14),r.qZA()()),2&n){const e=t.$implicit,i=t.index;r.xp6(2),r.Oqu(i+1),r.xp6(2),r.Oqu(e[0]),r.xp6(2),r.Oqu(e[1]),r.xp6(2),r.Oqu(e[2][0]),r.xp6(2),r.Oqu(e[2][1]),r.xp6(2),r.Oqu(e[2][2]),r.xp6(2),r.Oqu(e[2][3])}}let ba=(()=>{var n;class t{constructor(i){this.router=i,this.playersList={},this.scores=[]}ngOnInit(){this.initializeFB(),this.getScores()}initializeFB(){(0,Y.ZF)({databaseURL:"https://game-of-life-ce-default-rtdb.europe-west1.firebasedatabase.app"})}getScores(){Ve(e0(U(U0()),"users")).then(o=>{o.exists()?(this.playersList=o.val(),this.sortScores()):console.log("No data available")}).catch(o=>{console.error(o)})}sortScores(){var i=[];for(let o in this.playersList)i.push([this.playersList[o].name,this.playersList[o].score,this.playersList[o].gameStat]);i.sort(function(o,s){return s[1]-o[1]}),this.scores=i}navToPage(){this.router.navigateByUrl("home")}}return(n=t).\u0275fac=function(i){return new(i||n)(r.Y36(E0.F0))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-leader-board"]],decls:31,vars:1,consts:[[1,"main-container"],[1,"title","text-uppercase","text-center","pt-5"],[1,"title1"],[1,"title2"],[1,"title","text-uppercase","text-center","pt-3","pb-4"],[1,"title3"],[1,"text-center","pt-3","pb-4"],[1,"back-button","text-light",3,"click"],[1,"list-container","d-flex","justify-content-center","px-5","pb-5","pt-2"],[1,"text-center"],["class","m-2 text-center",4,"ngFor","ngForOf"],[1,"m-2","text-center"]],template:function(i,o){1&i&&(r.TgZ(0,"div",0)(1,"div",1)(2,"span",2),r._uU(3,"Cellular"),r.qZA(),r.TgZ(4,"span",3),r._uU(5,"Empire"),r.qZA()(),r.TgZ(6,"div",4)(7,"span",5),r._uU(8,"Leader Board"),r.qZA()(),r.TgZ(9,"div",6)(10,"span",7),r.NdJ("click",function(){return o.navToPage()}),r._uU(11,"Back to Main Menu"),r.qZA()(),r.TgZ(12,"div",8)(13,"table")(14,"thead",9)(15,"th"),r._uU(16,"Rank"),r.qZA(),r.TgZ(17,"th"),r._uU(18,"Name"),r.qZA(),r.TgZ(19,"th"),r._uU(20,"High Score"),r.qZA(),r.TgZ(21,"th"),r._uU(22,"Games Played"),r.qZA(),r.TgZ(23,"th"),r._uU(24,"Win"),r.qZA(),r.TgZ(25,"th"),r._uU(26,"Draw"),r.qZA(),r.TgZ(27,"th"),r._uU(28,"Lose"),r.qZA()(),r.TgZ(29,"tbody"),r.YNc(30,Ea,15,7,"tr",10),r.qZA()()()()),2&i&&(r.xp6(30),r.Q6J("ngForOf",o.scores))},dependencies:[q.sg],styles:[".main-containr[_ngcontent-%COMP%]{color:#fff!important}.title[_ngcontent-%COMP%]{font-size:2rem}.title3[_ngcontent-%COMP%]{color:#384a65}.list-container[_ngcontent-%COMP%]{width:100%}.list-item[_ngcontent-%COMP%]{height:3rem;width:80rem}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:1.5rem 4rem;color:#fff!important}tr[_ngcontent-%COMP%]{background:#1D2738;border:8px solid #081120;border-radius:10px!important}.back-button[_ngcontent-%COMP%]{cursor:pointer;scale:1.1;margin:20px;padding:10px 20px;transition:all .3s ease-in-out;border:1px solid white;border-radius:10px}.back-button[_ngcontent-%COMP%]:hover{scale:1.2}"]}),t})();function Sa(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",49),r.NdJ("click",function(){const s=r.CHM(e).index,l=r.oxw();return r.KtG(l.selectBuildMode(s))}),r._UZ(1,"i"),r.qZA()}if(2&n){const e=t.$implicit,i=t.index,o=r.oxw();r.Gre("tool-l tool-l-",o.buildMode==i," d-flex justify-content-center align-items-center"),r.s9C("pTooltip",e),r.xp6(1),r.Gre("tool-text-l pi ",o.buildMaterialIcon[i],"")}}function Oa(n,t){if(1&n){const e=r.EpF();r.ynx(0),r.TgZ(1,"div",49),r.NdJ("click",function(){r.CHM(e);const o=r.oxw().index,s=r.oxw();return r.KtG(s.selectActionTool(o+7))}),r._UZ(2,"i"),r.qZA(),r.BQk()}if(2&n){const e=r.oxw(),i=e.index,o=e.$implicit,s=r.oxw();r.xp6(1),r.Gre("tool-l tool-l-",s.buildMode==i+7,"\n                                d-flex justify-content-center align-items-center"),r.s9C("pTooltip",o),r.xp6(1),r.Gre("tool-text-l pi ",s.actionToolIcon[i],"")}}function Aa(n,t){if(1&n){const e=r.EpF();r.ynx(0),r.TgZ(1,"div",49),r.NdJ("click",function(){r.CHM(e);const o=r.oxw().index,s=r.oxw();return r.KtG(s.selectActionTool(o+7,1))}),r._UZ(2,"i"),r.qZA(),r.BQk()}if(2&n){const e=r.oxw(),i=e.$implicit,o=e.index,s=r.oxw();r.xp6(1),r.Gre("tool-l tool-l-disable-",0==s.buildHistory.length,"\n                                d-flex justify-content-center align-items-center"),r.s9C("pTooltip",i),r.xp6(1),r.Gre("tool-text-l pi ",s.actionToolIcon[o],"")}}function Na(n,t){if(1&n&&(r.ynx(0),r.YNc(1,Oa,3,7,"ng-container",50),r.YNc(2,Aa,3,7,"ng-container",50),r.BQk()),2&n){const e=t.index;r.xp6(1),r.Q6J("ngIf",0==e),r.xp6(1),r.Q6J("ngIf",e>0)}}function Ma(n,t){if(1&n&&(r.TgZ(0,"div",51),r._uU(1),r.qZA()),2&n){const e=r.oxw();r.xp6(1),r.hij(" ",e.lockCounter," ")}}function ka(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",54),r.NdJ("click",function(){const s=r.CHM(e).index,l=r.oxw().index,a=r.oxw();return r.KtG(a.toggleCell(l,s))}),r.qZA()}if(2&n){const e=t.index,i=r.oxw().index;r.hYB("id","game_",i,"_",e,"")}}function Ra(n,t){if(1&n&&(r.TgZ(0,"div")(1,"div",52),r.YNc(2,ka,1,2,"div",53),r.qZA()()),2&n){const e=r.oxw();r.xp6(2),r.Q6J("ngForOf",e.counter(e.cols/2))}}function La(n,t){if(1&n&&(r.TgZ(0,"div",55)(1,"i",56),r._uU(2),r.qZA()()),2&n){const e=r.oxw();r.xp6(2),r.hij(" ",1==e.activePlayerID?e.gameStartCounter:"","")}}function Da(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",58),r.NdJ("click",function(){const s=r.CHM(e).index,l=r.oxw().index,a=r.oxw();return r.KtG(a.toggleCell(l,s+a.cols/2))}),r.qZA()}if(2&n){const e=t.index,i=r.oxw().index,o=r.oxw();r.hYB("id","game_",i,"_",e+o.cols/2,"")}}function Fa(n,t){if(1&n&&(r.TgZ(0,"div")(1,"div",52),r.YNc(2,Da,1,2,"div",57),r.qZA()()),2&n){const e=r.oxw();r.xp6(2),r.Q6J("ngForOf",e.counter(e.cols/2))}}function Ga(n,t){if(1&n&&(r.TgZ(0,"div",55)(1,"i",56),r._uU(2),r.qZA()()),2&n){const e=r.oxw();r.xp6(2),r.hij(" ",2==e.activePlayerID?e.gameStartCounter:"","")}}function Ua(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",59),r.NdJ("click",function(){const s=r.CHM(e).index,l=r.oxw();return r.KtG(l.selectBuildMode(s))}),r._UZ(1,"i"),r.qZA()}if(2&n){const e=t.$implicit,i=t.index,o=r.oxw();r.Gre("tool-r tool-r-",o.buildMode==i," d-flex justify-content-center align-items-center"),r.s9C("pTooltip",e),r.xp6(1),r.Gre("tool-text-r pi ",o.buildMaterialIcon[i],"")}}function Za(n,t){if(1&n){const e=r.EpF();r.ynx(0),r.TgZ(1,"div",59),r.NdJ("click",function(){r.CHM(e);const o=r.oxw().index,s=r.oxw();return r.KtG(s.selectActionTool(o+7))}),r._UZ(2,"i"),r.qZA(),r.BQk()}if(2&n){const e=r.oxw(),i=e.index,o=e.$implicit,s=r.oxw();r.xp6(1),r.Gre("tool-r tool-r-",s.buildMode==i+7,"\n                                d-flex justify-content-center align-items-center"),r.s9C("pTooltip",o),r.xp6(1),r.Gre("tool-text-r pi ",s.actionToolIcon[i],"")}}function Ba(n,t){if(1&n){const e=r.EpF();r.ynx(0),r.TgZ(1,"div",59),r.NdJ("click",function(){r.CHM(e);const o=r.oxw().index,s=r.oxw();return r.KtG(s.selectActionTool(o+7,2))}),r._UZ(2,"i"),r.qZA(),r.BQk()}if(2&n){const e=r.oxw(),i=e.$implicit,o=e.index,s=r.oxw();r.xp6(1),r.Gre("tool-r tool-r-disable-",0==s.buildHistory.length,"\n                                d-flex justify-content-center align-items-center"),r.s9C("pTooltip",i),r.xp6(1),r.Gre("tool-text-r pi ",s.actionToolIcon[o],"")}}function Ha(n,t){if(1&n&&(r.ynx(0),r.YNc(1,Za,3,7,"ng-container",50),r.YNc(2,Ba,3,7,"ng-container",50),r.BQk()),2&n){const e=t.index;r.xp6(1),r.Q6J("ngIf",0==e),r.xp6(1),r.Q6J("ngIf",e>0)}}function qa(n,t){if(1&n&&(r.TgZ(0,"div",60),r._uU(1),r.qZA()),2&n){const e=r.oxw();r.xp6(1),r.hij(" ",e.lockCounter," ")}}function Wa(n,t){1&n&&(r.TgZ(0,"div"),r._uU(1," Draw "),r.qZA())}function Ka(n,t){if(1&n&&(r.TgZ(0,"div")(1,"div"),r._uU(2," Winner "),r.qZA(),r.TgZ(3,"div"),r._uU(4),r.qZA()()),2&n){const e=r.oxw(2);r.xp6(4),r.Oqu(e.player1Name)}}function Va(n,t){if(1&n&&(r.TgZ(0,"div")(1,"div"),r._uU(2,"Winner"),r.qZA(),r.TgZ(3,"div"),r._uU(4),r.qZA()()),2&n){const e=r.oxw(2);r.xp6(4),r.Oqu(e.player2Name)}}function Qa(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",61)(1,"div",62)(2,"div",63)(3,"div",64),r.YNc(4,Wa,2,0,"div",50),r.YNc(5,Ka,5,1,"div",50),r.YNc(6,Va,5,1,"div",50),r.qZA(),r.TgZ(7,"div",65)(8,"div",63)(9,"div",66),r._uU(10),r.qZA(),r.TgZ(11,"div",17)(12,"div"),r._uU(13,"Score"),r.qZA(),r._UZ(14,"div",67),r.TgZ(15,"div"),r._uU(16),r.qZA()(),r.TgZ(17,"div",17)(18,"div"),r._uU(19,"Born"),r.qZA(),r._UZ(20,"div",67),r.TgZ(21,"div"),r._uU(22),r.qZA()(),r.TgZ(23,"div",17)(24,"div"),r._uU(25,"Death"),r.qZA(),r._UZ(26,"div",67),r.TgZ(27,"div"),r._uU(28),r.qZA()()(),r._UZ(29,"div",68),r.TgZ(30,"div",63)(31,"div",66),r._uU(32),r.qZA(),r.TgZ(33,"div",17)(34,"div"),r._uU(35,"Score"),r.qZA(),r._UZ(36,"div",67),r.TgZ(37,"div"),r._uU(38),r.qZA()(),r.TgZ(39,"div",17)(40,"div"),r._uU(41,"Born"),r.qZA(),r._UZ(42,"div",67),r.TgZ(43,"div"),r._uU(44),r.qZA()(),r.TgZ(45,"div",17)(46,"div"),r._uU(47,"Death"),r.qZA(),r._UZ(48,"div",67),r.TgZ(49,"div"),r._uU(50),r.qZA()()()(),r.TgZ(51,"div",69)(52,"div",70),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.navToPage())}),r._uU(53,"Leaderboard"),r.qZA(),r.TgZ(54,"div",70),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return r.KtG(o.menuAction(5))}),r._uU(55,"Main Menu"),r.qZA()()()()()}if(2&n){const e=r.oxw();r.xp6(4),r.Q6J("ngIf",e.count1Display==e.count2Display),r.xp6(1),r.Q6J("ngIf",e.count1Display>e.count2Display),r.xp6(1),r.Q6J("ngIf",e.count1Display<e.count2Display),r.xp6(4),r.Oqu(e.player1Name),r.xp6(6),r.Oqu(e.count1Display),r.xp6(6),r.Oqu(e.born1),r.xp6(6),r.Oqu(e.death1),r.xp6(4),r.Oqu(e.player2Name),r.xp6(6),r.Oqu(e.count2Display),r.xp6(6),r.Oqu(e.born2),r.xp6(6),r.Oqu(e.death2)}}let hr=(()=>{var n;class t{constructor(i,o){this.router=i,this.gameService=o,this.buildMode=0,this.buildMaterial=[[[0,-1],[0,0],[0,1]],[[-1,0],[-1,1],[0,-1],[0,1],[1,1]],[[-1,1],[0,-1],[0,1],[1,0],[1,1]],[[0,0],[0,1],[1,0],[1,1]],[[-1,0],[0,-1],[0,1],[1,0]],[[-1,-2],[-1,1],[0,2],[1,-2],[1,2],[2,-1],[2,0],[2,1],[2,2]],[[-6,-4],[-6,-3],[-6,-2],[-6,2],[-6,3],[-6,4],[-4,-6],[-3,-6],[-2,-6],[-4,-1],[-3,-1],[-2,-1],[-4,1],[-3,1],[-2,1],[-4,6],[-3,6],[-2,6],[-1,-4],[-1,-3],[-1,-2],[-1,2],[-1,3],[-1,4],[1,-4],[1,-3],[1,-2],[1,2],[1,3],[1,4],[2,-6],[3,-6],[4,-6],[2,-1],[3,-1],[4,-1],[2,1],[3,1],[4,1],[2,6],[3,6],[4,6],[6,-4],[6,-3],[6,-2],[6,2],[6,3],[6,4]],[[0,0]]],this.actionTool=["Edit","Undo","Reset"],this.actionToolIcon=["pi-pencil","pi-undo","pi-times"],this.buildMaterialName=["Blinker","Glider Up","Glider Down","Block","Star","Spaceship","Castle"],this.buildMaterialIcon=["pi-eye","pi-send rotate","pi-send rotate-90","pi-table","pi-home","pi-share-alt","pi-shield"],this.count1Display=0,this.count2Display=0,this.born1=0,this.born2=0,this.death1=0,this.death2=0,this.rows=40,this.cols=90,this.gameStatus="start",this.generationCount=0,this.generationLimitDefault=500,this.generationLimit=this.generationLimitDefault,this.generationLimitUpgrade=500,this.menuButton=["pi-play","pi-replay","pi-volume-up","pi-question-circle","pi-sign-out","2x","pi-user-plus"],this.gameSpeed={"0.5x":1e3,"1x":500,"2x":250,"5x":100},this.buildHistory=[],this.player1Lock=!1,this.player2Lock=!1,this.lockCounterDefault=60,this.lockCounter=this.lockCounterDefault,this.gameStartCounterDefault=10,this.gameStartCounter=this.gameStartCounterDefault,this.player1Name="User",this.player2Name="Computer",this.showResult=!1,this.happySmileyArray=["happy.svg","happy_smile.svg","happy_love.svg"],this.sadSmileyArray=["sad.svg","sad_cry.svg","sad_angry.svg"],this.player1Smiley=this.happySmileyArray[0],this.player2Smiley=this.happySmileyArray[0],this.assetPath="../../../../assets/",this.player1Message="Select the block to unlock "+this.lockCounterDefault+" Sec",this.player2Message="Select the block to unlock "+this.lockCounterDefault+" Sec",this.activePlayerID=0}ngOnInit(){this.gameService.initializeFB(),this.initPage(),this.listenFBGameTriggers()}initPage(){this.player1Name=this.gameService.players.player1.name,this.player2Name=this.gameService.players.player2.name,this.generationLimitDefault=100*this.gameService.gameConfig.duration,this.generationLimit=this.generationLimitDefault,this.generationLimitUpgrade=this.generationLimitDefault,this.activePlayerID=this.gameService.activePlayerID,""==this.gameService.hostGameURL&&this.router.navigateByUrl("home"),this.gameGrid=this.createEmptyGrid(this.rows,this.cols);var i=setInterval(()=>{this.gameStartCounter<=0?(clearInterval(i),this.startGameCounter()):this.gameStartCounter--},1e3);setTimeout(()=>{},3e3)}startGameCounter(){clearInterval(this.lockIntervalId),this.lockIntervalId=setInterval(()=>{this.lockCounter<=0?(this.lockCounter=this.lockCounterDefault,clearInterval(this.lockIntervalId),this.uploadGameBoard()):this.lockCounter--},1e3)}buildComplete(){clearInterval(this.lockIntervalId),this.player1Lock=!0,this.player2Lock=!0}createEmptyGrid(i,o){let s=new Array(i);for(let l=0;l<i;l++)s[l]=new Array(o).fill(0);return s}counter(i){return new Array(i)}pauseAudio(){}selectActionTool(i,o=0){this.playAudio("audio5"),7==i?(this.buildMode=i,this.editBuild(i)):8==i?this.undoLastBuild():9==i&&this.resetBuild(o)}editBuild(i){this.selectBuildMode(i)}undoLastBuild(){var i=this.buildHistory[this.buildHistory.length-1];this.toggleCell(i[1],i[2],i[0],!0),this.buildHistory.pop()}resetBuild(i){if(i>0){var o=new Array(this.cols/2).fill(0);for(let s=0;s<this.gameGrid.length;s++){const l=this.gameGrid[s];1==i&&(this.gameGrid[s]=o.concat(l.slice(this.cols/2,l.length))),2==i&&(this.gameGrid[s]=l.slice(0,this.cols/2).concat(o))}}this.buildHistory=[],this.updateGrid(this.gameGrid),this.countLivingCells(this.gameGrid)}selectBuildMode(i){this.buildMode!=i&&(this.buildMode=i,this.playAudio("audio5"))}toggleCell(i,o,s=this.buildMode,l=!1){if("play"!=this.gameStatus){var c=1;o>this.cols/2&&(c=-1),this.buildMaterial[s].forEach(d=>{var u=i+d[0],h=o+d[1]*c;this.gameGrid[u][h]=0===this.gameGrid[u][h]?1:0;var f=document.getElementById("game_"+u+"_"+h),_=Math.floor(40*Math.random()+16).toString(16),g=Math.floor(80*Math.random()+16).toString(16),P=Math.floor(100*Math.random()+16).toString(16);f.style.backgroundColor=h<this.cols/2?0===this.gameGrid[u][h]?"#1D2738":"#E7"+g+_:0===this.gameGrid[u][h]?"#1D2738":"#"+P+"B9"+g}),this.countLivingCells(this.gameGrid),0==l&&(this.playAudio("audio1"),this.buildHistory.push([s,i,o]))}}countLivingCells(i){let o=0,s=0;for(let l=0;l<this.rows;l++)for(let a=0;a<this.cols;a++)1===i[l][a]&&(a<this.cols/2?o++:s++);this.count1Display-o>20&&this.count2Display-s>20&&this.playAudio("audio3"),this.generationCount%10==0&&this.smileyUpdates(o,s),this.count1Display=o,this.count2Display=s}smileyUpdates(i,o){if("play"==this.gameStatus){var s=i-o;0==s?(this.player1Smiley=this.happySmileyArray[0],this.player2Smiley=this.happySmileyArray[0],this.tempMessageUpdate("Build your empire!","Build your empire!")):s>0?s>80?(this.player1Smiley=this.happySmileyArray[2],this.player2Smiley=this.sadSmileyArray[2],this.tempMessageUpdate("I love this game!","I want to win!")):s>40?(this.player1Smiley=this.happySmileyArray[1],this.player2Smiley=this.sadSmileyArray[1],this.tempMessageUpdate("Nice!","Don't laugh, I am gonna win this game!")):(this.player1Smiley=this.happySmileyArray[0],this.player2Smiley=this.sadSmileyArray[0],this.tempMessageUpdate("Hehe...","Don't laugh!")):s<0&&(s<-80?(this.player1Smiley=this.sadSmileyArray[2],this.player2Smiley=this.happySmileyArray[2],this.tempMessageUpdate("I want to win!","I love this game!")):s<-40?(this.player1Smiley=this.sadSmileyArray[1],this.player2Smiley=this.happySmileyArray[1],this.tempMessageUpdate("Ohh no I am loosing!","Nice!")):(this.player1Smiley=this.sadSmileyArray[0],this.player2Smiley=this.happySmileyArray[0],this.tempMessageUpdate("Don't laugh, I am gonna win this game!","Hehe...")))}}tempMessageUpdate(i,o){i&&(this.player1Message=i),o&&(this.player2Message=o)}updateGrid(i){for(let d=0;d<this.rows;d++)for(let u=0;u<this.cols;u++){let h=document.getElementById("game_"+d+"_"+u);var o=Math.floor(40*Math.random()+16).toString(16),s=Math.floor(80*Math.random()+16).toString(16),l=Math.floor(100*Math.random()+16).toString(16);h.style.backgroundColor=u<this.cols/2?0===i[d][u]?"#1D2738":"#E7"+s+o:0===i[d][u]?"#1D2738":"#"+l+"B9"+s}}calculateNextGeneration(i){const o=this.createEmptyGrid(this.rows,this.cols);for(let s=0;s<this.rows;s++)for(let l=0;l<this.cols;l++){const a=i[s][l],c=this.countNeighbors(i,s,l);0===a&&3===c?(o[s][l]=1,l<this.cols/2?this.born2++:this.born1++):1===a&&(c<2||c>3)?(o[s][l]=0,l<this.cols/2?this.death2++:this.death1++):o[s][l]=a}return o}countNeighbors(i,o,s){let l=0;const a=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(let c=0;c<a.length;c++){const[d,u]=a[c];l+=i[(o+d+this.rows)%this.rows][(s+u+this.cols)%this.cols]}return l}runNextGeneration(){this.generationCount>=this.generationLimit?(this.pauseGame(),this.gameEnd()):(this.generationCount++,this.updateProgressBar(this.generationCount),this.gameGrid=this.calculateNextGeneration(this.gameGrid),this.updateGrid(this.gameGrid),this.countLivingCells(this.gameGrid))}gameEnd(){this.showResult=!0,this.updateScore(this.player1Name,this.count1Display,this.count2Display),this.updateScore(this.player2Name,this.count2Display,this.count1Display)}rematch(i=!1){}updateProgressBar(i){var s=i/(1*this.generationLimit)*15;document.getElementById("progress-bar-fill").style.width=s+"rem"}listenFBGameTriggers(){var i=this.gameService.hostGameURL;f0(U(this.gameService.fbDatabase,i+"/game/0"),{0:""}),Ye(U(this.gameService.fbDatabase,i+"/game"),l=>{if(l.exists()){var a=l.val();if(console.log(a),a.status&&("rematchR1"==a.status&&console.log("player 1 request rematch"),"rematchR2"==a.status&&console.log("player 2 request rematch")),a[1]&&(this.player1Message="I am ready"),a[2]&&(this.player2Message="I am ready"),a[1]&&a[2]){for(let c=0;c<this.gameGrid.length;c++){const d=this.gameGrid[c];1==this.activePlayerID&&(this.gameGrid[c]=d.slice(0,this.cols/2).concat(a[2][c])),2==this.activePlayerID&&(this.gameGrid[c]=a[1][c].concat(d.slice(this.cols/2,d.length)))}this.playGame()}}})}uploadGameBoard(){var i=this.gameService.hostGameURL,o=[];for(let l=0;l<this.gameGrid.length;l++){const a=this.gameGrid[l];1==this.activePlayerID&&o.push(a.slice(0,this.cols/2)),2==this.activePlayerID&&o.push(a.slice(this.cols/2,a.length))}f0(U(this.gameService.fbDatabase,i+"/game/"+this.activePlayerID),o)}playGame(){this.buildMode=-1,this.generationCount>=this.generationLimit&&(this.generationLimit+=this.generationLimitUpgrade),clearInterval(this.intervalId);var i=this.gameSpeed[this.menuButton[5]];this.gameStatus="play",this.intervalId=setInterval(()=>{this.runNextGeneration()},i),this.playAudio("audio2"),this.buildHistory=[]}pauseGame(){clearInterval(this.intervalId)}resetGame(){this.pauseGame(),this.generationCount=0,this.generationLimit=this.generationLimitDefault,this.gameGrid=this.createEmptyGrid(this.rows,this.cols),this.updateGrid(this.gameGrid),this.buildHistory=[],this.born1=this.born2=this.death1=this.death2=0,this.showResult=!1,this.count1Display=this.count2Display=0,this.gameStatus="start",this.gameStartCounter=this.gameStartCounterDefault,this.smileyUpdates(0,0)}playAudio(i){const o=document.getElementById(i);o.volume=.2,o.play()}menuAction(i){if(1==i)"start"==this.gameStatus&&this.uploadGameBoard();else if(2==i)this.resetGame();else if(3==i)this.menuButton[2]="pi-volume-up"==this.menuButton[2]?"pi-volume-off":"pi-volume-up";else if(4==i)this.gameEnd();else{if(5!=i)return;this.router.navigateByUrl("home")}}updateScore(i,o,s){const l=U(U0());var c=0,d=0,u=0;o==s&&(d=1),o>s&&(c=1),o<s&&(u=1),Ve(e0(l,"users/"+i)).then(h=>{if(h.exists()){var f=h.val(),_=f.gameStat;_[0]+=1,_[1]+=c,_[2]+=d,_[3]+=u,this.writeFB(i,o>f.score?o:f.score,_)}else console.log("No data available"),this.writeFB(i,o,[1,c,d,u])}).catch(h=>{console.error(h)})}writeFB(i,o,s){f0(U(this.gameService.fbDatabase,"users/"+i),{name:i,score:o,gameStat:s})}navToPage(){this.router.navigateByUrl("leader-board")}}return(n=t).\u0275fac=function(i){return new(i||n)(r.Y36(E0.F0),r.Y36(ri))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-game-board"]],decls:85,vars:39,consts:[["id","main-container",1,"m-auto","main-container","p-4"],[1,"d-flex","justify-content-between","align-items-center","pb-4"],[1,"title","text-uppercase"],[1,"title1"],[1,"title2"],[1,"d-flex","flex-column","align-items-center"],[1,"controls"],[1,"d-flex","justify-content-center"],["pTooltip","play","tooltipPosition","bottom",1,"control-button",3,"click"],["pTooltip","Sound","tooltipPosition","bottom",1,"control-button","tooltipP",3,"click"],["pTooltip","Help","tooltipPosition","bottom",1,"control-button","tooltipP",3,"click"],["pTooltip","Quit","tooltipPosition","bottom",1,"control-button","tooltipP",3,"click"],[1,"game-container"],[1,"stat-container","pb-1"],[1,"d-flex","justify-content-between","pb-2"],[1,"d-flex","player-details","align-items-center",2,"width","680px"],[1,"player-message","d-flex","align-items-center","p-2","px-3"],[1,"d-flex"],[1,"playe1-avatar"],["alt","",3,"src"],[1,"px-3","ms-3","player-text-l"],[1,"px-3"],[1,"text-danger","score"],[1,""],[1,"text-center","pb-3",2,"width","270px"],[1,"progress-container","d-flex"],["id","progress-bar-fill",1,"progress-bar-fill"],[1,"m-auto",2,"font-size","0.8rem","z-index","1"],[1,"d-flex","player-details","align-items-center","justify-content-end",2,"width","680px"],[1,"px-3","text-end"],[1,"player-message","d-flex","justify-content-end","align-items-center","p-2","px-3"],[1,"px-3","me-3","player-text-r","text-end"],[1,"playe2-avatar"],[1,"m-auto"],["id","mdoe","tooltipPosition","right",3,"class","pTooltip","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["class","tool-l d-flex justify-content-center align-items-center",4,"ngIf"],["id","game",1,"game","d-flex","p-4"],["class","game-lock d-flex justify-content-center align-items-center",4,"ngIf"],[1,"p-1"],["id","mdoe","tooltipPosition","left",3,"class","pTooltip","click",4,"ngFor","ngForOf"],["class","tool-r d-flex justify-content-center align-items-center",4,"ngIf"],["class","result-container d-flex justify-content-center align-items-center",4,"ngIf"],["id","audio1","src","assets/mixkit-extra-bonus-in-a-video-game-2045.wav"],["id","audio2","src","assets/mixkit-drums-of-war-call-2780.wav"],["id","audio3","src","assets/mixkit-arcade-mechanical-bling-210.wav"],["id","audio4","src","assets/mixkit-winning-a-coin-video-game-2069.wav"],["id","audio5","src","assets/mixkit-game-ball-tap-2073.wav"],["id","audio0","src","assets/war theme.ogg"],["id","mdoe","tooltipPosition","right",3,"pTooltip","click"],[4,"ngIf"],[1,"tool-l","d-flex","justify-content-center","align-items-center"],[1,"cell-container"],["class","cell cell-l",3,"id","click",4,"ngFor","ngForOf"],[1,"cell","cell-l",3,"id","click"],[1,"game-lock","d-flex","justify-content-center","align-items-center"],[1,"pi","pi-lock","position-absolute"],["class","cell cell-r",3,"id","click",4,"ngFor","ngForOf"],[1,"cell","cell-r",3,"id","click"],["id","mdoe","tooltipPosition","left",3,"pTooltip","click"],[1,"tool-r","d-flex","justify-content-center","align-items-center"],[1,"result-container","d-flex","justify-content-center","align-items-center"],[1,"result-card","p-5"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"title","d-flex","flex-column","text-center","text-danger"],[1,"d-flex","result-details"],[1,"p-3","text-danger"],[1,"p-3"],[1,"m-5","result-card-seperator"],[1,"d-flex","pb-4"],[1,"result-card-button","p-4",3,"click"]],template:function(i,o){1&i&&(r.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),r._uU(4,"Cellular"),r.qZA(),r.TgZ(5,"span",4),r._uU(6,"Empire"),r.qZA()(),r.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),r.NdJ("click",function(){return o.menuAction(1)}),r._UZ(11,"i"),r.qZA(),r.TgZ(12,"div",9),r.NdJ("click",function(){return o.menuAction(3)}),r._UZ(13,"i"),r.qZA(),r.TgZ(14,"div",10),r.NdJ("click",function(){return o.menuAction(4)}),r._UZ(15,"i"),r.qZA(),r.TgZ(16,"div",11),r.NdJ("click",function(){return o.menuAction(5)}),r._UZ(17,"i"),r.qZA()()()()(),r.TgZ(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15)(22,"div",16)(23,"div",17)(24,"div",18),r._UZ(25,"img",19),r.qZA()(),r.TgZ(26,"div",20),r._uU(27),r.qZA()(),r.TgZ(28,"div",21)(29,"div"),r._uU(30),r.qZA(),r.TgZ(31,"div",22),r._uU(32),r.qZA()()(),r.TgZ(33,"div",23)(34,"div",5)(35,"div",24),r._uU(36),r.qZA(),r.TgZ(37,"div")(38,"div",25),r._UZ(39,"div",26),r.TgZ(40,"div",27),r._uU(41),r.qZA()()()()(),r.TgZ(42,"div",28)(43,"div",29)(44,"div"),r._uU(45),r.qZA(),r.TgZ(46,"div",22),r._uU(47),r.qZA()(),r.TgZ(48,"div",30)(49,"div",31),r._uU(50),r.qZA(),r.TgZ(51,"div",17)(52,"div",32),r._UZ(53,"img",19),r.qZA()()()()()(),r.TgZ(54,"div",33)(55,"div",17)(56,"div"),r.YNc(57,Sa,2,7,"div",34),r._UZ(58,"hr"),r.YNc(59,Na,3,2,"ng-container",35),r._UZ(60,"hr"),r.YNc(61,Ma,2,1,"div",36),r.qZA(),r.TgZ(62,"div",37)(63,"div")(64,"div"),r.YNc(65,Ra,3,1,"div",35),r.qZA(),r.YNc(66,La,3,1,"div",38),r.qZA(),r._UZ(67,"div",39),r.TgZ(68,"div")(69,"div"),r.YNc(70,Fa,3,1,"div",35),r.qZA(),r.YNc(71,Ga,3,1,"div",38),r.qZA()(),r.TgZ(72,"div"),r.YNc(73,Ua,2,7,"div",40),r._UZ(74,"hr"),r.YNc(75,Ha,3,2,"ng-container",35),r._UZ(76,"hr"),r.YNc(77,qa,2,1,"div",41),r.qZA()()()()(),r.YNc(78,Qa,56,11,"div",42),r._UZ(79,"audio",43)(80,"audio",44)(81,"audio",45)(82,"audio",46)(83,"audio",47)(84,"audio",48)),2&i&&(r.xp6(11),r.Gre("pi ",o.menuButton[0],""),r.xp6(2),r.Gre("pi ",o.menuButton[2],""),r.xp6(2),r.Gre("pi ",o.menuButton[3],""),r.xp6(2),r.Gre("pi ",o.menuButton[4],""),r.xp6(8),r.Q6J("src",o.assetPath+o.player1Smiley,r.LSH),r.xp6(2),r.hij(" ",o.player1Message," "),r.xp6(3),r.Oqu(o.player1Name),r.xp6(2),r.hij("00",o.count1Display,""),r.xp6(4),r.hij(" Generataion:",o.generationLimit," "),r.xp6(5),r.Oqu(o.generationCount),r.xp6(4),r.Oqu(o.player2Name),r.xp6(2),r.hij("00",o.count2Display,""),r.xp6(3),r.hij(" ",o.player2Message," "),r.xp6(3),r.Q6J("src",o.assetPath+o.player2Smiley,r.LSH),r.xp6(3),r.Gre("tool-container-l p-3 tool-l-disable-",1!=o.activePlayerID,""),r.xp6(1),r.Q6J("ngForOf",o.buildMaterialName),r.xp6(2),r.Q6J("ngForOf",o.actionTool),r.xp6(2),r.Q6J("ngIf",1==o.activePlayerID),r.xp6(4),r.Q6J("ngForOf",o.counter(o.rows)),r.xp6(1),r.Q6J("ngIf",1!=o.activePlayerID||o.gameStartCounter>0),r.xp6(4),r.Q6J("ngForOf",o.counter(o.rows)),r.xp6(1),r.Q6J("ngIf",2!=o.activePlayerID||o.gameStartCounter>0),r.xp6(1),r.Gre("tool-container-r p-3 tool-r-disable-",2!=o.activePlayerID,""),r.xp6(1),r.Q6J("ngForOf",o.buildMaterialName),r.xp6(2),r.Q6J("ngForOf",o.actionTool),r.xp6(2),r.Q6J("ngIf",2==o.activePlayerID),r.xp6(1),r.Q6J("ngIf",o.showResult))},dependencies:[q.sg,q.O5,ur],styles:[".cell-container[_ngcontent-%COMP%]{display:flex}.cell[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:5px;border:1px solid #121b29;animation-duration:1s;cursor:pointer;background-color:#1d2738}.cell-l[_ngcontent-%COMP%]:hover{background-color:#e73e3988}.cell-r[_ngcontent-%COMP%]:hover{background-color:#4cb93188}.main-container[_ngcontent-%COMP%]{width:1708px}.title[_ngcontent-%COMP%]{font-size:1.5rem}.title1[_ngcontent-%COMP%]{color:#e1113b}.title2[_ngcontent-%COMP%]{color:#fff}.menu-button[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{background:#E1113B!important}.game-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.game-lock[_ngcontent-%COMP%]{height:100%;width:100%;background:rgba(0,0,0,.3333333333);position:relative;z-index:1;top:-100%;border-radius:5px;color:#fff}.game-lock[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]{font-size:3rem}.pi-lock[_ngcontent-%COMP%]:hover{scale:1.1}.control-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:0 0 0 1.5rem;width:55px;height:55px;border-radius:50%;color:#f0f8ff;box-shadow:-3px -3px 4px #171e2c,3px 3px 5px 2px #000000d6,inset 0 0 #000,inset 0 0 #171e2c;transition:box-shadow .3s ease-in}.control-button[_ngcontent-%COMP%]:hover{box-shadow:0 0 #171e2c,0 0 #000000d6,inset 5px 5px 2px #000,inset -1px -1px 4px 1px #171e2c}.stat-container[_ngcontent-%COMP%]{color:#f5f5f5}.score[_ngcontent-%COMP%]{font-size:1.5rem}.playe1-avatar[_ngcontent-%COMP%]{height:40px;width:40px;background:#e73e39;border-radius:5px;margin:5px}.playe2-avatar[_ngcontent-%COMP%]{height:40px;width:40px;background:#4CB931;border-radius:5px;margin:5px}.player-message[_ngcontent-%COMP%]{width:500px;box-shadow:inset 3px 3px 4px #2223,inset -4px -3px 4px -5px #6666;border-radius:10px;background-color:#121b29;font-size:.8rem;color:#6c83a5}.player-text-l[_ngcontent-%COMP%]{border-left:1px solid}.player-text-r[_ngcontent-%COMP%]{border-right:1px solid}.player-card-l[_ngcontent-%COMP%]{border-right:1px solid white}.player-card-r[_ngcontent-%COMP%]{border-left:1px solid white}.progress-container[_ngcontent-%COMP%]{width:15rem;height:1.2rem;background-color:#1d2738;border-radius:.3rem;overflow:hidden}.progress-bar-fill[_ngcontent-%COMP%]{height:1.2rem;width:.5rem;background-color:#e1113b;border-radius:.3rem;position:absolute;z-index:0}.progress-bar-1x[_ngcontent-%COMP%]{width:4rem;z-index:1;text-align:end}.progress-bar-2x[_ngcontent-%COMP%]{width:8rem;z-index:1;text-align:end}.progress-label[_ngcontent-%COMP%]{height:1rem;width:1rem;padding:3px;border:1px solid white;border-radius:.3rem}.game[_ngcontent-%COMP%]{background-color:#121b29}.tool-container-l[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#1d2738;border-radius:10px 0 0 10px}.tool-container-r[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#1d2738;border-radius:0 10px 10px 0}.tool-l[_ngcontent-%COMP%], .tool-r[_ngcontent-%COMP%]{height:50px;width:50px;color:#f0f8ff;border-radius:10px}.tool-l-disable-true[_ngcontent-%COMP%], .tool-r-disable-true[_ngcontent-%COMP%]{color:#384a65!important}.tool-l-true[_ngcontent-%COMP%]{color:#e73e39;box-shadow:inset 3px 3px 6px #0000004f,inset -4px -3px 4px -5px #6666}.tool-r-true[_ngcontent-%COMP%]{color:#4cb931;box-shadow:inset 3px 3px 6px #0000004f,inset -4px -3px 4px -5px #6666}.tool-l[_ngcontent-%COMP%]:hover{color:#e73e39}.tool-r[_ngcontent-%COMP%]:hover{color:#4cb931}.hover-pointer[_ngcontent-%COMP%]{position:absolute;width:45px;height:45px;border-radius:5px;border:1px solid rgba(130,130,130,.4509803922);cursor:pointer;z-index:0}.result-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;z-index:10;top:0;background-color:#000a}.result-card[_ngcontent-%COMP%]{width:60%;height:60%;background-color:#121b29;border-radius:10px;color:#fff}.title[_ngcontent-%COMP%]{font-size:3rem}.result-details[_ngcontent-%COMP%]{color:#384a65}.result-card-button[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s}.result-card-button[_ngcontent-%COMP%]:hover{scale:1.1}.result-card-seperator[_ngcontent-%COMP%]{border:2px solid #384A65;height:8rem}.rotate-45[_ngcontent-%COMP%]{transform:rotate(45deg)}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-135[_ngcontent-%COMP%]{transform:rotate(135deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-225[_ngcontent-%COMP%]{transform:rotate(225deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-315[_ngcontent-%COMP%]{transform:rotate(315deg)}.menu[_ngcontent-%COMP%]{font-size:1.5rem}.menu-title[_ngcontent-%COMP%]{color:#8c99b6;font-size:2rem}.menu-sub-title[_ngcontent-%COMP%]{color:#525c6e;font-size:1rem}.menu-button[_ngcontent-%COMP%]{margin:20px;padding:10px 20px;transition:all .3s ease-in-out;border:1px solid white;border-radius:10px}.menu-button[_ngcontent-%COMP%]:hover{scale:1.1;cursor:pointer!important}.menu-button-small-true[_ngcontent-%COMP%]{color:#fff}.menu-button-small-false[_ngcontent-%COMP%]:hover{scale:1.1;cursor:pointer!important}.menu-button-small-false[_ngcontent-%COMP%]{color:#525c6e}.menu-input[_ngcontent-%COMP%]{margin:15px;background:transparent;border:0px;border-bottom:1px solid white;color:#fff}"]}),t})();const Ya=[{path:"",component:ar},{path:"home",component:ar},{path:"landing",component:Ia},{path:"game",component:wa},{path:"online-game",component:hr,children:[{path:"**",component:hr}]},{path:"leader-board",component:ba}];let Ja=(()=>{var n;class t{}return(n=t).\u0275fac=function(i){return new(i||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[E0.Bz.forChild(Ya),E0.Bz]}),t})(),ja=(()=>{var n;class t{}return n=t,m(t,"\u0275fac",function(i){return new(i||n)}),m(t,"\u0275mod",r.oAB({type:n})),m(t,"\u0275inj",r.cJS({imports:[q.ez]})),t})(),$a=(()=>{var n;class t{}return(n=t).\u0275fac=function(i){return new(i||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[q.ez,Ja,pr,ta,ja]}),t})()}}]);