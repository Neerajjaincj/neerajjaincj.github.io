"use strict";(self.webpackChunkcellular_empire=self.webpackChunkcellular_empire||[]).push([[488],{8488:(Oc,ci,H)=>{H.r(ci),H.d(ci,{HomeModule:()=>Ec});var L=H(6814),Ie=H(95),t=H(5879);let vo=(()=>{var o;class i{}return(o=i).\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[L.ez,Ie.u5,Ie.UX]}),i})();var _e=H(8076),Co=H(5861),J=H(4303),xo=H(4537),p=H(9058),di=H(7879);const ui="@firebase/database";let $0="";class To{constructor(i){this.domStorage_=i,this.prefix_="firebase:"}set(i,e){null==e?this.domStorage_.removeItem(this.prefixedName_(i)):this.domStorage_.setItem(this.prefixedName_(i),(0,p.Wl)(e))}get(i){const e=this.domStorage_.getItem(this.prefixedName_(i));return null==e?null:(0,p.cI)(e)}remove(i){this.domStorage_.removeItem(this.prefixedName_(i))}prefixedName_(i){return this.prefix_+i}toString(){return this.domStorage_.toString()}}class Po{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(i,e){null==e?delete this.cache_[i]:this.cache_[i]=e}get(i){return(0,p.r3)(this.cache_,i)?this.cache_[i]:null}remove(i){delete this.cache_[i]}}const fi=function(o){try{if(typeof window<"u"&&typeof window[o]<"u"){const i=window[o];return i.setItem("firebase:sentinel","cache"),i.removeItem("firebase:sentinel"),new To(i)}}catch{}return new Po},me=fi("localStorage"),X0=fi("sessionStorage"),Se=new di.Yd("@firebase/database"),_i=function(){let o=1;return function(){return o++}}(),mi=function(o){const i=(0,p.dS)(o),e=new p.gQ;e.update(i);const n=e.digest();return p.US.encodeByteArray(n)},Ge=function(...o){let i="";for(let e=0;e<o.length;e++){const n=o[e];Array.isArray(n)||n&&"object"==typeof n&&"number"==typeof n.length?i+=Ge.apply(null,n):i+="object"==typeof n?(0,p.Wl)(n):n,i+=" "}return i};let ge=null,gi=!0;const k=function(...o){if(!0===gi&&(gi=!1,null===ge&&!0===X0.get("logging_enabled")&&function(o,i){(0,p.hu)(!i||!0===o||!1===o,"Can't turn on custom loggers persistently."),!0===o?(Se.logLevel=di.in.VERBOSE,ge=Se.log.bind(Se),i&&X0.set("logging_enabled",!0)):"function"==typeof o?ge=o:(ge=null,X0.remove("logging_enabled"))}(!0)),ge){const i=Ge.apply(null,o);ge(i)}},Be=function(o){return function(...i){k(o,...i)}},et=function(...o){const i="FIREBASE INTERNAL ERROR: "+Ge(...o);Se.error(i)},z=function(...o){const i=`FIREBASE FATAL ERROR: ${Ge(...o)}`;throw Se.error(i),new Error(i)},D=function(...o){const i="FIREBASE WARNING: "+Ge(...o);Se.warn(i)},f0=function(o){return"number"==typeof o&&(o!=o||o===Number.POSITIVE_INFINITY||o===Number.NEGATIVE_INFINITY)},oe="[MIN_NAME]",ie="[MAX_NAME]",ye=function(o,i){if(o===i)return 0;if(o===oe||i===ie)return-1;if(i===oe||o===ie)return 1;{const e=xi(o),n=xi(i);return null!==e?null!==n?e-n==0?o.length-i.length:e-n:-1:null!==n?1:o<i?-1:1}},Io=function(o,i){return o===i?0:o<i?-1:1},Fe=function(o,i){if(i&&o in i)return i[o];throw new Error("Missing required key ("+o+") in object: "+(0,p.Wl)(i))},tt=function(o){if("object"!=typeof o||null===o)return(0,p.Wl)(o);const i=[];for(const n in o)i.push(n);i.sort();let e="{";for(let n=0;n<i.length;n++)0!==n&&(e+=","),e+=(0,p.Wl)(i[n]),e+=":",e+=tt(o[i[n]]);return e+="}",e},vi=function(o,i){const e=o.length;if(e<=i)return[o];const n=[];for(let r=0;r<e;r+=i)n.push(o.substring(r,r+i>e?e:r+i));return n};function R(o,i){for(const e in o)o.hasOwnProperty(e)&&i(e,o[e])}const Ci=function(o){(0,p.hu)(!f0(o),"Invalid JSON number");const n=1023;let r,s,l,a,c;0===o?(s=0,l=0,r=1/o==-1/0?1:0):(r=o<0,(o=Math.abs(o))>=Math.pow(2,1-n)?(a=Math.min(Math.floor(Math.log(o)/Math.LN2),n),s=a+n,l=Math.round(o*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,l=Math.round(o/Math.pow(2,-1074))));const d=[];for(c=52;c;c-=1)d.push(l%2?1:0),l=Math.floor(l/2);for(c=11;c;c-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(r?1:0),d.reverse();const u=d.join("");let h="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);1===f.length&&(f="0"+f),h+=f}return h.toLowerCase()},Oo=new RegExp("^-?(0*)\\d{1,10}$"),xi=function(o){if(Oo.test(o)){const i=Number(o);if(i>=-2147483648&&i<=2147483647)return i}return null},Ee=function(o){try{o()}catch(i){setTimeout(()=>{throw D("Exception was thrown by user callback.",i.stack||""),i},Math.floor(0))}},qe=function(o,i){const e=setTimeout(o,i);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class Ro{constructor(i,e){this.appName_=i,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(n=>this.appCheck=n)}getToken(i){return this.appCheck?this.appCheck.getToken(i):new Promise((e,n)=>{setTimeout(()=>{this.appCheck?this.getToken(i).then(e,n):e(null)},0)})}addTokenChangeListener(i){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(n=>n.addTokenListener(i))}notifyForInvalidToken(){D(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Zo{constructor(i,e,n){this.appName_=i,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(r=>this.auth_=r)}getToken(i){return this.auth_?this.auth_.getToken(i).catch(e=>e&&"auth/token-not-initialized"===e.code?(k("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,n)=>{setTimeout(()=>{this.auth_?this.getToken(i).then(e,n):e(null)},0)})}addTokenChangeListener(i){this.auth_?this.auth_.addAuthTokenListener(i):this.authProvider_.get().then(e=>e.addAuthTokenListener(i))}removeTokenChangeListener(i){this.authProvider_.get().then(e=>e.removeAuthTokenListener(i))}notifyForInvalidToken(){let i='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';i+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',D(i)}}let He=(()=>{class o{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return o.OWNER="owner",o})();const Ii=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ai="websocket",Oi="long_polling";class nt{constructor(i,e,n,r,s=!1,l="",a=!1,c=!1){this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=i.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=me.get("host:"+i)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(i){i!==this.internalHost&&(this.internalHost=i,this.isCacheableHost()&&me.set("host:"+this._host,this.internalHost))}toString(){let i=this.toURLString();return this.persistenceKey&&(i+="<"+this.persistenceKey+">"),i}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Mi(o,i,e){let n;if((0,p.hu)("string"==typeof i,"typeof type must == string"),(0,p.hu)("object"==typeof e,"typeof params must == object"),i===Ai)n=(o.secure?"wss://":"ws://")+o.internalHost+"/.ws?";else{if(i!==Oi)throw new Error("Unknown connection type: "+i);n=(o.secure?"https://":"http://")+o.internalHost+"/.lp?"}(function Lo(o){return o.host!==o.internalHost||o.isCustomHost()||o.includeNamespaceInQueryParams})(o)&&(e.ns=o.namespace);const r=[];return R(e,(s,l)=>{r.push(s+"="+l)}),n+r.join("&")}class Do{constructor(){this.counters_={}}incrementCounter(i,e=1){(0,p.r3)(this.counters_,i)||(this.counters_[i]=0),this.counters_[i]+=e}get(){return(0,p.p$)(this.counters_)}}const ot={},rt={};function st(o){const i=o.toString();return ot[i]||(ot[i]=new Do),ot[i]}class Go{constructor(i){this.onMessage_=i,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(i,e){this.closeAfterResponse=i,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(i,e){for(this.pendingResponses[i]=e;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<n.length;++r)n[r]&&Ee(()=>{this.onMessage_(n[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class re{constructor(i,e,n,r,s,l,a){this.connId=i,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=s,this.transportSessionId=l,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Be(i),this.stats_=st(e),this.urlFn=c=>(this.appCheckToken&&(c.ac=this.appCheckToken),Mi(e,Oi,c))}open(i,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Go(i),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(o){if((0,p.Yr)()||"complete"===document.readyState)o();else{let i=!1;const e=function(){document.body?i||(i=!0,o()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new lt((...s)=>{const[l,a,c,d,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=a,this.password=c;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,a)},()=>{this.onClosed_()},this.urlFn);const n={start:"t"};n.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(n.cb=this.scriptTagHolder.uniqueCallbackIdentifier),n.v="5",this.transportSessionId&&(n.s=this.transportSessionId),this.lastSessionId&&(n.ls=this.lastSessionId),this.applicationId&&(n.p=this.applicationId),this.appCheckToken&&(n.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Ii.test(location.hostname)&&(n.r="f");const r=this.urlFn(n);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){re.forceAllow_=!0}static forceDisallow(){re.forceDisallow_=!0}static isAvailable(){return!((0,p.Yr)()||!re.forceAllow_&&(re.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(i){const e=(0,p.Wl)(i);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const n=(0,p.h$)(e),r=vi(n,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(i,e){if((0,p.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=i,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(i){const e=(0,p.Wl)(i).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class lt{constructor(i,e,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,p.Yr)())this.commandCB=i,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=_i(),window["pLPCommand"+this.uniqueCallbackIdentifier]=i,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=lt.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(a){k("frame writing exception"),a.stack&&k(a.stack),k(a)}}}static createIFrame_(){const i=document.createElement("iframe");if(i.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(i);try{i.contentWindow.document||k("No IE domain setting required")}catch{const n=document.domain;i.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return i.contentDocument?i.doc=i.contentDocument:i.contentWindow?i.doc=i.contentWindow.document:i.document&&(i.doc=i.document),i}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const i=this.onDisconnect;i&&(this.onDisconnect=null,i())}startLongPoll(i,e){for(this.myID=i,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const i={};i.id=this.myID,i.pw=this.myPW,i.ser=this.currentSerial;let e=this.urlFn(i),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const l=this.pendingSegs.shift();n=n+"&seg"+r+"="+l.seg+"&ts"+r+"="+l.ts+"&d"+r+"="+l.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(i,e,n){this.pendingSegs.push({seg:i,ts:e,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(i,e){this.outstandingRequests.add(e);const n=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(i,()=>{clearTimeout(r),n()})}addTag(i,e){(0,p.Yr)()?this.doNodeLongPoll(i,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=i,n.onload=n.onreadystatechange=function(){const r=n.readyState;(!r||"loaded"===r||"complete"===r)&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),e())},n.onerror=()=>{k("Long-poll script failed to load: "+i),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}let m0=null;typeof MozWebSocket<"u"?m0=MozWebSocket:typeof WebSocket<"u"&&(m0=WebSocket);let Ae=(()=>{class o{constructor(e,n,r,s,l,a,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Be(this.connId),this.stats_=st(n),this.connURL=o.connectionURL_(n,a,c,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,l){const a={v:"5"};return!(0,p.Yr)()&&typeof location<"u"&&location.hostname&&Ii.test(location.hostname)&&(a.r="f"),n&&(a.s=n),r&&(a.ls=r),s&&(a.ac=s),l&&(a.p=l),Mi(e,Ai,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,me.set("previous_websocket_failure",!0);try{let r;if((0,p.Yr)()){r={headers:{"User-Agent":`Firebase/5/${$0}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,a=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new m0(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){o.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==m0&&!o.forceDisallow_}static previouslyFailed(){return me.isInMemoryStorage||!0===me.get("previous_websocket_failure")}markConnectionHealthy(){me.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=(0,p.cI)(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,p.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=(0,p.Wl)(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=vi(n,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return o.responsesRequiredToBeHealthy=2,o.healthyTimeout=3e4,o})(),Ui=(()=>{class o{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[re,Ae]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Ae&&Ae.isAvailable();let r=n&&!Ae.previouslyFailed();if(e.webSocketOnly&&(n||D("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ae];else{const s=this.transports_=[];for(const l of o.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);o.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return o.globalTransportInitialized_=!1,o})();class Qi{constructor(i,e,n,r,s,l,a,c,d,u){this.id=i,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=l,this.onReady_=a,this.onDisconnect_=c,this.onKill_=d,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Be("c:"+this.id+":"),this.transportManager_=new Ui(e),this.log_("Connection created"),this.start_()}start_(){const i=this.transportManager_.initialTransport();this.conn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,n)},Math.floor(0));const r=i.healthyTimeout||0;r>0&&(this.healthyTimeout_=qe(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(i){return e=>{i===this.conn_?this.onConnectionLost_(e):i===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(i){return e=>{2!==this.state_&&(i===this.rx_?this.onPrimaryMessageReceived_(e):i===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(i){this.sendData_({t:"d",d:i})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(i){if("t"in i){const e=i.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(i){const e=Fe("t",i),n=Fe("d",i);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(i){const e=Fe("t",i),n=Fe("d",i);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)}onDataMessage_(i){this.onPrimaryResponse_(),this.onMessage_(i)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(i){const e=Fe("t",i);if("d"in i){const n=i.d;if("h"===e){const r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?et("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):et("Unknown control packet command: "+e)}}onHandshake_(i){const e=i.ts,n=i.v,r=i.h;this.sessionId=i.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&D("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const i=this.transportManager_.upgradeTransport();i&&this.startUpgrade_(i)}startUpgrade_(i){this.secondaryConn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,n),qe(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(i){this.log_("Reset packet received.  New host: "+i),this.repoInfo_.host=i,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(i,e){this.log_("Realtime connection established."),this.conn_=i,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qe(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const i=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===i||this.rx_===i)&&this.close()}onConnectionLost_(i){this.conn_=null,i||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(me.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(i){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(i),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(i){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(i)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ji{put(i,e,n,r){}merge(i,e,n,r){}refreshAuthToken(i){}refreshAppCheckToken(i){}onDisconnectPut(i,e,n){}onDisconnectMerge(i,e,n){}onDisconnectCancel(i,e){}reportStats(i){}}class Ki{constructor(i){this.allowedEvents_=i,this.listeners_={},(0,p.hu)(Array.isArray(i)&&i.length>0,"Requires a non-empty array")}trigger(i,...e){if(Array.isArray(this.listeners_[i])){const n=[...this.listeners_[i]];for(let r=0;r<n.length;r++)n[r].callback.apply(n[r].context,e)}}on(i,e,n){this.validateEventType_(i),this.listeners_[i]=this.listeners_[i]||[],this.listeners_[i].push({callback:e,context:n});const r=this.getInitialEvent(i);r&&e.apply(n,r)}off(i,e,n){this.validateEventType_(i);const r=this.listeners_[i]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!n||n===r[s].context))return void r.splice(s,1)}validateEventType_(i){(0,p.hu)(this.allowedEvents_.find(e=>e===i),"Unknown event: "+i)}}class g0 extends Ki{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,p.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new g0}getInitialEvent(i){return(0,p.hu)("online"===i,"Unknown event type: "+i),[this.online_]}currentlyOnline(){return this.online_}}class b{constructor(i,e){if(void 0===e){this.pieces_=i.split("/");let n=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=i,this.pieceNum_=e}toString(){let i="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(i+="/"+this.pieces_[e]);return i||"/"}}function P(){return new b("")}function C(o){return o.pieceNum_>=o.pieces_.length?null:o.pieces_[o.pieceNum_]}function se(o){return o.pieces_.length-o.pieceNum_}function I(o){let i=o.pieceNum_;return i<o.pieces_.length&&i++,new b(o.pieces_,i)}function ct(o){return o.pieceNum_<o.pieces_.length?o.pieces_[o.pieces_.length-1]:null}function We(o,i=0){return o.pieces_.slice(o.pieceNum_+i)}function ji(o){if(o.pieceNum_>=o.pieces_.length)return null;const i=[];for(let e=o.pieceNum_;e<o.pieces_.length-1;e++)i.push(o.pieces_[e]);return new b(i,0)}function O(o,i){const e=[];for(let n=o.pieceNum_;n<o.pieces_.length;n++)e.push(o.pieces_[n]);if(i instanceof b)for(let n=i.pieceNum_;n<i.pieces_.length;n++)e.push(i.pieces_[n]);else{const n=i.split("/");for(let r=0;r<n.length;r++)n[r].length>0&&e.push(n[r])}return new b(e,0)}function x(o){return o.pieceNum_>=o.pieces_.length}function G(o,i){const e=C(o),n=C(i);if(null===e)return i;if(e===n)return G(I(o),I(i));throw new Error("INTERNAL ERROR: innerPath ("+i+") is not within outerPath ("+o+")")}function dt(o,i){if(se(o)!==se(i))return!1;for(let e=o.pieceNum_,n=i.pieceNum_;e<=o.pieces_.length;e++,n++)if(o.pieces_[e]!==i.pieces_[n])return!1;return!0}function W(o,i){let e=o.pieceNum_,n=i.pieceNum_;if(se(o)>se(i))return!1;for(;e<o.pieces_.length;){if(o.pieces_[e]!==i.pieces_[n])return!1;++e,++n}return!0}class ar{constructor(i,e){this.errorPrefix_=e,this.parts_=We(i,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=(0,p.ug)(this.parts_[n]);zi(this)}}function zi(o){if(o.byteLength_>768)throw new Error(o.errorPrefix_+"has a key path longer than 768 bytes ("+o.byteLength_+").");if(o.parts_.length>32)throw new Error(o.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ve(o))}function ve(o){return 0===o.parts_.length?"":"in property '"+o.parts_.join(".")+"'"}class ut extends Ki{constructor(){let i,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",i="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",i="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",i="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",i="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const n=!document[i];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new ut}getInitialEvent(i){return(0,p.hu)("visible"===i,"Unknown event type: "+i),[this.visible_]}}const Qe=1e3;let v0,Ce=(()=>{class o extends Ji{constructor(e,n,r,s,l,a,c,d){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=d,this.id=o.nextPersistentConnectionId_++,this.log_=Be("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Qe,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d&&!(0,p.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ut.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&g0.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,l={r:s,a:e,b:n};this.log_((0,p.Wl)(l)),(0,p.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new p.BH,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const c=a.d;"ok"===a.s?n.resolve(c):n.reject(c)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),n.promise}listen(e,n,r,s){this.initConnection_();const l=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+l),this.listens.has(a)||this.listens.set(a,new Map),(0,p.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,p.hu)(!this.listens.get(a).has(l),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(a).set(l,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const l={p:r};e.tag&&(l.q=n._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest("q",l,c=>{const d=c.d,u=c.s;o.warnOnListenWarnings_(d,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),"ok"!==u&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,d))})}static warnOnListenWarnings_(e,n){if(e&&"object"==typeof e&&(0,p.r3)(e,"w")){const r=(0,p.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',l=n._path.toString();D(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,p.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=(0,p.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const l=s.s,a=s.d||"error";this.authToken_===e&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";"ok"===n?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,p.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const l={p:e};s&&(l.q=r,l.t=s),this.sendRequest("n",l)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const l={p:n,d:r};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,l){this.initConnection_();const a={p:n,d:r};void 0!==l&&(a.h=l),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,l=>{this.log_(n+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,p.Wl)(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),"d"===e?this.onDataUpdate_(n.p,n.d,!1,n.t):"m"===e?this.onDataUpdate_(n.p,n.d,!0,n.t):"c"===e?this.onListenRevoked_(n.p,n.q):"ac"===e?this.onAuthRevoked_(n.s,n.d):"apc"===e?this.onAppCheckRevoked_(n.s,n.d):"sd"===e?this.onSecurityDebugPacket_(n):et("Unrecognized action received from server: "+(0,p.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,p.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qe,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Qe,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Qe),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Co.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const n=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),l=e.id+":"+o.nextConnectionId_++,a=e.lastSessionId;let c=!1,d=null;const u=function(){d?d.close():(c=!0,s())};e.realtime_={close:u,sendRequest:function(_){(0,p.hu)(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(_)}};const f=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[_,g]=yield Promise.all([e.authTokenProvider_.getToken(f),e.appCheckTokenProvider_.getToken(f)]);c?k("getToken() completed but was canceled"):(k("getToken() completed. Creating connection."),e.authToken_=_&&_.accessToken,e.appCheckToken_=g&&g.token,d=new Qi(l,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,n,r,s,v=>{D(v+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},a))}catch(_){e.log_("Failed to get token: "+_),c||(e.repoInfo_.nodeAdmin&&D(_),u())}}})()}interrupt(e){k("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){k("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,p.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Qe,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;r=n?n.map(l=>tt(l)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new b(e).toString();let s;if(this.listens.has(r)){const l=this.listens.get(r);s=l.get(n),l.delete(n),0===l.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){k("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){k("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";(0,p.Yr)()&&(n=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+n+"."+$0.replace(/\./g,"-")]=1,(0,p.uI)()?e["framework.cordova"]=1:(0,p.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=g0.getInstance().currentlyOnline();return(0,p.xb)(this.interruptReasons_)&&e}}return o.nextPersistentConnectionId_=0,o.nextConnectionId_=0,o})();class T{constructor(i,e){this.name=i,this.node=e}static Wrap(i,e){return new T(i,e)}}class y0{getCompare(){return this.compare.bind(this)}indexedValueChanged(i,e){const n=new T(oe,i),r=new T(oe,e);return 0!==this.compare(n,r)}minPost(){return T.MIN}}class en extends y0{static get __EMPTY_NODE(){return v0}static set __EMPTY_NODE(i){v0=i}compare(i,e){return ye(i.name,e.name)}isDefinedOn(i){throw(0,p.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(i,e){return!1}minPost(){return T.MIN}maxPost(){return new T(ie,v0)}makePost(i,e){return(0,p.hu)("string"==typeof i,"KeyIndex indexValue must always be a string."),new T(i,v0)}toString(){return".key"}}const $=new en;class C0{constructor(i,e,n,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!i.isEmpty();)if(l=e?n(i.key,e):1,r&&(l*=-1),l<0)i=this.isReverse_?i.left:i.right;else{if(0===l){this.nodeStack_.push(i);break}this.nodeStack_.push(i),i=this.isReverse_?i.right:i.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,i=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(i.key,i.value):{key:i.key,value:i.value},this.isReverse_)for(i=i.left;!i.isEmpty();)this.nodeStack_.push(i),i=i.right;else for(i=i.right;!i.isEmpty();)this.nodeStack_.push(i),i=i.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const i=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(i.key,i.value):{key:i.key,value:i.value}}}let pt,K=(()=>{class o{constructor(e,n,r,s,l){this.key=e,this.value=n,this.color=r??o.RED,this.left=s??B.EMPTY_NODE,this.right=l??B.EMPTY_NODE}copy(e,n,r,s,l){return new o(e??this.key,n??this.value,r??this.color,s??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,n,r),null):0===l?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return B.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===n(e,r.key)){if(r.right.isEmpty())return B.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,o.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return o.RED=!0,o.BLACK=!1,o})();class B{constructor(i,e=B.EMPTY_NODE){this.comparator_=i,this.root_=e}insert(i,e){return new B(this.comparator_,this.root_.insert(i,e,this.comparator_).copy(null,null,K.BLACK,null,null))}remove(i){return new B(this.comparator_,this.root_.remove(i,this.comparator_).copy(null,null,K.BLACK,null,null))}get(i){let e,n=this.root_;for(;!n.isEmpty();){if(e=this.comparator_(i,n.key),0===e)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null}getPredecessorKey(i){let e,n=this.root_,r=null;for(;!n.isEmpty();){if(e=this.comparator_(i,n.key),0===e){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(i){return this.root_.inorderTraversal(i)}reverseTraversal(i){return this.root_.reverseTraversal(i)}getIterator(i){return new C0(this.root_,null,this.comparator_,!1,i)}getIteratorFrom(i,e){return new C0(this.root_,i,this.comparator_,!1,e)}getReverseIteratorFrom(i,e){return new C0(this.root_,i,this.comparator_,!0,e)}getReverseIterator(i){return new C0(this.root_,null,this.comparator_,!0,i)}}function mr(o,i){return ye(o.name,i.name)}function ht(o,i){return ye(o,i)}B.EMPTY_NODE=new class _r{copy(i,e,n,r,s){return this}insert(i,e,n){return new K(i,e,null)}remove(i,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const tn=function(o){return"number"==typeof o?"number:"+Ci(o):"string:"+o},nn=function(o){if(o.isLeafNode()){const i=o.val();(0,p.hu)("string"==typeof i||"number"==typeof i||"object"==typeof i&&(0,p.r3)(i,".sv"),"Priority must be a string or number.")}else(0,p.hu)(o===pt||o.isEmpty(),"priority of unexpected type.");(0,p.hu)(o===pt||o.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let on,rn,sn,Oe=(()=>{class o{constructor(e,n=o.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,p.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),nn(this.priorityNode_)}static set __childrenNodeConstructor(e){on=e}static get __childrenNodeConstructor(){return on}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new o(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:o.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return x(e)?this:".priority"===C(e)?this.priorityNode_:o.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:o.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=C(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,p.hu)(".priority"!==r||1===se(e),".priority must be the last token in a path"),this.updateImmediateChild(r,o.__childrenNodeConstructor.EMPTY_NODE.updateChild(I(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+tn(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",e+="number"===n?Ci(this.value_):this.value_,this.lazyHash_=mi(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===o.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof o.__childrenNodeConstructor?-1:((0,p.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=o.VALUE_TYPE_ORDER.indexOf(n),l=o.VALUE_TYPE_ORDER.indexOf(r);return(0,p.hu)(s>=0,"Unknown leaf type: "+n),(0,p.hu)(l>=0,"Unknown leaf type: "+r),s===l?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&(this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_))}}return o.VALUE_TYPE_ORDER=["object","boolean","number","string"],o})();const S=new class Cr extends y0{compare(i,e){const n=i.node.getPriority(),r=e.node.getPriority(),s=n.compareTo(r);return 0===s?ye(i.name,e.name):s}isDefinedOn(i){return!i.getPriority().isEmpty()}indexedValueChanged(i,e){return!i.getPriority().equals(e.getPriority())}minPost(){return T.MIN}maxPost(){return new T(ie,new Oe("[PRIORITY-POST]",sn))}makePost(i,e){const n=rn(i);return new T(e,new Oe("[PRIORITY-POST]",n))}toString(){return".priority"}},xr=Math.log(2);class Tr{constructor(i){this.count=parseInt(Math.log(i+1)/xr,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=i+1&r}nextBitIsOne(){const i=!(this.bits_&1<<this.current_);return this.current_--,i}}const x0=function(o,i,e,n){o.sort(i);const r=function(c,d){const u=d-c;let h,f;if(0===u)return null;if(1===u)return h=o[c],f=e?e(h):h,new K(f,h.node,K.BLACK,null,null);{const _=parseInt(u/2,10)+c,g=r(c,_),v=r(_+1,d);return h=o[_],f=e?e(h):h,new K(f,h.node,K.BLACK,g,v)}},a=function(c){let d=null,u=null,h=o.length;const f=function(g,v){const A=h-g,Z=h;h-=g;const z0=r(A+1,Z),ai=o[A],Ac=e?e(ai):ai;_(new K(Ac,ai.node,v,null,z0))},_=function(g){d?(d.left=g,d=g):(u=g,d=g)};for(let g=0;g<c.count;++g){const v=c.nextBitIsOne(),A=Math.pow(2,c.count-(g+1));v?f(A,K.BLACK):(f(A,K.BLACK),f(A,K.RED))}return u}(new Tr(o.length));return new B(n||i,a)};let ft;const Me={};class ne{constructor(i,e){this.indexes_=i,this.indexSet_=e}static get Default(){return(0,p.hu)(Me&&S,"ChildrenNode.ts has not been loaded"),ft=ft||new ne({".priority":Me},{".priority":S}),ft}get(i){const e=(0,p.DV)(this.indexes_,i);if(!e)throw new Error("No index defined for "+i);return e instanceof B?e:null}hasIndex(i){return(0,p.r3)(this.indexSet_,i.toString())}addIndex(i,e){(0,p.hu)(i!==$,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const s=e.getIterator(T.Wrap);let a,l=s.getNext();for(;l;)r=r||i.isDefinedOn(l.node),n.push(l),l=s.getNext();a=r?x0(n,i.getCompare()):Me;const c=i.toString(),d=Object.assign({},this.indexSet_);d[c]=i;const u=Object.assign({},this.indexes_);return u[c]=a,new ne(u,d)}addToIndexes(i,e){const n=(0,p.UI)(this.indexes_,(r,s)=>{const l=(0,p.DV)(this.indexSet_,s);if((0,p.hu)(l,"Missing index implementation for "+s),r===Me){if(l.isDefinedOn(i.node)){const a=[],c=e.getIterator(T.Wrap);let d=c.getNext();for(;d;)d.name!==i.name&&a.push(d),d=c.getNext();return a.push(i),x0(a,l.getCompare())}return Me}{const a=e.get(i.name);let c=r;return a&&(c=c.remove(new T(i.name,a))),c.insert(i,i.node)}});return new ne(n,this.indexSet_)}removeFromIndexes(i,e){const n=(0,p.UI)(this.indexes_,r=>{if(r===Me)return r;{const s=e.get(i.name);return s?r.remove(new T(i.name,s)):r}});return new ne(n,this.indexSet_)}}let Je,y=(()=>{class o{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&nn(this.priorityNode_),this.children_.isEmpty()&&(0,p.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Je||(Je=new o(new B(ht),null,ne.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Je}updatePriority(e){return this.children_.isEmpty()?this:new o(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const n=this.children_.get(e);return null===n?Je:n}}getChild(e){const n=C(e);return null===n?this:this.getImmediateChild(n).getChild(I(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,n){if((0,p.hu)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);{const r=new T(e,n);let s,l;n.isEmpty()?(s=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),l=this.indexMap_.addToIndexes(r,this.children_));const a=s.isEmpty()?Je:this.priorityNode_;return new o(s,a,l)}}updateChild(e,n){const r=C(e);if(null===r)return n;{(0,p.hu)(".priority"!==C(e)||1===se(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(I(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,l=!0;if(this.forEachChild(S,(a,c)=>{n[a]=c.val(e),r++,l&&o.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):l=!1}),!e&&l&&s<2*r){const a=[];for(const c in n)a[c]=n[c];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+tn(this.getPriority().val())+":"),this.forEachChild(S,(n,r)=>{const s=r.hash();""!==s&&(e+=":"+n+":"+s)}),this.lazyHash_=""===e?"":mi(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const l=s.getPredecessorKey(new T(e,n));return l?l.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new T(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new T(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,T.Wrap);let l=s.peek();for(;null!=l&&n.compare(l,e)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,T.Wrap);let l=s.peek();for(;null!=l&&n.compare(l,e)>0;)s.getNext(),l=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ke?-1:0}withIndex(e){if(e===$||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new o(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===$||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority())){if(this.children_.count()===n.children_.count()){const r=this.getIterator(S),s=n.getIterator(S);let l=r.getNext(),a=s.getNext();for(;l&&a;){if(l.name!==a.name||!l.node.equals(a.node))return!1;l=r.getNext(),a=s.getNext()}return null===l&&null===a}return!1}return!1}}resolveIndex_(e){return e===$?null:this.indexMap_.get(e.toString())}}return o.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,o})();const Ke=new class Pr extends y{constructor(){super(new B(ht),y.EMPTY_NODE,ne.Default)}compareTo(i){return i===this?0:1}equals(i){return i===this}getPriority(){return this}getImmediateChild(i){return y.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(T,{MIN:{value:new T(oe,y.EMPTY_NODE)},MAX:{value:new T(ie,Ke)}}),en.__EMPTY_NODE=y.EMPTY_NODE,Oe.__childrenNodeConstructor=y,function gr(o){pt=o}(Ke),function vr(o){sn=o}(Ke);const br=!0;function M(o,i=null){if(null===o)return y.EMPTY_NODE;if("object"==typeof o&&".priority"in o&&(i=o[".priority"]),(0,p.hu)(null===i||"string"==typeof i||"number"==typeof i||"object"==typeof i&&".sv"in i,"Invalid priority type found: "+typeof i),"object"==typeof o&&".value"in o&&null!==o[".value"]&&(o=o[".value"]),"object"!=typeof o||".sv"in o)return new Oe(o,M(i));if(o instanceof Array||!br){let e=y.EMPTY_NODE;return R(o,(n,r)=>{if((0,p.r3)(o,n)&&"."!==n.substring(0,1)){const s=M(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(n,s))}}),e.updatePriority(M(i))}{const e=[];let n=!1;if(R(o,(l,a)=>{if("."!==l.substring(0,1)){const c=M(a);c.isEmpty()||(n=n||!c.getPriority().isEmpty(),e.push(new T(l,c)))}}),0===e.length)return y.EMPTY_NODE;const s=x0(e,mr,l=>l.name,ht);if(n){const l=x0(e,S.getCompare());return new y(s,M(i),new ne({".priority":l},{".priority":S}))}return new y(s,M(i),ne.Default)}}!function yr(o){rn=o}(M);class _t extends y0{constructor(i){super(),this.indexPath_=i,(0,p.hu)(!x(i)&&".priority"!==C(i),"Can't create PathIndex with empty path or .priority key")}extractChild(i){return i.getChild(this.indexPath_)}isDefinedOn(i){return!i.getChild(this.indexPath_).isEmpty()}compare(i,e){const n=this.extractChild(i.node),r=this.extractChild(e.node),s=n.compareTo(r);return 0===s?ye(i.name,e.name):s}makePost(i,e){const n=M(i),r=y.EMPTY_NODE.updateChild(this.indexPath_,n);return new T(e,r)}maxPost(){const i=y.EMPTY_NODE.updateChild(this.indexPath_,Ke);return new T(ie,i)}toString(){return We(this.indexPath_,0).join("/")}}const mt=new class wr extends y0{compare(i,e){const n=i.node.compareTo(e.node);return 0===n?ye(i.name,e.name):n}isDefinedOn(i){return!0}indexedValueChanged(i,e){return!i.equals(e)}minPost(){return T.MIN}maxPost(){return T.MAX}makePost(i,e){const n=M(i);return new T(e,n)}toString(){return".value"}};function ln(o){return{type:"value",snapshotNode:o}}function Ne(o,i){return{type:"child_added",snapshotNode:i,childName:o}}function Ye(o,i){return{type:"child_removed",snapshotNode:i,childName:o}}function Ve(o,i,e){return{type:"child_changed",snapshotNode:i,childName:o,oldSnap:e}}class gt{constructor(i){this.index_=i}updateChild(i,e,n,r,s,l){(0,p.hu)(i.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=i.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()||(null!=l&&(n.isEmpty()?i.hasChild(e)?l.trackChildChange(Ye(e,a)):(0,p.hu)(i.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?l.trackChildChange(Ne(e,n)):l.trackChildChange(Ve(e,n,a))),i.isLeafNode()&&n.isEmpty())?i:i.updateImmediateChild(e,n).withIndex(this.index_)}updateFullNode(i,e,n){return null!=n&&(i.isLeafNode()||i.forEachChild(S,(r,s)=>{e.hasChild(r)||n.trackChildChange(Ye(r,s))}),e.isLeafNode()||e.forEachChild(S,(r,s)=>{if(i.hasChild(r)){const l=i.getImmediateChild(r);l.equals(s)||n.trackChildChange(Ve(r,s,l))}else n.trackChildChange(Ne(r,s))})),e.withIndex(this.index_)}updatePriority(i,e){return i.isEmpty()?y.EMPTY_NODE:i.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class je{constructor(i){this.indexedFilter_=new gt(i.getIndex()),this.index_=i.getIndex(),this.startPost_=je.getStartPost_(i),this.endPost_=je.getEndPost_(i),this.startIsInclusive_=!i.startAfterSet_,this.endIsInclusive_=!i.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(i){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),i)<=0:this.index_.compare(this.getStartPost(),i)<0,n=this.endIsInclusive_?this.index_.compare(i,this.getEndPost())<=0:this.index_.compare(i,this.getEndPost())<0;return e&&n}updateChild(i,e,n,r,s,l){return this.matches(new T(e,n))||(n=y.EMPTY_NODE),this.indexedFilter_.updateChild(i,e,n,r,s,l)}updateFullNode(i,e,n){e.isLeafNode()&&(e=y.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(y.EMPTY_NODE);const s=this;return e.forEachChild(S,(l,a)=>{s.matches(new T(l,a))||(r=r.updateImmediateChild(l,y.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(i,r,n)}updatePriority(i,e){return i}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(i){if(i.hasStart()){const e=i.getIndexStartName();return i.getIndex().makePost(i.getIndexStartValue(),e)}return i.getIndex().minPost()}static getEndPost_(i){if(i.hasEnd()){const e=i.getIndexEndName();return i.getIndex().makePost(i.getIndexEndValue(),e)}return i.getIndex().maxPost()}}class Sr{constructor(i){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const n=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=e=>{const n=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new je(i),this.index_=i.getIndex(),this.limit_=i.getLimit(),this.reverse_=!i.isViewFromLeft(),this.startIsInclusive_=!i.startAfterSet_,this.endIsInclusive_=!i.endBeforeSet_}updateChild(i,e,n,r,s,l){return this.rangedFilter_.matches(new T(e,n))||(n=y.EMPTY_NODE),i.getImmediateChild(e).equals(n)?i:i.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(i,e,n,r,s,l):this.fullLimitUpdateChild_(i,e,n,s,l)}updateFullNode(i,e,n){let r;if(e.isLeafNode()||e.isEmpty())r=y.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=y.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;r=r.updateImmediateChild(a.name,a.node),l++}}}else{let s;r=e.withIndex(this.index_),r=r.updatePriority(y.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let l=0;for(;s.hasNext();){const a=s.getNext();l<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?l++:r=r.updateImmediateChild(a.name,y.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(i,r,n)}updatePriority(i,e){return i}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(i,e,n,r,s){let l;if(this.reverse_){const h=this.index_.getCompare();l=(f,_)=>h(_,f)}else l=this.index_.getCompare();const a=i;(0,p.hu)(a.numChildren()===this.limit_,"");const c=new T(e,n),d=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(e)){const h=a.getImmediateChild(e);let f=r.getChildAfterChild(this.index_,d,this.reverse_);for(;null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);const _=null==f?1:l(f,c);if(u&&!n.isEmpty()&&_>=0)return s?.trackChildChange(Ve(e,n,h)),a.updateImmediateChild(e,n);{s?.trackChildChange(Ye(e,h));const v=a.updateImmediateChild(e,y.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(s?.trackChildChange(Ne(f.name,f.node)),v.updateImmediateChild(f.name,f.node)):v}}return n.isEmpty()?i:u&&l(d,c)>=0?(null!=s&&(s.trackChildChange(Ye(d.name,d.node)),s.trackChildChange(Ne(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(d.name,y.EMPTY_NODE)):i}}class yt{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=S}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,p.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,p.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:oe}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,p.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,p.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ie}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,p.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===S}copy(){const i=new yt;return i.limitSet_=this.limitSet_,i.limit_=this.limit_,i.startSet_=this.startSet_,i.startAfterSet_=this.startAfterSet_,i.indexStartValue_=this.indexStartValue_,i.startNameSet_=this.startNameSet_,i.indexStartName_=this.indexStartName_,i.endSet_=this.endSet_,i.endBeforeSet_=this.endBeforeSet_,i.indexEndValue_=this.indexEndValue_,i.endNameSet_=this.endNameSet_,i.indexEndName_=this.indexEndName_,i.index_=this.index_,i.viewFrom_=this.viewFrom_,i}}function an(o){const i={};if(o.isDefault())return i;let e;if(o.index_===S?e="$priority":o.index_===mt?e="$value":o.index_===$?e="$key":((0,p.hu)(o.index_ instanceof _t,"Unrecognized index type!"),e=o.index_.toString()),i.orderBy=(0,p.Wl)(e),o.startSet_){const n=o.startAfterSet_?"startAfter":"startAt";i[n]=(0,p.Wl)(o.indexStartValue_),o.startNameSet_&&(i[n]+=","+(0,p.Wl)(o.indexStartName_))}if(o.endSet_){const n=o.endBeforeSet_?"endBefore":"endAt";i[n]=(0,p.Wl)(o.indexEndValue_),o.endNameSet_&&(i[n]+=","+(0,p.Wl)(o.indexEndName_))}return o.limitSet_&&(o.isViewFromLeft()?i.limitToFirst=o.limit_:i.limitToLast=o.limit_),i}function cn(o){const i={};if(o.startSet_&&(i.sp=o.indexStartValue_,o.startNameSet_&&(i.sn=o.indexStartName_),i.sin=!o.startAfterSet_),o.endSet_&&(i.ep=o.indexEndValue_,o.endNameSet_&&(i.en=o.indexEndName_),i.ein=!o.endBeforeSet_),o.limitSet_){i.l=o.limit_;let e=o.viewFrom_;""===e&&(e=o.isViewFromLeft()?"l":"r"),i.vf=e}return o.index_!==S&&(i.i=o.index_.toString()),i}class P0 extends Ji{constructor(i,e,n,r){super(),this.repoInfo_=i,this.onDataUpdate_=e,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Be("p:rest:"),this.listens_={}}reportStats(i){throw new Error("Method not implemented.")}static getListenId_(i,e){return void 0!==e?"tag$"+e:((0,p.hu)(i._queryParams.isDefault(),"should have a tag if it's not a default query."),i._path.toString())}listen(i,e,n,r){const s=i._path.toString();this.log_("Listen called for "+s+" "+i._queryIdentifier);const l=P0.getListenId_(i,n),a={};this.listens_[l]=a;const c=an(i._queryParams);this.restRequest_(s+".json",c,(d,u)=>{let h=u;if(404===d&&(h=null,d=null),null===d&&this.onDataUpdate_(s,h,!1,n),(0,p.DV)(this.listens_,l)===a){let f;f=d?401===d?"permission_denied":"rest_error:"+d:"ok",r(f,null)}})}unlisten(i,e){const n=P0.getListenId_(i,e);delete this.listens_[n]}get(i){const e=an(i._queryParams),n=i._path.toString(),r=new p.BH;return this.restRequest_(n+".json",e,(s,l)=>{let a=l;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(n,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(i){}restRequest_(i,e={},n){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+i+"?ns="+this.repoInfo_.namespace+(0,p.xO)(e);this.log_("Sending REST request for "+l);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+l+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=(0,p.cI)(a.responseText)}catch{D("Failed to parse JSON response for "+l+": "+a.responseText)}n(null,c)}else 401!==a.status&&404!==a.status&&D("Got unsuccessful REST response for "+l+" Status: "+a.status),n(a.status);n=null}},a.open("GET",l,!0),a.send()})}}class kr{constructor(){this.rootNode_=y.EMPTY_NODE}getNode(i){return this.rootNode_.getChild(i)}updateSnapshot(i,e){this.rootNode_=this.rootNode_.updateChild(i,e)}}function b0(){return{value:null,children:new Map}}function ke(o,i,e){if(x(i))o.value=e,o.children.clear();else if(null!==o.value)o.value=o.value.updateChild(i,e);else{const n=C(i);o.children.has(n)||o.children.set(n,b0()),ke(o.children.get(n),i=I(i),e)}}function Tt(o,i,e){null!==o.value?e(i,o.value):function Rr(o,i){o.children.forEach((e,n)=>{i(n,e)})}(o,(n,r)=>{Tt(r,new b(i.toString()+"/"+n),e)})}class Zr{constructor(i){this.collection_=i,this.last_=null}get(){const i=this.collection_.get(),e=Object.assign({},i);return this.last_&&R(this.last_,(n,r)=>{e[n]=e[n]-r}),this.last_=i,e}}class Ur{constructor(i,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Zr(i);const n=1e4+2e4*Math.random();qe(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const i=this.statsListener_.get(),e={};let n=!1;R(i,(r,s)=>{s>0&&(0,p.r3)(this.statsToReport_,r)&&(e[r]=s,n=!0)}),n&&this.server_.reportStats(e),qe(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var X=function(o){return o[o.OVERWRITE=0]="OVERWRITE",o[o.MERGE=1]="MERGE",o[o.ACK_USER_WRITE=2]="ACK_USER_WRITE",o[o.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",o}(X||{});function wt(o){return{fromUser:!1,fromServer:!0,queryId:o,tagged:!0}}class w0{constructor(i,e,n){this.path=i,this.affectedTree=e,this.revert=n,this.type=X.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(i){if(x(this.path)){if(null!=this.affectedTree.value)return(0,p.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new b(i));return new w0(P(),e,this.revert)}}return(0,p.hu)(C(this.path)===i,"operationForChild called for unrelated child."),new w0(I(this.path),this.affectedTree,this.revert)}}class ze{constructor(i,e){this.source=i,this.path=e,this.type=X.LISTEN_COMPLETE}operationForChild(i){return x(this.path)?new ze(this.source,P()):new ze(this.source,I(this.path))}}class xe{constructor(i,e,n){this.source=i,this.path=e,this.snap=n,this.type=X.OVERWRITE}operationForChild(i){return x(this.path)?new xe(this.source,P(),this.snap.getImmediateChild(i)):new xe(this.source,I(this.path),this.snap)}}class Re{constructor(i,e,n){this.source=i,this.path=e,this.children=n,this.type=X.MERGE}operationForChild(i){if(x(this.path)){const e=this.children.subtree(new b(i));return e.isEmpty()?null:e.value?new xe(this.source,P(),e.value):new Re(this.source,P(),e)}return(0,p.hu)(C(this.path)===i,"Can't get a merge for a child not on the path of the operation"),new Re(this.source,I(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class le{constructor(i,e,n){this.node_=i,this.fullyInitialized_=e,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(i){if(x(i))return this.isFullyInitialized()&&!this.filtered_;const e=C(i);return this.isCompleteForChild(e)}isCompleteForChild(i){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(i)}getNode(){return this.node_}}class Gr{constructor(i){this.query_=i,this.index_=this.query_._queryParams.getIndex()}}function $e(o,i,e,n,r,s){const l=n.filter(a=>a.type===e);l.sort((a,c)=>function qr(o,i,e){if(null==i.childName||null==e.childName)throw(0,p.g5)("Should only compare child_ events.");const n=new T(i.childName,i.snapshotNode),r=new T(e.childName,e.snapshotNode);return o.index_.compare(n,r)}(o,a,c)),l.forEach(a=>{const c=function Fr(o,i,e){return"value"===i.type||"child_removed"===i.type||(i.prevName=e.getPredecessorChildName(i.childName,i.snapshotNode,o.index_)),i}(o,a,s);r.forEach(d=>{d.respondsTo(a.type)&&i.push(d.createEvent(c,o.query_))})})}function I0(o,i){return{eventCache:o,serverCache:i}}function Xe(o,i,e,n){return I0(new le(i,e,n),o.serverCache)}function un(o,i,e,n){return I0(o.eventCache,new le(i,e,n))}function S0(o){return o.eventCache.isFullyInitialized()?o.eventCache.getNode():null}function Te(o){return o.serverCache.isFullyInitialized()?o.serverCache.getNode():null}let It;class E{constructor(i,e=(()=>(It||(It=new B(Io)),It))()){this.value=i,this.children=e}static fromObject(i){let e=new E(null);return R(i,(n,r)=>{e=e.set(new b(n),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(i,e){if(null!=this.value&&e(this.value))return{path:P(),value:this.value};if(x(i))return null;{const n=C(i),r=this.children.get(n);if(null!==r){const s=r.findRootMostMatchingPathAndValue(I(i),e);return null!=s?{path:O(new b(n),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(i){return this.findRootMostMatchingPathAndValue(i,()=>!0)}subtree(i){if(x(i))return this;{const e=C(i),n=this.children.get(e);return null!==n?n.subtree(I(i)):new E(null)}}set(i,e){if(x(i))return new E(e,this.children);{const n=C(i),s=(this.children.get(n)||new E(null)).set(I(i),e),l=this.children.insert(n,s);return new E(this.value,l)}}remove(i){if(x(i))return this.children.isEmpty()?new E(null):new E(null,this.children);{const e=C(i),n=this.children.get(e);if(n){const r=n.remove(I(i));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new E(null):new E(this.value,s)}return this}}get(i){if(x(i))return this.value;{const e=C(i),n=this.children.get(e);return n?n.get(I(i)):null}}setTree(i,e){if(x(i))return e;{const n=C(i),s=(this.children.get(n)||new E(null)).setTree(I(i),e);let l;return l=s.isEmpty()?this.children.remove(n):this.children.insert(n,s),new E(this.value,l)}}fold(i){return this.fold_(P(),i)}fold_(i,e){const n={};return this.children.inorderTraversal((r,s)=>{n[r]=s.fold_(O(i,r),e)}),e(i,this.value,n)}findOnPath(i,e){return this.findOnPath_(i,P(),e)}findOnPath_(i,e,n){const r=!!this.value&&n(e,this.value);if(r)return r;if(x(i))return null;{const s=C(i),l=this.children.get(s);return l?l.findOnPath_(I(i),O(e,s),n):null}}foreachOnPath(i,e){return this.foreachOnPath_(i,P(),e)}foreachOnPath_(i,e,n){if(x(i))return this;{this.value&&n(e,this.value);const r=C(i),s=this.children.get(r);return s?s.foreachOnPath_(I(i),O(e,r),n):new E(null)}}foreach(i){this.foreach_(P(),i)}foreach_(i,e){this.children.inorderTraversal((n,r)=>{r.foreach_(O(i,n),e)}),this.value&&e(i,this.value)}foreachChild(i){this.children.inorderTraversal((e,n)=>{n.value&&i(e,n.value)})}}class Y{constructor(i){this.writeTree_=i}static empty(){return new Y(new E(null))}}function e0(o,i,e){if(x(i))return new Y(new E(e));{const n=o.writeTree_.findRootMostValueAndPath(i);if(null!=n){const r=n.path;let s=n.value;const l=G(r,i);return s=s.updateChild(l,e),new Y(o.writeTree_.set(r,s))}{const r=new E(e),s=o.writeTree_.setTree(i,r);return new Y(s)}}}function St(o,i,e){let n=o;return R(e,(r,s)=>{n=e0(n,O(i,r),s)}),n}function hn(o,i){if(x(i))return Y.empty();{const e=o.writeTree_.setTree(i,new E(null));return new Y(e)}}function Et(o,i){return null!=Pe(o,i)}function Pe(o,i){const e=o.writeTree_.findRootMostValueAndPath(i);return null!=e?o.writeTree_.get(e.path).getChild(G(e.path,i)):null}function pn(o){const i=[],e=o.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(S,(n,r)=>{i.push(new T(n,r))}):o.writeTree_.children.inorderTraversal((n,r)=>{null!=r.value&&i.push(new T(n,r.value))}),i}function ae(o,i){if(x(i))return o;{const e=Pe(o,i);return new Y(null!=e?new E(e):o.writeTree_.subtree(i))}}function At(o){return o.writeTree_.isEmpty()}function Ze(o,i){return fn(P(),o.writeTree_,i)}function fn(o,i,e){if(null!=i.value)return e.updateChild(o,i.value);{let n=null;return i.children.inorderTraversal((r,s)=>{".priority"===r?((0,p.hu)(null!==s.value,"Priority writes must always be leaf nodes"),n=s.value):e=fn(O(o,r),s,e)}),!e.getChild(o).isEmpty()&&null!==n&&(e=e.updateChild(O(o,".priority"),n)),e}}function E0(o,i){return vn(i,o)}function Yr(o,i){if(o.snap)return W(o.path,i);for(const e in o.children)if(o.children.hasOwnProperty(e)&&W(O(o.path,e),i))return!0;return!1}function jr(o){return o.visible}function _n(o,i,e){let n=Y.empty();for(let r=0;r<o.length;++r){const s=o[r];if(i(s)){const l=s.path;let a;if(s.snap)W(e,l)?(a=G(e,l),n=e0(n,a,s.snap)):W(l,e)&&(a=G(l,e),n=e0(n,P(),s.snap.getChild(a)));else{if(!s.children)throw(0,p.g5)("WriteRecord should have .snap or .children");if(W(e,l))a=G(e,l),n=St(n,a,s.children);else if(W(l,e))if(a=G(l,e),x(a))n=St(n,P(),s.children);else{const c=(0,p.DV)(s.children,C(a));if(c){const d=c.getChild(I(a));n=e0(n,P(),d)}}}}}return n}function mn(o,i,e,n,r){if(n||r){const s=ae(o.visibleWrites,i);return!r&&At(s)?e:r||null!=e||Et(s,P())?Ze(_n(o.allWrites,function(d){return(d.visible||r)&&(!n||!~n.indexOf(d.writeId))&&(W(d.path,i)||W(i,d.path))},i),e||y.EMPTY_NODE):null}{const s=Pe(o.visibleWrites,i);if(null!=s)return s;{const l=ae(o.visibleWrites,i);return At(l)?e:null!=e||Et(l,P())?Ze(l,e||y.EMPTY_NODE):null}}}function A0(o,i,e,n){return mn(o.writeTree,o.treePath,i,e,n)}function Ot(o,i){return function zr(o,i,e){let n=y.EMPTY_NODE;const r=Pe(o.visibleWrites,i);if(r)return r.isLeafNode()||r.forEachChild(S,(s,l)=>{n=n.updateImmediateChild(s,l)}),n;if(e){const s=ae(o.visibleWrites,i);return e.forEachChild(S,(l,a)=>{const c=Ze(ae(s,new b(l)),a);n=n.updateImmediateChild(l,c)}),pn(s).forEach(l=>{n=n.updateImmediateChild(l.name,l.node)}),n}return pn(ae(o.visibleWrites,i)).forEach(l=>{n=n.updateImmediateChild(l.name,l.node)}),n}(o.writeTree,o.treePath,i)}function gn(o,i,e,n){return function $r(o,i,e,n,r){(0,p.hu)(n||r,"Either existingEventSnap or existingServerSnap must exist");const s=O(i,e);if(Et(o.visibleWrites,s))return null;{const l=ae(o.visibleWrites,s);return At(l)?r.getChild(e):Ze(l,r.getChild(e))}}(o.writeTree,o.treePath,i,e,n)}function O0(o,i){return function es(o,i){return Pe(o.visibleWrites,i)}(o.writeTree,O(o.treePath,i))}function Mt(o,i,e){return function Xr(o,i,e,n){const r=O(i,e),s=Pe(o.visibleWrites,r);return null!=s?s:n.isCompleteForChild(e)?Ze(ae(o.visibleWrites,r),n.getNode().getImmediateChild(e)):null}(o.writeTree,o.treePath,i,e)}function yn(o,i){return vn(O(o.treePath,i),o.writeTree)}function vn(o,i){return{treePath:o,writeTree:i}}class os{constructor(){this.changeMap=new Map}trackChildChange(i){const e=i.type,n=i.childName;(0,p.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,p.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(n,Ve(n,i.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(n,Ye(n,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(n,Ne(n,i.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,p.g5)("Illegal combination of changes: "+i+" occurred after "+r);this.changeMap.set(n,Ve(n,i.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,i)}getChanges(){return Array.from(this.changeMap.values())}}const Cn=new class rs{getCompleteChild(i){return null}getChildAfterChild(i,e,n){return null}};class Nt{constructor(i,e,n=null){this.writes_=i,this.viewCache_=e,this.optCompleteServerCache_=n}getCompleteChild(i){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(i))return e.getNode().getImmediateChild(i);{const n=null!=this.optCompleteServerCache_?new le(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Mt(this.writes_,i,n)}}getChildAfterChild(i,e,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Te(this.viewCache_),s=function ns(o,i,e,n,r,s){return function ts(o,i,e,n,r,s,l){let a;const c=ae(o.visibleWrites,i),d=Pe(c,P());if(null!=d)a=d;else{if(null==e)return[];a=Ze(c,e)}if(a=a.withIndex(l),a.isEmpty()||a.isLeafNode())return[];{const u=[],h=l.getCompare(),f=s?a.getReverseIteratorFrom(n,l):a.getIteratorFrom(n,l);let _=f.getNext();for(;_&&u.length<r;)0!==h(_,n)&&u.push(_),_=f.getNext();return u}}(o.writeTree,o.treePath,i,e,n,r,s)}(this.writes_,r,e,1,n,i);return 0===s.length?null:s[0]}}function xn(o,i,e,n,r,s){const l=i.eventCache;if(null!=O0(n,e))return i;{let a,c;if(x(e))if((0,p.hu)(i.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),i.serverCache.isFiltered()){const d=Te(i),h=Ot(n,d instanceof y?d:y.EMPTY_NODE);a=o.filter.updateFullNode(i.eventCache.getNode(),h,s)}else{const d=A0(n,Te(i));a=o.filter.updateFullNode(i.eventCache.getNode(),d,s)}else{const d=C(e);if(".priority"===d){(0,p.hu)(1===se(e),"Can't have a priority with additional path components");const u=l.getNode();c=i.serverCache.getNode();const h=gn(n,e,u,c);a=null!=h?o.filter.updatePriority(u,h):l.getNode()}else{const u=I(e);let h;if(l.isCompleteForChild(d)){c=i.serverCache.getNode();const f=gn(n,e,l.getNode(),c);h=null!=f?l.getNode().getImmediateChild(d).updateChild(u,f):l.getNode().getImmediateChild(d)}else h=Mt(n,d,i.serverCache);a=null!=h?o.filter.updateChild(l.getNode(),d,h,u,r,s):l.getNode()}}return Xe(i,a,l.isFullyInitialized()||x(e),o.filter.filtersNodes())}}function M0(o,i,e,n,r,s,l,a){const c=i.serverCache;let d;const u=l?o.filter:o.filter.getIndexedFilter();if(x(e))d=u.updateFullNode(c.getNode(),n,null);else if(u.filtersNodes()&&!c.isFiltered()){const _=c.getNode().updateChild(e,n);d=u.updateFullNode(c.getNode(),_,null)}else{const _=C(e);if(!c.isCompleteForPath(e)&&se(e)>1)return i;const g=I(e),A=c.getNode().getImmediateChild(_).updateChild(g,n);d=".priority"===_?u.updatePriority(c.getNode(),A):u.updateChild(c.getNode(),_,A,g,Cn,null)}const h=un(i,d,c.isFullyInitialized()||x(e),u.filtersNodes());return xn(o,h,e,r,new Nt(r,h,s),a)}function kt(o,i,e,n,r,s,l){const a=i.eventCache;let c,d;const u=new Nt(r,i,s);if(x(e))d=o.filter.updateFullNode(i.eventCache.getNode(),n,l),c=Xe(i,d,!0,o.filter.filtersNodes());else{const h=C(e);if(".priority"===h)d=o.filter.updatePriority(i.eventCache.getNode(),n),c=Xe(i,d,a.isFullyInitialized(),a.isFiltered());else{const f=I(e),_=a.getNode().getImmediateChild(h);let g;if(x(f))g=n;else{const v=u.getCompleteChild(h);g=null!=v?".priority"===ct(f)&&v.getChild(ji(f)).isEmpty()?v:v.updateChild(f,n):y.EMPTY_NODE}c=_.equals(g)?i:Xe(i,o.filter.updateChild(a.getNode(),h,g,f,u,l),a.isFullyInitialized(),o.filter.filtersNodes())}}return c}function Tn(o,i){return o.eventCache.isCompleteForChild(i)}function Pn(o,i,e){return e.foreach((n,r)=>{i=i.updateChild(n,r)}),i}function Rt(o,i,e,n,r,s,l,a){if(i.serverCache.getNode().isEmpty()&&!i.serverCache.isFullyInitialized())return i;let d,c=i;d=x(e)?n:new E(null).setTree(e,n);const u=i.serverCache.getNode();return d.children.inorderTraversal((h,f)=>{if(u.hasChild(h)){const g=Pn(0,i.serverCache.getNode().getImmediateChild(h),f);c=M0(o,c,new b(h),g,r,s,l,a)}}),d.children.inorderTraversal((h,f)=>{const _=!i.serverCache.isCompleteForChild(h)&&null===f.value;if(!u.hasChild(h)&&!_){const v=Pn(0,i.serverCache.getNode().getImmediateChild(h),f);c=M0(o,c,new b(h),v,r,s,l,a)}}),c}class fs{constructor(i,e){this.query_=i,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new gt(n.getIndex()),s=function Er(o){return o.loadsAllData()?new gt(o.getIndex()):o.hasLimit()?new Sr(o):new je(o)}(n);this.processor_=function ss(o){return{filter:o}}(s);const l=e.serverCache,a=e.eventCache,c=r.updateFullNode(y.EMPTY_NODE,l.getNode(),null),d=s.updateFullNode(y.EMPTY_NODE,a.getNode(),null),u=new le(c,l.isFullyInitialized(),r.filtersNodes()),h=new le(d,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=I0(h,u),this.eventGenerator_=new Gr(this.query_)}get query(){return this.query_}}function gs(o,i){const e=Te(o.viewCache_);return e&&(o.query._queryParams.loadsAllData()||!x(i)&&!e.getImmediateChild(C(i)).isEmpty())?e.getChild(i):null}function bn(o){return 0===o.eventRegistrations_.length}function wn(o,i,e){const n=[];if(e){(0,p.hu)(null==i,"A cancel should cancel all event registrations.");const r=o.query._path;o.eventRegistrations_.forEach(s=>{const l=s.createCancelEvent(e,r);l&&n.push(l)})}if(i){let r=[];for(let s=0;s<o.eventRegistrations_.length;++s){const l=o.eventRegistrations_[s];if(l.matches(i)){if(i.hasAnyCallback()){r=r.concat(o.eventRegistrations_.slice(s+1));break}}else r.push(l)}o.eventRegistrations_=r}else o.eventRegistrations_=[];return n}function In(o,i,e,n){i.type===X.MERGE&&null!==i.source.queryId&&((0,p.hu)(Te(o.viewCache_),"We should always have a full cache before handling merges"),(0,p.hu)(S0(o.viewCache_),"Missing event cache, even though we have a server cache"));const r=o.viewCache_,s=function as(o,i,e,n,r){const s=new os;let l,a;if(e.type===X.OVERWRITE){const d=e;d.source.fromUser?l=kt(o,i,d.path,d.snap,n,r,s):((0,p.hu)(d.source.fromServer,"Unknown source."),a=d.source.tagged||i.serverCache.isFiltered()&&!x(d.path),l=M0(o,i,d.path,d.snap,n,r,a,s))}else if(e.type===X.MERGE){const d=e;d.source.fromUser?l=function ds(o,i,e,n,r,s,l){let a=i;return n.foreach((c,d)=>{const u=O(e,c);Tn(i,C(u))&&(a=kt(o,a,u,d,r,s,l))}),n.foreach((c,d)=>{const u=O(e,c);Tn(i,C(u))||(a=kt(o,a,u,d,r,s,l))}),a}(o,i,d.path,d.children,n,r,s):((0,p.hu)(d.source.fromServer,"Unknown source."),a=d.source.tagged||i.serverCache.isFiltered(),l=Rt(o,i,d.path,d.children,n,r,a,s))}else if(e.type===X.ACK_USER_WRITE){const d=e;l=d.revert?function ps(o,i,e,n,r,s){let l;if(null!=O0(n,e))return i;{const a=new Nt(n,i,r),c=i.eventCache.getNode();let d;if(x(e)||".priority"===C(e)){let u;if(i.serverCache.isFullyInitialized())u=A0(n,Te(i));else{const h=i.serverCache.getNode();(0,p.hu)(h instanceof y,"serverChildren would be complete if leaf node"),u=Ot(n,h)}d=o.filter.updateFullNode(c,u,s)}else{const u=C(e);let h=Mt(n,u,i.serverCache);null==h&&i.serverCache.isCompleteForChild(u)&&(h=c.getImmediateChild(u)),d=null!=h?o.filter.updateChild(c,u,h,I(e),a,s):i.eventCache.getNode().hasChild(u)?o.filter.updateChild(c,u,y.EMPTY_NODE,I(e),a,s):c,d.isEmpty()&&i.serverCache.isFullyInitialized()&&(l=A0(n,Te(i)),l.isLeafNode()&&(d=o.filter.updateFullNode(d,l,s)))}return l=i.serverCache.isFullyInitialized()||null!=O0(n,P()),Xe(i,d,l,o.filter.filtersNodes())}}(o,i,d.path,n,r,s):function us(o,i,e,n,r,s,l){if(null!=O0(r,e))return i;const a=i.serverCache.isFiltered(),c=i.serverCache;if(null!=n.value){if(x(e)&&c.isFullyInitialized()||c.isCompleteForPath(e))return M0(o,i,e,c.getNode().getChild(e),r,s,a,l);if(x(e)){let d=new E(null);return c.getNode().forEachChild($,(u,h)=>{d=d.set(new b(u),h)}),Rt(o,i,e,d,r,s,a,l)}return i}{let d=new E(null);return n.foreach((u,h)=>{const f=O(e,u);c.isCompleteForPath(f)&&(d=d.set(u,c.getNode().getChild(f)))}),Rt(o,i,e,d,r,s,a,l)}}(o,i,d.path,d.affectedTree,n,r,s)}else{if(e.type!==X.LISTEN_COMPLETE)throw(0,p.g5)("Unknown operation type: "+e.type);l=function hs(o,i,e,n,r){const s=i.serverCache;return xn(o,un(i,s.getNode(),s.isFullyInitialized()||x(e),s.isFiltered()),e,n,Cn,r)}(o,i,e.path,n,s)}const c=s.getChanges();return function cs(o,i,e){const n=i.eventCache;if(n.isFullyInitialized()){const r=n.getNode().isLeafNode()||n.getNode().isEmpty(),s=S0(o);(e.length>0||!o.eventCache.isFullyInitialized()||r&&!n.getNode().equals(s)||!n.getNode().getPriority().equals(s.getPriority()))&&e.push(ln(S0(i)))}}(i,l,c),{viewCache:l,changes:c}}(o.processor_,r,i,e,n);return function ls(o,i){(0,p.hu)(i.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),(0,p.hu)(i.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed")}(o.processor_,s.viewCache),(0,p.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),o.viewCache_=s.viewCache,Sn(o,s.changes,s.viewCache.eventCache.getNode(),null)}function Sn(o,i,e,n){return function Br(o,i,e,n){const r=[],s=[];return i.forEach(l=>{"child_changed"===l.type&&o.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function Ir(o,i){return{type:"child_moved",snapshotNode:i,childName:o}}(l.childName,l.snapshotNode))}),$e(o,r,"child_removed",i,n,e),$e(o,r,"child_added",i,n,e),$e(o,r,"child_moved",s,n,e),$e(o,r,"child_changed",i,n,e),$e(o,r,"value",i,n,e),r}(o.eventGenerator_,i,e,n?[n]:o.eventRegistrations_)}let N0,R0;class En{constructor(){this.views=new Map}}function Zt(o,i,e,n){const r=i.source.queryId;if(null!==r){const s=o.views.get(r);return(0,p.hu)(null!=s,"SyncTree gave us an op for an invalid query."),In(s,i,e,n)}{let s=[];for(const l of o.views.values())s=s.concat(In(l,i,e,n));return s}}function An(o,i,e,n,r){const l=o.views.get(i._queryIdentifier);if(!l){let a=A0(e,r?n:null),c=!1;a?c=!0:n instanceof y?(a=Ot(e,n),c=!1):(a=y.EMPTY_NODE,c=!1);const d=I0(new le(a,c,!1),new le(n,r,!1));return new fs(i,d)}return l}function On(o){const i=[];for(const e of o.views.values())e.query._queryParams.loadsAllData()||i.push(e);return i}function ce(o,i){let e=null;for(const n of o.views.values())e=e||gs(n,i);return e}function Mn(o,i){return i._queryParams.loadsAllData()?k0(o):o.views.get(i._queryIdentifier)}function Nn(o,i){return null!=Mn(o,i)}function de(o){return null!=k0(o)}function k0(o){for(const i of o.views.values())if(i.query._queryParams.loadsAllData())return i;return null}let Ss=1;class kn{constructor(i){this.listenProvider_=i,this.syncPointTree_=new E(null),this.pendingWriteTree_=function is(){return{visibleWrites:Y.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Lt(o,i,e,n,r){return function Wr(o,i,e,n,r){(0,p.hu)(n>o.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),o.allWrites.push({path:i,snap:e,writeId:n,visible:r}),r&&(o.visibleWrites=e0(o.visibleWrites,i,e)),o.lastWriteId=n}(o.pendingWriteTree_,i,e,n,r),r?Le(o,new xe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},i,e)):[]}function ue(o,i,e=!1){const n=function Jr(o,i){for(let e=0;e<o.allWrites.length;e++){const n=o.allWrites[e];if(n.writeId===i)return n}return null}(o.pendingWriteTree_,i);if(function Kr(o,i){const e=o.allWrites.findIndex(a=>a.writeId===i);(0,p.hu)(e>=0,"removeWrite called with nonexistent writeId.");const n=o.allWrites[e];o.allWrites.splice(e,1);let r=n.visible,s=!1,l=o.allWrites.length-1;for(;r&&l>=0;){const a=o.allWrites[l];a.visible&&(l>=e&&Yr(a,n.path)?r=!1:W(n.path,a.path)&&(s=!0)),l--}return!!r&&(s?(function Vr(o){o.visibleWrites=_n(o.allWrites,jr,P()),o.lastWriteId=o.allWrites.length>0?o.allWrites[o.allWrites.length-1].writeId:-1}(o),!0):(n.snap?o.visibleWrites=hn(o.visibleWrites,n.path):R(n.children,c=>{o.visibleWrites=hn(o.visibleWrites,O(n.path,c))}),!0))}(o.pendingWriteTree_,i)){let s=new E(null);return null!=n.snap?s=s.set(P(),!0):R(n.children,l=>{s=s.set(new b(l),!0)}),Le(o,new w0(n.path,s,e))}return[]}function t0(o,i,e){return Le(o,new xe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i,e))}function Z0(o,i,e,n,r=!1){const s=i._path,l=o.syncPointTree_.get(s);let a=[];if(l&&("default"===i._queryIdentifier||Nn(l,i))){const c=function bs(o,i,e,n){const r=i._queryIdentifier,s=[];let l=[];const a=de(o);if("default"===r)for(const[c,d]of o.views.entries())l=l.concat(wn(d,e,n)),bn(d)&&(o.views.delete(c),d.query._queryParams.loadsAllData()||s.push(d.query));else{const c=o.views.get(r);c&&(l=l.concat(wn(c,e,n)),bn(c)&&(o.views.delete(r),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!de(o)&&s.push(new(function xs(){return(0,p.hu)(N0,"Reference.ts has not been loaded"),N0}())(i._repo,i._path)),{removed:s,events:l}}(l,i,e,n);(function Ts(o){return 0===o.views.size})(l)&&(o.syncPointTree_=o.syncPointTree_.remove(s));const d=c.removed;if(a=c.events,!r){const u=-1!==d.findIndex(f=>f._queryParams.loadsAllData()),h=o.syncPointTree_.findOnPath(s,(f,_)=>de(_));if(u&&!h){const f=o.syncPointTree_.subtree(s);if(!f.isEmpty()){const _=function Rs(o){return o.fold((i,e,n)=>{if(e&&de(e))return[k0(e)];{let r=[];return e&&(r=On(e)),R(n,(s,l)=>{r=r.concat(l)}),r}})}(f);for(let g=0;g<_.length;++g){const v=_[g],A=v.query,Z=Dn(o,v);o.listenProvider_.startListening(o0(A),n0(o,A),Z.hashFn,Z.onComplete)}}}!h&&d.length>0&&!n&&(u?o.listenProvider_.stopListening(o0(i),null):d.forEach(f=>{const _=o.queryToTagMap.get(D0(f));o.listenProvider_.stopListening(o0(f),_)}))}!function Zs(o,i){for(let e=0;e<i.length;++e){const n=i[e];if(!n._queryParams.loadsAllData()){const r=D0(n),s=o.queryToTagMap.get(r);o.queryToTagMap.delete(r),o.tagToQueryMap.delete(s)}}}(o,d)}return a}function Rn(o,i,e,n){const r=Ut(o,n);if(null!=r){const s=Gt(r),l=s.path,a=s.queryId,c=G(l,i);return Bt(o,l,new xe(wt(a),c,e))}return[]}function Dt(o,i,e,n=!1){const r=i._path;let s=null,l=!1;o.syncPointTree_.foreachOnPath(r,(f,_)=>{const g=G(f,r);s=s||ce(_,g),l=l||de(_)});let c,a=o.syncPointTree_.get(r);a?(l=l||de(a),s=s||ce(a,P())):(a=new En,o.syncPointTree_=o.syncPointTree_.set(r,a)),null!=s?c=!0:(c=!1,s=y.EMPTY_NODE,o.syncPointTree_.subtree(r).foreachChild((_,g)=>{const v=ce(g,P());v&&(s=s.updateImmediateChild(_,v))}));const d=Nn(a,i);if(!d&&!i._queryParams.loadsAllData()){const f=D0(i);(0,p.hu)(!o.queryToTagMap.has(f),"View does not exist, but we have a tag");const _=function Ls(){return Ss++}();o.queryToTagMap.set(f,_),o.tagToQueryMap.set(_,f)}let h=function Ps(o,i,e,n,r,s){const l=An(o,i,n,r,s);return o.views.has(i._queryIdentifier)||o.views.set(i._queryIdentifier,l),function ys(o,i){o.eventRegistrations_.push(i)}(l,e),function vs(o,i){const e=o.viewCache_.eventCache,n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(S,(s,l)=>{n.push(Ne(s,l))}),e.isFullyInitialized()&&n.push(ln(e.getNode())),Sn(o,n,e.getNode(),i)}(l,e)}(a,i,e,E0(o.pendingWriteTree_,r),s,c);if(!d&&!l&&!n){const f=Mn(a,i);h=h.concat(function Ds(o,i,e){const n=i._path,r=n0(o,i),s=Dn(o,e),l=o.listenProvider_.startListening(o0(i),r,s.hashFn,s.onComplete),a=o.syncPointTree_.subtree(n);if(r)(0,p.hu)(!de(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((d,u,h)=>{if(!x(d)&&u&&de(u))return[k0(u).query];{let f=[];return u&&(f=f.concat(On(u).map(_=>_.query))),R(h,(_,g)=>{f=f.concat(g)}),f}});for(let d=0;d<c.length;++d){const u=c[d];o.listenProvider_.stopListening(o0(u),n0(o,u))}}return l}(o,i,f))}return h}function L0(o,i,e){const r=o.pendingWriteTree_,s=o.syncPointTree_.findOnPath(i,(l,a)=>{const d=ce(a,G(l,i));if(d)return d});return mn(r,i,s,e,!0)}function Le(o,i){return Zn(i,o.syncPointTree_,null,E0(o.pendingWriteTree_,P()))}function Zn(o,i,e,n){if(x(o.path))return Ln(o,i,e,n);{const r=i.get(P());null==e&&null!=r&&(e=ce(r,P()));let s=[];const l=C(o.path),a=o.operationForChild(l),c=i.children.get(l);if(c&&a){const d=e?e.getImmediateChild(l):null,u=yn(n,l);s=s.concat(Zn(a,c,d,u))}return r&&(s=s.concat(Zt(r,o,n,e))),s}}function Ln(o,i,e,n){const r=i.get(P());null==e&&null!=r&&(e=ce(r,P()));let s=[];return i.children.inorderTraversal((l,a)=>{const c=e?e.getImmediateChild(l):null,d=yn(n,l),u=o.operationForChild(l);u&&(s=s.concat(Ln(u,a,c,d)))}),r&&(s=s.concat(Zt(r,o,n,e))),s}function Dn(o,i){const e=i.query,n=n0(o,e);return{hashFn:()=>(function _s(o){return o.viewCache_.serverCache.getNode()}(i)||y.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return n?function Ms(o,i,e){const n=Ut(o,e);if(n){const r=Gt(n),s=r.path,l=r.queryId,a=G(s,i);return Bt(o,s,new ze(wt(l),a))}return[]}(o,e._path,n):function Os(o,i){return Le(o,new ze({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i))}(o,e._path);{const s=function Ao(o,i){let e="Unknown Error";"too_big"===o?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===o?e="Client doesn't have permission to access the desired data.":"unavailable"===o&&(e="The service is unavailable");const n=new Error(o+" at "+i._path.toString()+": "+e);return n.code=o.toUpperCase(),n}(r,e);return Z0(o,e,null,s)}}}}function n0(o,i){const e=D0(i);return o.queryToTagMap.get(e)}function D0(o){return o._path.toString()+"$"+o._queryIdentifier}function Ut(o,i){return o.tagToQueryMap.get(i)}function Gt(o){const i=o.indexOf("$");return(0,p.hu)(-1!==i&&i<o.length-1,"Bad queryKey."),{queryId:o.substr(i+1),path:new b(o.substr(0,i))}}function Bt(o,i,e){const n=o.syncPointTree_.get(i);return(0,p.hu)(n,"Missing sync point for query tag that we're tracking"),Zt(n,e,E0(o.pendingWriteTree_,i),null)}function o0(o){return o._queryParams.loadsAllData()&&!o._queryParams.isDefault()?new(function Is(){return(0,p.hu)(R0,"Reference.ts has not been loaded"),R0}())(o._repo,o._path):o}class Ft{constructor(i){this.node_=i}getImmediateChild(i){const e=this.node_.getImmediateChild(i);return new Ft(e)}node(){return this.node_}}class qt{constructor(i,e){this.syncTree_=i,this.path_=e}getImmediateChild(i){const e=O(this.path_,i);return new qt(this.syncTree_,e)}node(){return L0(this.syncTree_,this.path_)}}const Us=function(o){return(o=o||{}).timestamp=o.timestamp||(new Date).getTime(),o},Un=function(o,i,e){return o&&"object"==typeof o?((0,p.hu)(".sv"in o,"Unexpected leaf node or priority contents"),"string"==typeof o[".sv"]?Gs(o[".sv"],i,e):"object"==typeof o[".sv"]?Bs(o[".sv"],i):void(0,p.hu)(!1,"Unexpected server value: "+JSON.stringify(o,null,2))):o},Gs=function(o,i,e){if("timestamp"===o)return e.timestamp;(0,p.hu)(!1,"Unexpected server value: "+o)},Bs=function(o,i,e){o.hasOwnProperty("increment")||(0,p.hu)(!1,"Unexpected server value: "+JSON.stringify(o,null,2));const n=o.increment;"number"!=typeof n&&(0,p.hu)(!1,"Unexpected increment value: "+n);const r=i.node();if((0,p.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return n;const l=r.getValue();return"number"!=typeof l?n:l+n},Gn=function(o,i,e,n){return Wt(i,new qt(e,o),n)},Ht=function(o,i,e){return Wt(o,new Ft(i),e)};function Wt(o,i,e){const n=o.getPriority().val(),r=Un(n,i.getImmediateChild(".priority"),e);let s;if(o.isLeafNode()){const l=o,a=Un(l.getValue(),i,e);return a!==l.getValue()||r!==l.getPriority().val()?new Oe(a,M(r)):o}{const l=o;return s=l,r!==l.getPriority().val()&&(s=s.updatePriority(new Oe(r))),l.forEachChild(S,(a,c)=>{const d=Wt(c,i.getImmediateChild(a),e);d!==c&&(s=s.updateImmediateChild(a,d))}),s}}class Qt{constructor(i="",e=null,n={children:{},childCount:0}){this.name=i,this.parent=e,this.node=n}}function U0(o,i){let e=i instanceof b?i:new b(i),n=o,r=C(e);for(;null!==r;){const s=(0,p.DV)(n.node.children,r)||{children:{},childCount:0};n=new Qt(r,n,s),e=I(e),r=C(e)}return n}function be(o){return o.node.value}function Jt(o,i){o.node.value=i,Kt(o)}function Bn(o){return o.node.childCount>0}function G0(o,i){R(o.node.children,(e,n)=>{i(new Qt(e,o,n))})}function Fn(o,i,e,n){e&&!n&&i(o),G0(o,r=>{Fn(r,i,!0,n)}),e&&n&&i(o)}function r0(o){return new b(null===o.parent?o.name:r0(o.parent)+"/"+o.name)}function Kt(o){null!==o.parent&&function Hs(o,i,e){const n=function Fs(o){return void 0===be(o)&&!Bn(o)}(e),r=(0,p.r3)(o.node.children,i);n&&r?(delete o.node.children[i],o.node.childCount--,Kt(o)):!n&&!r&&(o.node.children[i]=e.node,o.node.childCount++,Kt(o))}(o.parent,o.name,o)}const Ws=/[\[\].#$\/\u0000-\u001F\u007F]/,Qs=/[\[\].#$\u0000-\u001F\u007F]/,Yt=10485760,B0=function(o){return"string"==typeof o&&0!==o.length&&!Ws.test(o)},qn=function(o){return"string"==typeof o&&0!==o.length&&!Qs.test(o)},l0=function(o,i,e){const n=e instanceof b?new ar(e,o):e;if(void 0===i)throw new Error(o+"contains undefined "+ve(n));if("function"==typeof i)throw new Error(o+"contains a function "+ve(n)+" with contents = "+i.toString());if(f0(i))throw new Error(o+"contains "+i.toString()+" "+ve(n));if("string"==typeof i&&i.length>Yt/3&&(0,p.ug)(i)>Yt)throw new Error(o+"contains a string greater than "+Yt+" utf8 bytes "+ve(n)+" ('"+i.substring(0,50)+"...')");if(i&&"object"==typeof i){let r=!1,s=!1;if(R(i,(l,a)=>{if(".value"===l)r=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!B0(l)))throw new Error(o+" contains an invalid key ("+l+") "+ve(n)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function cr(o,i){o.parts_.length>0&&(o.byteLength_+=1),o.parts_.push(i),o.byteLength_+=(0,p.ug)(i),zi(o)})(n,l),l0(o,a,n),function dr(o){const i=o.parts_.pop();o.byteLength_-=(0,p.ug)(i),o.parts_.length>0&&(o.byteLength_-=1)}(n)}),r&&s)throw new Error(o+' contains ".value" child '+ve(n)+" in addition to actual children.")}},jt=function(o,i,e,n){if(!(n&&void 0===e||qn(e)))throw new Error((0,p.gK)(o,i)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ys=function(o,i,e,n){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),jt(o,i,e,n)};class Vs{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function F0(o,i){let e=null;for(let n=0;n<i.length;n++){const r=i[n],s=r.getPath();null!==e&&!dt(s,e.path)&&(o.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&o.eventLists_.push(e)}function Qn(o,i,e){F0(o,e),Jn(o,n=>dt(n,i))}function F(o,i,e){F0(o,e),Jn(o,n=>W(n,i)||W(i,n))}function Jn(o,i){o.recursionDepth_++;let e=!0;for(let n=0;n<o.eventLists_.length;n++){const r=o.eventLists_[n];r&&(i(r.path)?(js(o.eventLists_[n]),o.eventLists_[n]=null):e=!1)}e&&(o.eventLists_=[]),o.recursionDepth_--}function js(o){for(let i=0;i<o.events.length;i++){const e=o.events[i];if(null!==e){o.events[i]=null;const n=e.getEventRunner();ge&&k("event: "+e.toString()),Ee(n)}}}const zs=25;class $s{constructor(i,e,n,r){this.repoInfo_=i,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Vs,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=b0(),this.transactionQueueTree_=new Qt,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Yn(o){const e=o.infoData_.getNode(new b(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function c0(o){return Us({timestamp:Yn(o)})}function Vn(o,i,e,n,r){o.dataUpdateCount++;const s=new b(i);e=o.interceptServerDataCallback_?o.interceptServerDataCallback_(i,e):e;let l=[];if(r)if(n){const c=(0,p.UI)(e,d=>M(d));l=function Ns(o,i,e,n){const r=Ut(o,n);if(r){const s=Gt(r),l=s.path,a=s.queryId,c=G(l,i),d=E.fromObject(e);return Bt(o,l,new Re(wt(a),c,d))}return[]}(o.serverSyncTree_,s,c,r)}else{const c=M(e);l=Rn(o.serverSyncTree_,s,c,r)}else if(n){const c=(0,p.UI)(e,d=>M(d));l=function As(o,i,e){const n=E.fromObject(e);return Le(o,new Re({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i,n))}(o.serverSyncTree_,s,c)}else{const c=M(e);l=t0(o.serverSyncTree_,s,c)}let a=s;l.length>0&&(a=Ue(o,s)),F(o.eventQueue_,a,l)}function jn(o,i){zt(o,"connected",i),!1===i&&function nl(o){De(o,"onDisconnectEvents");const i=c0(o),e=b0();Tt(o.onDisconnect_,P(),(r,s)=>{const l=Gn(r,s,o.serverSyncTree_,i);ke(e,r,l)});let n=[];Tt(e,P(),(r,s)=>{n=n.concat(t0(o.serverSyncTree_,r,s));const l=ti(o,r);Ue(o,l)}),o.onDisconnect_=b0(),F(o.eventQueue_,P(),n)}(o)}function zt(o,i,e){const n=new b("/.info/"+i),r=M(e);o.infoData_.updateSnapshot(n,r);const s=t0(o.infoSyncTree_,n,r);F(o.eventQueue_,n,s)}function q0(o){return o.nextWriteId_++}function $t(o,i,e,n,r){De(o,"set",{path:i.toString(),value:e,priority:n});const s=c0(o),l=M(e,n),a=L0(o.serverSyncTree_,i),c=Ht(l,a,s),d=q0(o),u=Lt(o.serverSyncTree_,i,c,d,!0);F0(o.eventQueue_,u),o.server_.put(i.toString(),l.val(!0),(f,_)=>{const g="ok"===f;g||D("set at "+i+" failed: "+f);const v=ue(o.serverSyncTree_,d,!g);F(o.eventQueue_,i,v),function he(o,i,e,n){i&&Ee(()=>{if("ok"===e)i(null);else{const r=(e||"error").toUpperCase();let s=r;n&&(s+=": "+n);const l=new Error(s);l.code=r,i(l)}})}(0,r,f,_)});const h=ti(o,i);Ue(o,h),F(o.eventQueue_,h,[])}function Xt(o,i,e){let n;n=".info"===C(i._path)?Z0(o.infoSyncTree_,i,e):Z0(o.serverSyncTree_,i,e),Qn(o.eventQueue_,i._path,n)}function De(o,...i){let e="";o.persistentConnection_&&(e=o.persistentConnection_.id+":"),k(e,...i)}function ei(o,i,e){return L0(o.serverSyncTree_,i,e)||y.EMPTY_NODE}function H0(o,i=o.transactionQueueTree_){if(i||W0(o,i),be(i)){const e=eo(o,i);(0,p.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function dl(o,i,e){const n=e.map(d=>d.currentWriteId),r=ei(o,i,n);let s=r;const l=r.hash();for(let d=0;d<e.length;d++){const u=e[d];(0,p.hu)(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=G(i,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),c=i;o.server_.put(c.toString(),a,d=>{De(o,"transaction put response",{path:c.toString(),status:d});let u=[];if("ok"===d){const h=[];for(let f=0;f<e.length;f++)e[f].status=2,u=u.concat(ue(o.serverSyncTree_,e[f].currentWriteId)),e[f].onComplete&&h.push(()=>e[f].onComplete(null,!0,e[f].currentOutputSnapshotResolved)),e[f].unwatcher();W0(o,U0(o.transactionQueueTree_,i)),H0(o,o.transactionQueueTree_),F(o.eventQueue_,i,u);for(let f=0;f<h.length;f++)Ee(h[f])}else{if("datastale"===d)for(let h=0;h<e.length;h++)e[h].status=3===e[h].status?4:0;else{D("transaction at "+c.toString()+" failed: "+d);for(let h=0;h<e.length;h++)e[h].status=4,e[h].abortReason=d}Ue(o,i)}},l)}(o,r0(i),e)}else Bn(i)&&G0(i,e=>{H0(o,e)})}function Ue(o,i){const e=Xn(o,i),n=r0(e);return function ul(o,i,e){if(0===i.length)return;const n=[];let r=[];const l=i.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<i.length;a++){const c=i[a],d=G(e,c.path);let h,u=!1;if((0,p.hu)(null!==d,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)u=!0,h=c.abortReason,r=r.concat(ue(o.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=zs)u=!0,h="maxretry",r=r.concat(ue(o.serverSyncTree_,c.currentWriteId,!0));else{const f=ei(o,c.path,l);c.currentInputSnapshot=f;const _=i[a].update(f.val());if(void 0!==_){l0("transaction failed: Data returned ",_,c.path);let g=M(_);"object"==typeof _&&null!=_&&(0,p.r3)(_,".priority")||(g=g.updatePriority(f.getPriority()));const A=c.currentWriteId,Z=c0(o),z0=Ht(g,f,Z);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=z0,c.currentWriteId=q0(o),l.splice(l.indexOf(A),1),r=r.concat(Lt(o.serverSyncTree_,c.path,z0,c.currentWriteId,c.applyLocally)),r=r.concat(ue(o.serverSyncTree_,A,!0))}else u=!0,h="nodata",r=r.concat(ue(o.serverSyncTree_,c.currentWriteId,!0))}F(o.eventQueue_,e,r),r=[],u&&(i[a].status=2,setTimeout(i[a].unwatcher,Math.floor(0)),i[a].onComplete&&n.push("nodata"===h?()=>i[a].onComplete(null,!1,i[a].currentInputSnapshot):()=>i[a].onComplete(new Error(h),!1,null)))}W0(o,o.transactionQueueTree_);for(let a=0;a<n.length;a++)Ee(n[a]);H0(o,o.transactionQueueTree_)}(o,eo(o,e),n),n}function Xn(o,i){let e,n=o.transactionQueueTree_;for(e=C(i);null!==e&&void 0===be(n);)n=U0(n,e),e=C(i=I(i));return n}function eo(o,i){const e=[];return to(o,i,e),e.sort((n,r)=>n.order-r.order),e}function to(o,i,e){const n=be(i);if(n)for(let r=0;r<n.length;r++)e.push(n[r]);G0(i,r=>{to(o,r,e)})}function W0(o,i){const e=be(i);if(e){let n=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[n]=e[r],n++);e.length=n,Jt(i,e.length>0?e:void 0)}G0(i,n=>{W0(o,n)})}function ti(o,i){const e=r0(Xn(o,i)),n=U0(o.transactionQueueTree_,i);return function qs(o,i,e){let n=e?o:o.parent;for(;null!==n;){if(i(n))return!0;n=n.parent}}(n,r=>{ii(o,r)}),ii(o,n),Fn(n,r=>{ii(o,r)}),e}function ii(o,i){const e=be(i);if(e){const n=[];let r=[],s=-1;for(let l=0;l<e.length;l++)3===e[l].status||(1===e[l].status?((0,p.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,e[l].status=3,e[l].abortReason="set"):((0,p.hu)(0===e[l].status,"Unexpected transaction status in abort"),e[l].unwatcher(),r=r.concat(ue(o.serverSyncTree_,e[l].currentWriteId,!0)),e[l].onComplete&&n.push(e[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Jt(i,void 0):e.length=s+1,F(o.eventQueue_,r0(i),r);for(let l=0;l<n.length;l++)Ee(n[l])}}const ni=function(o,i){const e=fl(o),n=e.namespace;return"firebase.com"===e.domain&&z(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||"undefined"===n)&&"localhost"!==e.domain&&z("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&D("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new nt(e.host,e.secure,n,"ws"===e.scheme||"wss"===e.scheme,i,"",n!==e.subdomain),path:new b(e.pathString)}},fl=function(o){let i="",e="",n="",r="",s="",l=!0,a="https",c=443;if("string"==typeof o){let d=o.indexOf("//");d>=0&&(a=o.substring(0,d-1),o=o.substring(d+2));let u=o.indexOf("/");-1===u&&(u=o.length);let h=o.indexOf("?");-1===h&&(h=o.length),i=o.substring(0,Math.min(u,h)),u<h&&(r=function hl(o){let i="";const e=o.split("/");for(let n=0;n<e.length;n++)if(e[n].length>0){let r=e[n];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}i+="/"+r}return i}(o.substring(u,h)));const f=function pl(o){const i={};"?"===o.charAt(0)&&(o=o.substring(1));for(const e of o.split("&")){if(0===e.length)continue;const n=e.split("=");2===n.length?i[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):D(`Invalid query segment '${e}' in query '${o}'`)}return i}(o.substring(Math.min(o.length,h)));d=i.indexOf(":"),d>=0?(l="https"===a||"wss"===a,c=parseInt(i.substring(d+1),10)):d=i.length;const _=i.slice(0,d);if("localhost"===_.toLowerCase())e="localhost";else if(_.split(".").length<=2)e=_;else{const g=i.indexOf(".");n=i.substring(0,g).toLowerCase(),e=i.substring(g+1),s=n}"ns"in f&&(s=f.ns)}return{host:i,port:c,domain:e,subdomain:n,secure:l,scheme:a,pathString:r,namespace:s}};class no{constructor(i,e,n,r){this.eventType=i,this.eventRegistration=e,this.snapshot=n,this.prevName=r}getPath(){const i=this.snapshot.ref;return"value"===this.eventType?i._path:i.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,p.Wl)(this.snapshot.exportVal())}}class oo{constructor(i,e,n){this.eventRegistration=i,this.error=e,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class oi{constructor(i,e){this.snapshotCallback=i,this.cancelCallback=e}onValue(i,e){this.snapshotCallback.call(null,i,e)}onCancel(i){return(0,p.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,i)}get hasCancelCallback(){return!!this.cancelCallback}matches(i){return this.snapshotCallback===i.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===i.snapshotCallback.userCallback&&this.snapshotCallback.context===i.snapshotCallback.context}}class q{constructor(i,e,n,r){this._repo=i,this._path=e,this._queryParams=n,this._orderByCalled=r}get key(){return x(this._path)?null:ct(this._path)}get ref(){return new V(this._repo,this._path)}get _queryIdentifier(){const i=cn(this._queryParams),e=tt(i);return"{}"===e?"default":e}get _queryObject(){return cn(this._queryParams)}isEqual(i){if(!((i=(0,p.m9)(i))instanceof q))return!1;const e=this._repo===i._repo,n=dt(this._path,i._path);return e&&n&&this._queryIdentifier===i._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function sr(o){let i="";for(let e=o.pieceNum_;e<o.pieces_.length;e++)""!==o.pieces_[e]&&(i+="/"+encodeURIComponent(String(o.pieces_[e])));return i||"/"}(this._path)}}class V extends q{constructor(i,e){super(i,e,new yt,!1)}get parent(){const i=ji(this._path);return null===i?null:new V(this._repo,i)}get root(){let i=this;for(;null!==i.parent;)i=i.parent;return i}}class we{constructor(i,e,n){this._node=i,this.ref=e,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(i){const e=new b(i),n=j(this.ref,i);return new we(this._node.getChild(e),n,S)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(i){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(n,r)=>i(new we(r,j(this.ref,n),S)))}hasChild(i){const e=new b(i);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function N(o,i){return(o=(0,p.m9)(o))._checkNotDeleted("ref"),void 0!==i?j(o._root,i):o._root}function j(o,i){return null===C((o=(0,p.m9)(o))._path)?Ys("child","path",i,!1):jt("child","path",i,!1),new V(o._repo,O(o._path,i))}function Q(o,i){(function(o,i){if(".info"===C(i))throw new Error(o+" failed = Can't modify data under /.info/")})("set",(o=(0,p.m9)(o))._path),function(o,i,e,n){n&&void 0===i||l0((0,p.gK)(o,"value"),i,e)}("set",i,o._path,!1);const e=new p.BH;return $t(o._repo,o._path,i,null,e.wrapCallback(()=>{})),e.promise}function d0(o){o=(0,p.m9)(o);const i=new oi(()=>{}),e=new u0(i);return function tl(o,i,e){const n=function ks(o,i){const e=i._path;let n=null;o.syncPointTree_.foreachOnPath(e,(d,u)=>{const h=G(d,e);n=n||ce(u,h)});let r=o.syncPointTree_.get(e);r?n=n||ce(r,P()):(r=new En,o.syncPointTree_=o.syncPointTree_.set(e,r));const s=null!=n,l=s?new le(n,!0,!1):null;return function ms(o){return S0(o.viewCache_)}(An(r,i,E0(o.pendingWriteTree_,i._path),s?l.getNode():y.EMPTY_NODE,s))}(o.serverSyncTree_,i);return null!=n?Promise.resolve(n):o.server_.get(i).then(r=>{const s=M(r).withIndex(i._queryParams.getIndex());let l;if(Dt(o.serverSyncTree_,i,e,!0),i._queryParams.loadsAllData())l=t0(o.serverSyncTree_,i._path,s);else{const a=n0(o.serverSyncTree_,i);l=Rn(o.serverSyncTree_,i._path,s,a)}return F(o.eventQueue_,i._path,l),Z0(o.serverSyncTree_,i,e,null,!0),s},r=>(De(o,"get for query "+(0,p.Wl)(i)+" failed: "+r),Promise.reject(new Error(r))))}(o._repo,o,e).then(n=>new we(n,new V(o._repo,o._path),o._queryParams.getIndex()))}class u0{constructor(i){this.callbackContext=i}respondsTo(i){return"value"===i}createEvent(i,e){const n=e._queryParams.getIndex();return new no("value",this,new we(i.snapshotNode,new V(e._repo,e._path),n))}getEventRunner(i){return"cancel"===i.getEventType()?()=>this.callbackContext.onCancel(i.error):()=>this.callbackContext.onValue(i.snapshot,null)}createCancelEvent(i,e){return this.callbackContext.hasCancelCallback?new oo(this,i,e):null}matches(i){return i instanceof u0&&(!i.callbackContext||!this.callbackContext||i.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class K0{constructor(i,e){this.eventType=i,this.callbackContext=e}respondsTo(i){let e="children_added"===i?"child_added":i;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(i,e){return this.callbackContext.hasCancelCallback?new oo(this,i,e):null}createEvent(i,e){(0,p.hu)(null!=i.childName,"Child events should have a childName.");const n=j(new V(e._repo,e._path),i.childName),r=e._queryParams.getIndex();return new no(i.type,this,new we(i.snapshotNode,n,r),i.prevName)}getEventRunner(i){return"cancel"===i.getEventType()?()=>this.callbackContext.onCancel(i.error):()=>this.callbackContext.onValue(i.snapshot,i.prevName)}matches(i){return i instanceof K0&&this.eventType===i.eventType&&(!this.callbackContext||!i.callbackContext||this.callbackContext.matches(i.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Y0(o,i,e,n){return function h0(o,i,e,n,r){let s;if("object"==typeof n&&(s=void 0,r=n),"function"==typeof n&&(s=n),r&&r.onlyOnce){const c=e,d=(u,h)=>{Xt(o._repo,o,a),c(u,h)};d.userCallback=e.userCallback,d.context=e.context,e=d}const l=new oi(e,s||void 0),a="value"===i?new u0(l):new K0(i,l);return function ll(o,i,e){let n;n=".info"===C(i._path)?Dt(o.infoSyncTree_,i,e):Dt(o.serverSyncTree_,i,e),Qn(o.eventQueue_,i._path,n)}(o._repo,o,a),()=>Xt(o._repo,o,a)}(o,"value",i,e,n)}(function Cs(o){(0,p.hu)(!N0,"__referenceConstructor has already been defined"),N0=o})(V),function ws(o){(0,p.hu)(!R0,"__referenceConstructor has already been defined"),R0=o}(V);const ri={};function ao(o,i,e,n,r){let s=n||o.options.databaseURL;void 0===s&&(o.options.projectId||z("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),k("Using default host for project ",o.options.projectId),s=`${o.options.projectId}-default-rtdb.firebaseio.com`);let c,d,l=ni(s,r),a=l.repoInfo;typeof process<"u"&&process.env&&(d=process.env.FIREBASE_DATABASE_EMULATOR_HOST),d?(c=!0,s=`http://${d}?ns=${a.namespace}`,l=ni(s,r),a=l.repoInfo):c=!l.repoInfo.secure;const u=r&&c?new He(He.OWNER):new Zo(o.name,o.options,i);(function(o,i){const e=i.path.toString();if("string"!=typeof i.repoInfo.host||0===i.repoInfo.host.length||!B0(i.repoInfo.namespace)&&"localhost"!==i.repoInfo.host.split(":")[0]||0!==e.length&&!function(o){return o&&(o=o.replace(/^\/*\.info(\/|$)/,"/")),qn(o)}(e))throw new Error((0,p.gK)(o,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",l),x(l.path)||z("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function Al(o,i,e,n){let r=ri[i.name];r||(r={},ri[i.name]=r);let s=r[o.toURLString()];return s&&z("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new $s(o,false,e,n),r[o.toURLString()]=s,s}(a,o,u,new Ro(o.name,e));return new Ml(h,o)}class Ml{constructor(i,e){this._repoInternal=i,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Xs(o,i,e){if(o.stats_=st(o.repoInfo_),o.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)o.server_=new P0(o.repoInfo_,(n,r,s,l)=>{Vn(o,n,r,s,l)},o.authTokenProvider_,o.appCheckProvider_),setTimeout(()=>jn(o,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,p.Wl)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}o.persistentConnection_=new Ce(o.repoInfo_,i,(n,r,s,l)=>{Vn(o,n,r,s,l)},n=>{jn(o,n)},n=>{!function el(o,i){R(i,(e,n)=>{zt(o,e,n)})}(o,n)},o.authTokenProvider_,o.appCheckProvider_,e),o.server_=o.persistentConnection_}o.authTokenProvider_.addTokenChangeListener(n=>{o.server_.refreshAuthToken(n)}),o.appCheckProvider_.addTokenChangeListener(n=>{o.server_.refreshAppCheckToken(n.token)}),o.statsReporter_=function Uo(o,i){const e=o.toString();return rt[e]||(rt[e]=i()),rt[e]}(o.repoInfo_,()=>new Ur(o.stats_,o.server_)),o.infoData_=new kr,o.infoSyncTree_=new kn({startListening:(n,r,s,l)=>{let a=[];const c=o.infoData_.getNode(n._path);return c.isEmpty()||(a=t0(o.infoSyncTree_,n._path,c),setTimeout(()=>{l("ok")},0)),a},stopListening:()=>{}}),zt(o,"connected",!1),o.serverSyncTree_=new kn({startListening:(n,r,s,l)=>(o.server_.listen(n,s,r,(a,c)=>{const d=l(a,c);F(o.eventQueue_,n._path,d)}),[]),stopListening:(n,r)=>{o.server_.unlisten(n,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new V(this._repo,P())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function El(o,i){const e=ri[i];(!e||e[o.key]!==o)&&z(`Database ${i}(${o.repoInfo_}) has already been deleted.`),function $n(o){o.persistentConnection_&&o.persistentConnection_.interrupt("repo_interrupt")}(o),delete e[o.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(i){null===this._rootInternal&&z("Cannot call "+i+" on a deleted database.")}}function fe(o=(0,J.Mq)(),i){const e=(0,J.qX)(o,"database").getImmediate({identifier:i});if(!e._instanceStarted){const n=(0,p.P0)("database");n&&function Nl(o,i,e,n={}){(o=(0,p.m9)(o))._checkNotDeleted("useEmulator"),o._instanceStarted&&z("Cannot call useEmulator() after instance has already been initialized.");const r=o._repoInternal;let s;if(r.repoInfo_.nodeAdmin)n.mockUserToken&&z('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new He(He.OWNER);else if(n.mockUserToken){const l="string"==typeof n.mockUserToken?n.mockUserToken:(0,p.Sg)(n.mockUserToken,o.app.options.projectId);s=new He(l)}!function Sl(o,i,e,n){o.repoInfo_=new nt(`${i}:${e}`,!1,o.repoInfo_.namespace,o.repoInfo_.webSocketOnly,o.repoInfo_.nodeAdmin,o.repoInfo_.persistenceKey,o.repoInfo_.includeNamespaceInQueryParams,!0),n&&(o.authTokenProvider_=n)}(r,i,e,s)}(e,...n)}return e}Ce.prototype.simpleListen=function(o,i){this.sendRequest("q",{p:o},i)},Ce.prototype.echo=function(o,i){this.sendRequest("echo",{d:o},i)},function kl(o){(function pi(o){$0=o})(J.Jn),(0,J.Xd)(new xo.wA("database",(i,{instanceIdentifier:e})=>ao(i.getProvider("app").getImmediate(),i.getProvider("auth-internal"),i.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,J.KN)(ui,"1.0.1",o),(0,J.KN)(ui,"1.0.1","esm2017")}(),(0,J.KN)("firebase","10.2.0","app");let V0=(()=>{var o;class i{constructor(){this.players={player1:{name:"User"},player2:{name:"Computer"}},this.gameConfig={mode:1,duration:5,difficulty:1},this.gameRounds={5:[100,200,300,500],10:[200,400,600,1e3],20:[400,800,1200,2e3]},this.activePlayerID=0,this.hostGameURL=""}resetPlayers(){this.players={player1:{name:""},player2:{name:""}}}resetGameConfig(){this.gameConfig={mode:1,duration:1,difficulty:1}}initializeFB(){let r=(0,J.ZF)({databaseURL:"https://game-of-life-ce-default-rtdb.europe-west1.firebasedatabase.app"});this.fbDatabase=fe(r)}}return(o=i).\u0275fac=function(n){return new(n||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),i})();function Ul(o,i){if(1&o&&t._UZ(0,"div",12),2&o){const e=i.index,n=t.oxw().index,r=t.oxw();t.Gre("cell cell-",r.gameGrid[n][e],""),t.hYB("id","game_",n,"_",e,"")}}function Gl(o,i){if(1&o&&(t.TgZ(0,"div")(1,"div",10),t.YNc(2,Ul,1,5,"div",11),t.qZA()()),2&o){const e=i.$implicit;t.xp6(2),t.Q6J("ngForOf",e)}}function Bl(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.setMenu(2))}),t._uU(2,"Quick Game"),t.qZA(),t.TgZ(3,"div",14),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.setMenu(3))}),t._uU(4,"Multi Player Game"),t.qZA(),t.TgZ(5,"div",15),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.setMenu(4))}),t._uU(6,"About"),t.qZA(),t.TgZ(7,"div",14),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.navToPage())}),t._uU(8,"Leader Board"),t.qZA()()}}function Fl(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",16)(1,"div",17),t._uU(2,"- Quick Game -"),t.qZA(),t.TgZ(3,"div",18),t._uU(4,"Player Name: "),t.TgZ(5,"input",19),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.player1Name=r)}),t.qZA()(),t.TgZ(6,"div",20),t._uU(7),t.qZA(),t.TgZ(8,"div",21),t._uU(9,"Generations: "),t.TgZ(10,"span",22),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.duration=5)}),t._uU(11,"500"),t.qZA(),t.TgZ(12,"span",22),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.duration=10)}),t._uU(13,"1,000"),t.qZA(),t.TgZ(14,"span",22),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.duration=20)}),t._uU(15,"2,000"),t.qZA()(),t.TgZ(16,"div",23)(17,"div",14),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return r.difficulty=1,t.KtG(r.navToGame(1))}),t._uU(18,"Easy"),t.qZA(),t.TgZ(19,"div",14),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return r.difficulty=2,t.KtG(r.navToGame(1))}),t._uU(20,"Medium"),t.qZA(),t.TgZ(21,"div",14),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return r.difficulty=3,t.KtG(r.navToGame(1))}),t._uU(22,"Hard"),t.qZA()(),t.TgZ(23,"div",24),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.menu=1)}),t._uU(24,"Back"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngModel",e.player1Name),t.xp6(2),t.Oqu(e.errorMessage),t.xp6(3),t.Gre("menu-button-small-",5==e.duration," p-3"),t.xp6(2),t.Gre("menu-button-small-",10==e.duration," p-3"),t.xp6(2),t.Gre("menu-button-small-",20==e.duration," p-3")}}function ql(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",18),t._uU(2,"Player 1: "),t.TgZ(3,"input",29),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw(2);return t.KtG(s.player1Name=r)}),t.qZA()(),t.TgZ(4,"div",30),t._uU(5,"Player 2: "),t.TgZ(6,"input",31),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw(2);return t.KtG(s.player2Name=r)}),t.qZA()(),t.TgZ(7,"div",18),t._uU(8,"Generations: "),t.TgZ(9,"span",22),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.duration=5)}),t._uU(10,"500"),t.qZA(),t.TgZ(11,"span",22),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.duration=10)}),t._uU(12,"1,000"),t.qZA(),t.TgZ(13,"span",22),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.duration=20)}),t._uU(14,"2,000"),t.qZA()(),t.TgZ(15,"div",32),t._uU(16),t.qZA(),t.TgZ(17,"div",33),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.navToGame(2))}),t._uU(18,"Start"),t.qZA(),t.TgZ(19,"div",14),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.menu=1)}),t._uU(20,"Back"),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngModel",e.player1Name),t.xp6(3),t.Q6J("ngModel",e.player2Name),t.xp6(3),t.Gre("menu-button-small-",5==e.duration," p-3"),t.xp6(2),t.Gre("menu-button-small-",10==e.duration," p-3"),t.xp6(2),t.Gre("menu-button-small-",20==e.duration," p-3"),t.xp6(3),t.Oqu(e.errorMessage)}}function Hl(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",34),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.onlineGameMode=1)}),t._uU(2,"Host the Game"),t.qZA(),t.TgZ(3,"div",35),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.onlineGameMode=2)}),t._uU(4,"Join the game"),t.qZA(),t.TgZ(5,"div",15),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.menu=1)}),t._uU(6,"Back"),t.qZA()()}}function Wl(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",18),t._uU(2,"Name: "),t.TgZ(3,"input",36),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw(4);return t.KtG(s.player1Name=r)}),t.qZA()(),t.TgZ(4,"div",18),t._uU(5,"Generations: "),t.TgZ(6,"span",22),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(4);return t.KtG(r.duration=5)}),t._uU(7,"500"),t.qZA(),t.TgZ(8,"span",22),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(4);return t.KtG(r.duration=10)}),t._uU(9,"1,000"),t.qZA(),t.TgZ(10,"span",22),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(4);return t.KtG(r.duration=20)}),t._uU(11,"2,000"),t.qZA()(),t.TgZ(12,"div",32),t._uU(13),t.qZA(),t.TgZ(14,"div",33),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(4);return t.KtG(r.onlineGame(1))}),t._uU(15,"Start"),t.qZA(),t.TgZ(16,"div",14),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(4);return t.KtG(r.onlineGameMode=0)}),t._uU(17,"Back"),t.qZA()()}if(2&o){const e=t.oxw(4);t.xp6(3),t.Q6J("ngModel",e.player1Name),t.xp6(3),t.Gre("menu-button-small-",5==e.duration," p-3"),t.xp6(2),t.Gre("menu-button-small-",10==e.duration," p-3"),t.xp6(2),t.Gre("menu-button-small-",20==e.duration," p-3"),t.xp6(3),t.Oqu(e.errorMessage)}}function Ql(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",37)(2,"span"),t._uU(3,"Game ID: "),t.qZA(),t.TgZ(4,"span",38),t._uU(5),t.qZA()(),t.TgZ(6,"div",39),t._uU(7,"Waiting for 2nd player to join..."),t.qZA(),t.TgZ(8,"div",15),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(4);return t.KtG(r.onlineGame(-1))}),t._uU(9,"Quit"),t.qZA()()}if(2&o){const e=t.oxw(4);t.xp6(5),t.Oqu(e.hostGameID)}}function Jl(o,i){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,Wl,18,11,"div",28),t.YNc(2,Ql,10,1,"div",28),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!e.hostGameID),t.xp6(1),t.Q6J("ngIf",e.hostGameID)}}function Kl(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",18),t._uU(2,"\xa0\xa0 Name: "),t.TgZ(3,"input",36),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw(3);return t.KtG(s.player2Name=r)}),t.qZA()(),t.TgZ(4,"div",30),t._uU(5,"Game ID: "),t.TgZ(6,"input",40),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw(3);return t.KtG(s.joinGameID=r)}),t.qZA()(),t.TgZ(7,"div",32),t._uU(8),t.qZA(),t.TgZ(9,"div",33),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.onlineGame(2))}),t._uU(10,"Join"),t.qZA(),t.TgZ(11,"div",14),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.onlineGameMode=0)}),t._uU(12,"Back"),t.qZA()()}if(2&o){const e=t.oxw(3);t.xp6(3),t.Q6J("ngModel",e.player2Name),t.xp6(3),t.Q6J("ngModel",e.joinGameID),t.xp6(2),t.Oqu(e.errorMessage)}}function Yl(o,i){if(1&o&&(t.TgZ(0,"div",25),t.YNc(1,Hl,7,0,"div",28),t.YNc(2,Jl,3,2,"div",28),t.YNc(3,Kl,13,3,"div",28),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",0==e.onlineGameMode),t.xp6(1),t.Q6J("ngIf",1==e.onlineGameMode),t.xp6(1),t.Q6J("ngIf",2==e.onlineGameMode)}}const uo=function(o){return{"text-warning":o}};function Vl(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",25)(1,"div",17),t._uU(2,"- Multi Player -"),t.qZA(),t.TgZ(3,"div",26)(4,"div",27),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.online=1)}),t._uU(5," Online"),t.qZA(),t.TgZ(6,"div",27),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.online=0)}),t._uU(7," Offline"),t.qZA()(),t.YNc(8,ql,21,12,"div",28),t.YNc(9,Yl,4,3,"div",9),t.qZA()}if(2&o){const e=t.oxw();t.xp6(4),t.Q6J("ngClass",t.VKq(4,uo,1==e.online)),t.xp6(2),t.Q6J("ngClass",t.VKq(6,uo,0==e.online)),t.xp6(2),t.Q6J("ngIf",0==e.online),t.xp6(1),t.Q6J("ngIf",1==e.online)}}function jl(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",25)(1,"div",41),t._uU(2,"MSc.Project (COMP702) "),t.qZA(),t.TgZ(3,"div",21),t._uU(4,"Submitted By"),t.qZA(),t.TgZ(5,"div",42),t._uU(6,"Neeraj Jain Cherukunnu Jinachandran"),t.qZA(),t.TgZ(7,"div",42),t._uU(8,"201666803"),t.qZA(),t.TgZ(9,"div",43),t._uU(10,"Primary Supervisor"),t.qZA(),t.TgZ(11,"div",42),t._uU(12,"Louwe Kuijer"),t.qZA(),t.TgZ(13,"div",43),t._uU(14,"Secondary Supervisor"),t.qZA(),t.TgZ(15,"div",42),t._uU(16,"Qiyi Tang"),t.qZA(),t.TgZ(17,"div",44)(18,"a",45),t._uU(19,"Submit Your Feedback"),t.qZA()(),t.TgZ(20,"div",33),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.menu=1)}),t._uU(21,"Back"),t.qZA()()}}let ho=(()=>{var o;class i{constructor(n,r){this.router=n,this.gameService=r,this.rows=30,this.cols=60,this.menu=1,this.onlineGameMode=0,this.hostGameID="",this.joinGameID="",this.player1Name="",this.player2Name="",this.duration=5,this.difficulty=1,this.online=1,this.buildMaterial=[[[0,-1],[0,0],[0,1]],[[-1,0],[-1,1],[0,-1],[0,1],[1,1]],[[-1,1],[0,-1],[0,1],[1,0],[1,1]],[[0,0],[0,1],[1,0],[1,1]],[[-1,0],[0,-1],[0,1],[1,0]],[[-1,-2],[-1,1],[0,2],[1,-2],[1,2],[2,-1],[2,0],[2,1],[2,2]],[[-6,-4],[-6,-3],[-6,-2],[-6,2],[-6,3],[-6,4],[-4,-6],[-3,-6],[-2,-6],[-4,-1],[-3,-1],[-2,-1],[-4,1],[-3,1],[-2,1],[-4,6],[-3,6],[-2,6],[-1,-4],[-1,-3],[-1,-2],[-1,2],[-1,3],[-1,4],[1,-4],[1,-3],[1,-2],[1,2],[1,3],[1,4],[2,-6],[3,-6],[4,-6],[2,-1],[3,-1],[4,-1],[2,1],[3,1],[4,1],[2,6],[3,6],[4,6],[6,-4],[6,-3],[6,-2],[6,2],[6,3],[6,4]],[[0,0]]],this.errorMessage=""}ngOnInit(){this.gameGrid=this.createEmptyGrid(this.rows,this.cols),this.addRandomCells(),this.addRandomCells(),this.addRandomCells(),this.addRandomCells(),this.playGame(),this.gameService.initializeFB()}createEmptyGrid(n,r){let s=new Array(n);for(let l=0;l<n;l++)s[l]=new Array(r).fill(0);return s}playGame(){clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.runNextGeneration()},800)}runNextGeneration(){Math.floor(12*Math.random())%4==0&&this.addRandomCells(),this.gameGrid=this.calculateNextGeneration(this.gameGrid)}calculateNextGeneration(n){const r=this.createEmptyGrid(this.rows,this.cols);for(let s=0;s<this.rows;s++)for(let l=0;l<this.cols;l++){const a=n[s][l],c=this.countNeighbors(n,s,l);r[s][l]=0===a&&3===c?1:1===a&&(c<2||c>3)?0:a}return r}countNeighbors(n,r,s){let l=0;const a=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(let c=0;c<a.length;c++){const[d,u]=a[c];l+=n[(r+d+this.rows)%this.rows][(s+u+this.cols)%this.cols]}return l}addRandomCells(){var n=Math.floor(Math.random()*(this.rows-16))+8,r=Math.floor(Math.random()*(this.cols-16))+8,s=Math.floor(8*Math.random()),a=1;r>this.cols/2&&(a=-1),this.buildMaterial[s].forEach(c=>{var d=n+c[0],u=r+c[1]*a;this.gameGrid[d][u]=0===this.gameGrid[d][u]?1:0})}setMenu(n){this.menu=n,this.errorMessage=""}navToGame(n){if(1==n)this.gameService.players.player1.name=this.player1Name||"User",this.gameService.players.player2.name="Computer",this.gameService.gameConfig.duration=this.duration,this.gameService.gameConfig.difficulty=this.difficulty,this.gameService.gameConfig.mode=1,this.router.navigateByUrl("quick-game");else{if(2!=n)return;""==this.player1Name?this.errorMessage="Enter player 1 name !":""==this.player2Name?this.errorMessage="Enter player 2 name !":this.player1Name==this.player2Name?this.errorMessage="Use different names":(this.errorMessage="",this.gameService.players.player1.name=this.player1Name,this.gameService.players.player2.name=this.player2Name,this.gameService.gameConfig.duration=this.duration,this.gameService.gameConfig.mode=2,this.router.navigateByUrl("offline-game"))}}onlineGame(n){1==n?""==this.player1Name?this.errorMessage="Enter your name !":(this.errorMessage="",this.hostOnlineGame()):2==n?""==this.player2Name?this.errorMessage="Enter your name !":""==this.joinGameID?this.errorMessage="Enter Game ID !":(this.errorMessage="",this.checkOnlineGame()):-1==n&&(this.hostGameID="",this.joinGameID="",this.errorMessage="")}hostOnlineGame(){this.hostGameID=(new Date).getTime().toString().slice(-9,-3);var n={name:this.player1Name,score:0,status:"",message:"",duration:this.duration},r="games/"+this.hostGameID;Q(N(this.gameService.fbDatabase,r+"/player/1"),n),Y0(N(this.gameService.fbDatabase,r+"/player"),a=>{if(a.exists()){var c=a.val();c[1]&&c[2]&&(this.gameService.players.player1.name=this.player1Name,this.gameService.players.player2.name=c[2].name,this.gameService.gameConfig.duration=this.duration,this.gameService.gameConfig.mode=2,this.gameService.activePlayerID=1,this.gameService.hostGameURL=r,this.router.navigateByUrl("online-game"))}})}checkOnlineGame(){var n="games/"+this.joinGameID;d0(j(N(fe()),n+"/player")).then(s=>{if(s.exists()){var l=s.val();0==l.length?this.errorMessage="Wrong Game ID!":l[2]?this.errorMessage="Game room is full!":this.joinOnlineGame(n)}else console.log("No data available")}).catch(s=>{console.error(s)})}joinOnlineGame(n){var r={name:this.player2Name,score:0,status:"",message:"",duration:this.duration};Q(N(this.gameService.fbDatabase,n+"/player/2"),r),Y0(N(this.gameService.fbDatabase,n+"/player"),a=>{if(a.exists()){var c=a.val();c[1]&&c[2]&&(this.gameService.players.player1.name=c[1].name,this.gameService.players.player2.name=this.player2Name,this.gameService.gameConfig.duration=this.duration,this.gameService.gameConfig.mode=2,this.gameService.activePlayerID=2,this.gameService.hostGameURL=n,this.router.navigateByUrl("online-game"))}})}navToPage(){this.router.navigateByUrl("leader-board")}}return(o=i).\u0275fac=function(n){return new(n||o)(t.Y36(_e.F0),t.Y36(V0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-home"]],decls:15,vars:5,consts:[[1,"main-container","d-flex","flex-column","align-items-center","text-center"],["id","game",1,"game","p-4"],[4,"ngFor","ngForOf"],[1,"home","position-absolute"],[1,"title","my-5","text-uppercase"],[2,"color","#E1113B"],[1,"menu","d-flex","flex-column","align-items-center","text-center","mt-5"],["id","menu-1",4,"ngIf"],["id","menu-2",4,"ngIf"],["id","menu-3",4,"ngIf"],[1,"cell-container"],[3,"class","id",4,"ngFor","ngForOf"],[3,"id"],["id","menu-1"],[1,"menu-button",3,"click"],[1,"menu-button","mt-5",3,"click"],["id","menu-2"],[1,"menu-title"],[1,"menu-sub-title","pt-3"],["maxlength","10","placeholder","User",1,"menu-input",3,"ngModel","ngModelChange"],[1,"text-danger","menu-sub-title","pt2-3"],[1,"menu-sub-title","pt-4"],[3,"click"],[1,"d-flex","pt-4"],[1,"menu-button","mt-3",3,"click"],["id","menu-3"],[1,"d-flex","pt-4","justify-content-between"],[1,"menu-button",3,"ngClass","click"],[4,"ngIf"],["maxlength","10","placeholder","Name 1",1,"menu-input",3,"ngModel","ngModelChange"],[1,"menu-sub-title"],["maxlength","10","placeholder","Name 2",1,"menu-input",3,"ngModel","ngModelChange"],[1,"text-danger","menu-sub-title","pt-3"],[1,"menu-button","mt-4",3,"click"],[1,"menu-button","m-3","mt-4",3,"click"],[1,"menu-button","m-3",3,"click"],["maxlength","10","placeholder","Enter Your Name",1,"menu-input",3,"ngModel","ngModelChange"],[1,"mt-5"],[1,"text-primary","pt-4"],[1,"text-success","menu-sub-title","py-3"],["maxlength","6","placeholder","Enter Game ID",1,"menu-input",3,"ngModel","ngModelChange"],[1,"pb-3"],[1,"menu-sub-title","text-light"],[1,"menu-sub-title","pt-5"],[1,"my-4"],["href","https://forms.gle/7sVpsY87nxquqhaj9",1,"menu-sub-title","text-light"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,Gl,3,1,"div",2),t.qZA(),t.TgZ(3,"div",3)(4,"div")(5,"div",4)(6,"span",5),t._uU(7,"Cellular"),t.qZA(),t._uU(8,"Empire"),t.qZA()(),t.TgZ(9,"div",6),t.YNc(10,Bl,9,0,"div",7),t.YNc(11,Fl,25,11,"div",8),t.YNc(12,Vl,10,8,"div",9),t.YNc(13,jl,22,0,"div",9),t._UZ(14,"div"),t.qZA()()()),2&n&&(t.xp6(2),t.Q6J("ngForOf",r.gameGrid),t.xp6(8),t.Q6J("ngIf",1==r.menu),t.xp6(1),t.Q6J("ngIf",2==r.menu),t.xp6(1),t.Q6J("ngIf",3==r.menu),t.xp6(1),t.Q6J("ngIf",4==r.menu))},dependencies:[L.mk,L.sg,L.O5,Ie.Fj,Ie.JJ,Ie.nD,Ie.On],styles:[".main-container[_ngcontent-%COMP%]{color:#fff;overflow-x:hidden}.title[_ngcontent-%COMP%]{padding-top:25%;font-size:3rem}.game-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.game[_ngcontent-%COMP%]{height:648px;width:1248px;z-index:-1}.cell-container[_ngcontent-%COMP%]{display:flex}.cell[_ngcontent-%COMP%]{width:18px;height:18px;border-radius:5px;margin:1px;transition:background-color 1s ease-in-out}.cell-1[_ngcontent-%COMP%]{background-color:#121b29}@keyframes _ngcontent-%COMP%_new-cell{}.menu[_ngcontent-%COMP%]{font-size:1.5rem}.menu-title[_ngcontent-%COMP%]{color:#8c99b6;font-size:2rem}.menu-sub-title[_ngcontent-%COMP%]{color:#525c6e;font-size:1rem}.menu-button[_ngcontent-%COMP%]{margin:20px;padding:10px 20px;transition:all .1s;border:1px solid white;border-radius:10px}.menu-button[_ngcontent-%COMP%]:hover{scale:1.1;cursor:pointer!important}.menu-button-small-true[_ngcontent-%COMP%]{color:#fff}.menu-button-small-false[_ngcontent-%COMP%]:hover{scale:1.1;cursor:pointer!important}.menu-button-small-false[_ngcontent-%COMP%]{color:#525c6e}.menu-input[_ngcontent-%COMP%]{margin:15px;background:transparent;border:0px;border-bottom:1px solid white;color:#fff}"]}),i})();const po=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],fo=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],_o=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];function p0(o){return(p0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(o)}function m(o,i,e){return(i=function $l(o){var i=function zl(o,i){if("object"!==p0(o)||null===o)return o;var e=o[Symbol.toPrimitive];if(void 0!==e){var n=e.call(o,i||"default");if("object"!==p0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(o)}(o,"string");return"symbol"===p0(i)?i:String(i)}(i))in o?Object.defineProperty(o,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[i]=e,o}let w=(()=>{class o{static addClass(e,n){e&&n&&(e.classList?e.classList.add(n):e.className+=" "+n)}static addMultipleClasses(e,n){if(e&&n)if(e.classList){let r=n.trim().split(" ");for(let s=0;s<r.length;s++)e.classList.add(r[s])}else{let r=n.split(" ");for(let s=0;s<r.length;s++)e.className+=" "+r[s]}}static removeClass(e,n){e&&n&&(e.classList?e.classList.remove(n):e.className=e.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(e,n){return!(!e||!n)&&(e.classList?e.classList.contains(n):new RegExp("(^| )"+n+"( |$)","gi").test(e.className))}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(n){return n!==e})}static find(e,n){return Array.from(e.querySelectorAll(n))}static findSingle(e,n){return this.isElement(e)?e.querySelector(n):null}static index(e){let n=e.parentNode.childNodes,r=0;for(var s=0;s<n.length;s++){if(n[s]==e)return r;1==n[s].nodeType&&r++}return-1}static indexWithinGroup(e,n){let r=e.parentNode?e.parentNode.childNodes:[],s=0;for(var l=0;l<r.length;l++){if(r[l]==e)return s;r[l].attributes&&r[l].attributes[n]&&1==r[l].nodeType&&s++}return-1}static appendOverlay(e,n,r="self"){"self"!==r&&e&&n&&this.appendChild(e,n)}static alignOverlay(e,n,r="self",s=!0){e&&n&&(s&&(e.style.minWidth=`${o.getOuterWidth(n)}px`),"self"===r?this.relativePosition(e,n):this.absolutePosition(e,n))}static relativePosition(e,n){const r=Z=>{if(Z)return"relative"===getComputedStyle(Z).getPropertyValue("position")?Z:r(Z.parentElement)},s=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),l=n.offsetHeight,a=n.getBoundingClientRect(),c=this.getWindowScrollTop(),d=this.getWindowScrollLeft(),u=this.getViewport(),f=r(e)?.getBoundingClientRect()||{top:-1*c,left:-1*d};let _,g;a.top+l+s.height>u.height?(_=a.top-f.top-s.height,e.style.transformOrigin="bottom",a.top+_<0&&(_=-1*a.top)):(_=l+a.top-f.top,e.style.transformOrigin="top");const v=a.left+s.width-u.width;g=s.width>u.width?-1*(a.left-f.left):v>0?a.left-f.left-v:a.left-f.left,e.style.top=_+"px",e.style.left=g+"px"}static absolutePosition(e,n){const r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=r.height,l=r.width,a=n.offsetHeight,c=n.offsetWidth,d=n.getBoundingClientRect(),u=this.getWindowScrollTop(),h=this.getWindowScrollLeft(),f=this.getViewport();let _,g;d.top+a+s>f.height?(_=d.top+u-s,e.style.transformOrigin="bottom",_<0&&(_=u)):(_=a+d.top+u,e.style.transformOrigin="top"),g=d.left+l>f.width?Math.max(0,d.left+h+c-l):d.left+h,e.style.top=_+"px",e.style.left=g+"px"}static getParents(e,n=[]){return null===e.parentNode?n:this.getParents(e.parentNode,n.concat([e.parentNode]))}static getScrollableParents(e){let n=[];if(e){let r=this.getParents(e);const s=/(auto|scroll)/,l=a=>{let c=window.getComputedStyle(a,null);return s.test(c.getPropertyValue("overflow"))||s.test(c.getPropertyValue("overflowX"))||s.test(c.getPropertyValue("overflowY"))};for(let a of r){let c=1===a.nodeType&&a.dataset.scrollselectors;if(c){let d=c.split(",");for(let u of d){let h=this.findSingle(a,u);h&&l(h)&&n.push(h)}}9!==a.nodeType&&l(a)&&n.push(a)}}return n}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let n=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",n}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let n=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",n}static getHiddenElementDimensions(e){let n={};return e.style.visibility="hidden",e.style.display="block",n.width=e.offsetWidth,n.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",n}static scrollInView(e,n){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,l=getComputedStyle(e).getPropertyValue("paddingTop"),a=l?parseFloat(l):0,c=e.getBoundingClientRect(),u=n.getBoundingClientRect().top+document.body.scrollTop-(c.top+document.body.scrollTop)-s-a,h=e.scrollTop,f=e.clientHeight,_=this.getOuterHeight(n);u<0?e.scrollTop=h+u:u+_>f&&(e.scrollTop=h+u-f+_)}static fadeIn(e,n){e.style.opacity=0;let r=+new Date,s=0,l=function(){s=+e.style.opacity.replace(",",".")+((new Date).getTime()-r)/n,e.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(l)||setTimeout(l,16))};l()}static fadeOut(e,n){var r=1,a=50/n;let c=setInterval(()=>{(r-=a)<=0&&(r=0,clearInterval(c)),e.style.opacity=r},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,n){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(l){return-1!==[].indexOf.call(document.querySelectorAll(l),this)}).call(e,n)}static getOuterWidth(e,n){let r=e.offsetWidth;if(n){let s=getComputedStyle(e);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}static getHorizontalPadding(e){let n=getComputedStyle(e);return parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)}static getHorizontalMargin(e){let n=getComputedStyle(e);return parseFloat(n.marginLeft)+parseFloat(n.marginRight)}static innerWidth(e){let n=e.offsetWidth,r=getComputedStyle(e);return n+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),n}static width(e){let n=e.offsetWidth,r=getComputedStyle(e);return n-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),n}static getInnerHeight(e){let n=e.offsetHeight,r=getComputedStyle(e);return n+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),n}static getOuterHeight(e,n){let r=e.offsetHeight;if(n){let s=getComputedStyle(e);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}static getHeight(e){let n=e.offsetHeight,r=getComputedStyle(e);return n-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),n}static getWidth(e){let n=e.offsetWidth,r=getComputedStyle(e);return n-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),n}static getViewport(){let e=window,n=document,r=n.documentElement,s=n.getElementsByTagName("body")[0];return{width:e.innerWidth||r.clientWidth||s.clientWidth,height:e.innerHeight||r.clientHeight||s.clientHeight}}static getOffset(e){var n=e.getBoundingClientRect();return{top:n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:n.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,n){let r=e.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(n,e)}static getUserAgent(){if(navigator&&this.isClient())return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,n){if(this.isElement(n))n.appendChild(e);else{if(!(n&&n.el&&n.el.nativeElement))throw"Cannot append "+n+" to "+e;n.el.nativeElement.appendChild(e)}}static removeChild(e,n){if(this.isElement(n))n.removeChild(e);else{if(!n.el||!n.el.nativeElement)throw"Cannot remove "+e+" from "+n;n.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let n=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let n=document.createElement("div");n.className="p-scrollbar-measure",document.body.appendChild(n);let r=n.offsetWidth-n.clientWidth;return document.body.removeChild(n),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let n=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=n,n}static invokeElementMethod(e,n,r){e[n].apply(e,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),n=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:n[1]||"",version:n[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return!e||null===e.offsetParent}static isVisible(e){return e&&null!=e.offsetParent}static isExist(e){return null!==e&&typeof e<"u"&&e.nodeName&&e.parentNode}static focus(e,n){e&&document.activeElement!==e&&e.focus(n)}static getFocusableElements(e){let n=o.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let s of n)(s.offsetWidth||s.offsetHeight||s.getClientRects().length)&&r.push(s);return r}static getNextFocusableElement(e,n=!1){const r=o.getFocusableElements(e);let s=0;if(r&&r.length>0){const l=r.indexOf(r[0].ownerDocument.activeElement);n?s=-1==l||0===l?r.length-1:l-1:-1!=l&&l!==r.length-1&&(s=l+1)}return r[s]}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(e,n){if(!e)return null;switch(e){case"document":return document;case"window":return window;case"@next":return n?.nextElementSibling;case"@prev":return n?.previousElementSibling;case"@parent":return n?.parentElement;case"@grandparent":return n?.parentElement.parentElement;default:const r=typeof e;if("string"===r)return document.querySelector(e);if("object"===r&&e.hasOwnProperty("nativeElement"))return this.isExist(e.nativeElement)?e.nativeElement:void 0;const l=(a=e)&&a.constructor&&a.call&&a.apply?e():e;return l&&9===l.nodeType||this.isExist(l)?l:null}var a}static isClient(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}static getAttribute(e,n){if(e){const r=e.getAttribute(n);return isNaN(r)?"true"===r||"false"===r?"true"===r:r:+r}}}return m(o,"zindex",1e3),m(o,"calculatedScrollbarWidth",null),m(o,"calculatedScrollbarHeight",null),m(o,"browser",void 0),o})();class Xl{constructor(i,e=(()=>{})){m(this,"element",void 0),m(this,"listener",void 0),m(this,"scrollableParents",void 0),this.element=i,this.listener=e}bindScrollListener(){this.scrollableParents=w.getScrollableParents(this.element);for(let i=0;i<this.scrollableParents.length;i++)this.scrollableParents[i].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let i=0;i<this.scrollableParents.length;i++)this.scrollableParents[i].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}var si=function ea(){let o=[];const r=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:r,set:(s,l,a)=>{l&&(l.style.zIndex=String(((s,l)=>{let a=o.length>0?o[o.length-1]:{key:s,value:l},c=a.value+(a.key===s?0:l)+1;return o.push({key:s,value:c}),c})(s,a)))},clear:s=>{s&&((s=>{o=o.filter(l=>l.value!==s)})(r(s)),s.style.zIndex="")},getCurrent:()=>o.length>0?o[o.length-1].value:0}}(),ta=H(8645);let U=(()=>{class o{}return m(o,"STARTS_WITH","startsWith"),m(o,"CONTAINS","contains"),m(o,"NOT_CONTAINS","notContains"),m(o,"ENDS_WITH","endsWith"),m(o,"EQUALS","equals"),m(o,"NOT_EQUALS","notEquals"),m(o,"IN","in"),m(o,"LESS_THAN","lt"),m(o,"LESS_THAN_OR_EQUAL_TO","lte"),m(o,"GREATER_THAN","gt"),m(o,"GREATER_THAN_OR_EQUAL_TO","gte"),m(o,"BETWEEN","between"),m(o,"IS","is"),m(o,"IS_NOT","isNot"),m(o,"BEFORE","before"),m(o,"AFTER","after"),m(o,"DATE_IS","dateIs"),m(o,"DATE_IS_NOT","dateIsNot"),m(o,"DATE_BEFORE","dateBefore"),m(o,"DATE_AFTER","dateAfter"),o})(),na=(()=>{var o;class i{constructor(){m(this,"ripple",!1),m(this,"overlayOptions",{}),m(this,"filterMatchModeOptions",{text:[U.STARTS_WITH,U.CONTAINS,U.NOT_CONTAINS,U.ENDS_WITH,U.EQUALS,U.NOT_EQUALS],numeric:[U.EQUALS,U.NOT_EQUALS,U.LESS_THAN,U.LESS_THAN_OR_EQUAL_TO,U.GREATER_THAN,U.GREATER_THAN_OR_EQUAL_TO],date:[U.DATE_IS,U.DATE_IS_NOT,U.DATE_BEFORE,U.DATE_AFTER]}),m(this,"translation",{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",pending:"Pending",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",emptyFilterMessage:"No results found",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"{page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",previousPageLabel:"Previous Page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left"}}),m(this,"zIndex",{modal:1100,overlay:1e3,menu:1e3,tooltip:1100}),m(this,"translationSource",new ta.x),m(this,"translationObserver",this.translationSource.asObservable())}getTranslation(n){return this.translation[n]}setTranslation(n){this.translation={...this.translation,...n},this.translationSource.next(this.translation)}}return o=i,m(i,"\u0275fac",function(n){return new(n||o)}),m(i,"\u0275prov",t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})),i})(),li=(()=>{var o;class i{get disabled(){return this._disabled}set disabled(n){this._disabled=n,this.deactivate()}constructor(n,r,s,l,a,c){m(this,"platformId",void 0),m(this,"el",void 0),m(this,"zone",void 0),m(this,"config",void 0),m(this,"renderer",void 0),m(this,"changeDetector",void 0),m(this,"tooltipPosition",void 0),m(this,"tooltipEvent","hover"),m(this,"appendTo",void 0),m(this,"positionStyle",void 0),m(this,"tooltipStyleClass",void 0),m(this,"tooltipZIndex",void 0),m(this,"escape",!0),m(this,"showDelay",void 0),m(this,"hideDelay",void 0),m(this,"life",void 0),m(this,"positionTop",void 0),m(this,"positionLeft",void 0),m(this,"autoHide",!0),m(this,"fitContent",!0),m(this,"hideOnEscape",!0),m(this,"text",void 0),m(this,"tooltipOptions",void 0),m(this,"_tooltipOptions",{tooltipLabel:null,tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",positionStyle:null,tooltipStyleClass:null,tooltipZIndex:"auto",escape:!0,disabled:null,showDelay:null,hideDelay:null,positionTop:null,positionLeft:null,life:null,autoHide:!0,hideOnEscape:!0}),m(this,"_disabled",void 0),m(this,"container",void 0),m(this,"styleClass",void 0),m(this,"tooltipText",void 0),m(this,"showTimeout",void 0),m(this,"hideTimeout",void 0),m(this,"active",void 0),m(this,"mouseEnterListener",void 0),m(this,"mouseLeaveListener",void 0),m(this,"containerMouseleaveListener",void 0),m(this,"clickListener",void 0),m(this,"focusListener",void 0),m(this,"blurListener",void 0),m(this,"scrollHandler",void 0),m(this,"resizeListener",void 0),this.platformId=n,this.el=r,this.zone=s,this.config=l,this.renderer=a,this.changeDetector=c}ngAfterViewInit(){(0,L.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onInputClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("click",this.clickListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let n=this.getTarget(this.el.nativeElement);n.addEventListener("focus",this.focusListener),n.addEventListener("blur",this.blurListener)}})}ngOnChanges(n){n.tooltipPosition&&this.setOption({tooltipPosition:n.tooltipPosition.currentValue}),n.tooltipEvent&&this.setOption({tooltipEvent:n.tooltipEvent.currentValue}),n.appendTo&&this.setOption({appendTo:n.appendTo.currentValue}),n.positionStyle&&this.setOption({positionStyle:n.positionStyle.currentValue}),n.tooltipStyleClass&&this.setOption({tooltipStyleClass:n.tooltipStyleClass.currentValue}),n.tooltipZIndex&&this.setOption({tooltipZIndex:n.tooltipZIndex.currentValue}),n.escape&&this.setOption({escape:n.escape.currentValue}),n.showDelay&&this.setOption({showDelay:n.showDelay.currentValue}),n.hideDelay&&this.setOption({hideDelay:n.hideDelay.currentValue}),n.life&&this.setOption({life:n.life.currentValue}),n.positionTop&&this.setOption({positionTop:n.positionTop.currentValue}),n.positionLeft&&this.setOption({positionLeft:n.positionLeft.currentValue}),n.disabled&&this.setOption({disabled:n.disabled.currentValue}),n.text&&(this.setOption({tooltipLabel:n.text.currentValue}),this.active&&(n.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),n.autoHide&&this.setOption({autoHide:n.autoHide.currentValue}),n.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...n.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}isAutoHide(){return this.getOption("autoHide")}onMouseEnter(n){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(n){(this.isAutoHide()||!(w.hasClass(n.target,"p-tooltip")||w.hasClass(n.target,"p-tooltip-arrow")||w.hasClass(n.target,"p-tooltip-text")||w.hasClass(n.relatedTarget,"p-tooltip")||w.hasClass(n.relatedTarget,"p-tooltip-text")||w.hasClass(n.relatedTarget,"p-tooltip-arrow")))&&this.deactivate()}onFocus(n){this.activate()}onBlur(n){this.deactivate()}onInputClick(n){this.deactivate()}onPressEscape(){this.hideOnEscape&&this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let n=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},n)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let n=document.createElement("div");n.className="p-tooltip-arrow",this.container.appendChild(n),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?w.appendChild(this.container,this.el.nativeElement):w.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content"),this.isAutoHide()||this.bindContainerMouseleaveListener()}bindContainerMouseleaveListener(){this.containerMouseleaveListener||(this.containerMouseleaveListener=this.renderer.listen(this.container??this.container.nativeElement,"mouseleave",r=>{this.deactivate()}))}unbindContainerMouseleaveListener(){this.containerMouseleaveListener&&(this.bindContainerMouseleaveListener(),this.containerMouseleaveListener=null)}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),w.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?si.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&si.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let n=this.el.nativeElement.getBoundingClientRect();return{left:n.left+w.getWindowScrollLeft(),top:n.top+w.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let n=this.getHostOffset(),r=n.left+w.getOuterWidth(this.el.nativeElement),s=n.top+(w.getOuterHeight(this.el.nativeElement)-w.getOuterHeight(this.container))/2;this.container.style.left=r+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let n=this.getHostOffset(),r=n.left-w.getOuterWidth(this.container),s=n.top+(w.getOuterHeight(this.el.nativeElement)-w.getOuterHeight(this.container))/2;this.container.style.left=r+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let n=this.getHostOffset(),r=n.left+(w.getOuterWidth(this.el.nativeElement)-w.getOuterWidth(this.container))/2,s=n.top-w.getOuterHeight(this.container);this.container.style.left=r+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let n=this.getHostOffset(),r=n.left+(w.getOuterWidth(this.el.nativeElement)-w.getOuterWidth(this.container))/2,s=n.top+w.getOuterHeight(this.el.nativeElement);this.container.style.left=r+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}setOption(n){this._tooltipOptions={...this._tooltipOptions,...n}}getOption(n){return this._tooltipOptions[n]}getTarget(n){return w.hasClass(n,"p-inputwrapper")?w.findSingle(n,"input"):n}preAlign(n){this.container.style.left="-999px",this.container.style.top="-999px";let r="p-tooltip p-component p-tooltip-"+n;this.container.className=this.getOption("tooltipStyleClass")?r+" "+this.getOption("tooltipStyleClass"):r}isOutOfBounds(){let n=this.container.getBoundingClientRect(),r=n.top,s=n.left,l=w.getOuterWidth(this.container),a=w.getOuterHeight(this.container),c=w.getViewport();return s+l>c.width||s<0||r<0||r+a>c.height}onWindowResize(n){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Xl(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let n=this.getTarget(this.el.nativeElement);n.removeEventListener("focus",this.focusListener),n.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):w.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.unbindContainerMouseleaveListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&si.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return o=i,m(i,"\u0275fac",function(n){return new(n||o)(t.Y36(t.Lbi),t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(na),t.Y36(t.Qsj),t.Y36(t.sBO))}),m(i,"\u0275dir",t.lG2({type:o,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],hostBindings:function(n,r){1&n&&t.NdJ("keydown.escape",function(l){return r.onPressEscape(l)},!1,t.evT)},inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",autoHide:"autoHide",fitContent:"fitContent",hideOnEscape:"hideOnEscape",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[t.TTD]})),i})(),oa=(()=>{var o;class i{}return o=i,m(i,"\u0275fac",function(n){return new(n||o)}),m(i,"\u0275mod",t.oAB({type:o})),m(i,"\u0275inj",t.cJS({imports:[L.ez]})),i})();function ra(o,i){if(1&o&&(t.TgZ(0,"div",11)(1,"div",12),t._UZ(2,"img",13),t.qZA(),t.TgZ(3,"div")(4,"div",14)(5,"div",15),t._uU(6),t.qZA(),t.TgZ(7,"div",16),t._uU(8),t.qZA(),t.TgZ(9,"div",17),t._uU(10),t.qZA()(),t.TgZ(11,"div",1),t._uU(12),t.qZA()()()),2&o){const e=i.$implicit,n=i.index;t.xp6(2),t.Q6J("src","assets/"+e.icon,t.LSH),t.xp6(4),t.AsE(" ",n+1,".",e.name," "),t.xp6(2),t.hij(" Points:",e.points," "),t.xp6(2),t.hij(" ",e.type," "),t.xp6(2),t.hij(" ",e.desc," ")}}let j0=(()=>{var o;class i{constructor(){this.tools=[{name:"Blinker",icon:"tool_blinker.png",type:"Defence",points:3,desc:"This is a static tool, it oscillate in a fixed position."},{name:"Block",icon:"tool_block.png",type:"Defence",points:4,desc:"This is a static tool. "},{name:"Star",icon:"tool_star.png",type:"Defence",points:4,desc:"This is a static tool. "},{name:"Glider Up",icon:"tool_glider_up.png",type:"Weapon",points:5,desc:"This is a moving tool, it moves diagonally upwards."},{name:"Glider Down",icon:"tool_glider_down.png",type:"Weapon",points:5,desc:"This is a moving tool, it moves diagonally downwards. "},{name:"Spaceship",icon:"tool_spaceship.png",type:"Weapon",points:9,desc:"This is a moving tool, it moves straight to opponents area. "},{name:"Pulsar",icon:"tool_pulsar.png",type:"Reinforcement",points:48,desc:"This is a static oscillating tool. with high number of living cells."}]}}return(o=i).\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-game-rules"]],decls:200,vars:1,consts:[[1,"main-container","px-5","d-flex","flex-column"],[1,""],[1,"title","text-uppercase","text-center"],[2,"color","#E1113B"],[1,"title","mt-5","mb-3"],[1,"mt-5","d-flex","flex-column"],[1,"title","mb-3"],[1,"mb-3"],["class","d-flex py-3",4,"ngFor","ngForOf"],["width","80%","src","assets/components.png"],[1,"table","mt-4"],[1,"d-flex","py-3"],[1,"pe-3"],["width","80",3,"src"],[1,"d-flex","pb-2"],[1,"text-light"],[1,"ps-4","text-success"],[1,"ps-4","text-primary"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"div",2)(4,"span",3),t._uU(5,"Cellular"),t.qZA(),t._uU(6,"Empire"),t.qZA()(),t.TgZ(7,"div")(8,"div",4),t._uU(9," Introduction "),t.qZA(),t.TgZ(10,"div"),t._uU(11," \xa0 Cellular Empire is a two-player game inspired by Conway's Game of Life, where players compete on agrid board to acheive maximum living cell as winning criteria. Conway's Game of Life is a cellular automaton that simulates the evolution of a grid of cells based on a set of simple rules. "),t.qZA()(),t.TgZ(12,"div")(13,"div",4),t._uU(14," Three gaming modes "),t.qZA(),t.TgZ(15,"div"),t._uU(16," 1. Quick Game : Test your skills against computer opponents at different difficulty levels, from Easy to Hard. "),t.qZA(),t.TgZ(17,"div"),t._uU(18," 2. Multi-player Offline Game : Compete head-to-head with a friend on the same device. "),t.qZA(),t.TgZ(19,"div"),t._uU(20," 3. Multi-player Online Game : Connect with players worldwide over the internet, challenge friends and rise through the ranks in intense battles. "),t.qZA()(),t.TgZ(21,"div",5)(22,"div",6),t._uU(23," Game Rules "),t.qZA(),t.TgZ(24,"div",7),t._uU(25," Conway's Game of Life "),t.qZA(),t.TgZ(26,"div")(27,"div"),t._uU(28," 1. Any live cell with fewer than two live neighbors dies, as if by underpopulation. "),t.qZA(),t.TgZ(29,"div"),t._uU(30," 2. Any live cell with two or three live neighbors survives to the next generation. "),t.qZA(),t.TgZ(31,"div"),t._uU(32," 3. Any live cell with more than three live neighbors dies, as if by overpopulation. "),t.qZA(),t.TgZ(33,"div"),t._uU(34," 4. Any dead cell with exactly three live neighbors becomes a live cell, as if by reproduction. "),t.qZA()()(),t.TgZ(35,"div",5)(36,"div",6),t._uU(37," How to play "),t.qZA(),t.TgZ(38,"div")(39,"div"),t._uU(40," 1. Choose a weapon/tool and construct your empire's structures. "),t.qZA(),t.TgZ(41,"div"),t._uU(42," 2. Utilize moving tools for offense and static tools for defense against opponent's structures. "),t.qZA(),t.TgZ(43,"div"),t._uU(44," 3. Expand your empire to increase the number of living cells. "),t.qZA(),t.TgZ(45,"div"),t._uU(46," 4. Wait for both players to finish building, then start playing. "),t.qZA(),t.TgZ(47,"div"),t._uU(48," 5. Engage in rounds, attacking and defending strategically. "),t.qZA(),t.TgZ(49,"div"),t._uU(50," 6. After each round, reinforce and repair your structures as needed. "),t.qZA(),t.TgZ(51,"div"),t._uU(52," 7. Play through multiple generations, adjusting tactics based on outcomes. "),t.qZA(),t.TgZ(53,"div"),t._uU(54," 8. Calculate the total living cells after all generations to determine the winner. "),t.qZA()()()(),t.TgZ(55,"div",5)(56,"div",6),t._uU(57," Tools and Weapons "),t.qZA(),t.TgZ(58,"div"),t.YNc(59,ra,13,6,"div",8),t.qZA()(),t.TgZ(60,"div",5)(61,"div",6),t._uU(62," Game Board "),t.qZA(),t._UZ(63,"img",9),t.TgZ(64,"table",10)(65,"thead")(66,"tr")(67,"th"),t._uU(68,"#"),t.qZA(),t.TgZ(69,"th"),t._uU(70,"Name"),t.qZA(),t.TgZ(71,"th"),t._uU(72,"Description"),t.qZA()()(),t.TgZ(73,"tbody")(74,"tr")(75,"td"),t._uU(76,"1"),t.qZA(),t.TgZ(77,"td"),t._uU(78,"Play/Pause"),t.qZA(),t.TgZ(79,"td"),t._uU(80,"Play: To start the game, Pause: To pause the game."),t.qZA()(),t.TgZ(81,"tr")(82,"td"),t._uU(83,"2"),t.qZA(),t.TgZ(84,"td"),t._uU(85,"Reset"),t.qZA(),t.TgZ(86,"td"),t._uU(87,"Reset the whole game."),t.qZA()(),t.TgZ(88,"tr")(89,"td"),t._uU(90,"3"),t.qZA(),t.TgZ(91,"td"),t._uU(92,"Speed"),t.qZA(),t.TgZ(93,"td"),t._uU(94,"Change game play speed: 0.5x, 1x, 2x, & 5x"),t.qZA()(),t.TgZ(95,"tr")(96,"td"),t._uU(97,"4"),t.qZA(),t.TgZ(98,"td"),t._uU(99,"Mute"),t.qZA(),t.TgZ(100,"td"),t._uU(101,"Mute game audio"),t.qZA()(),t.TgZ(102,"tr")(103,"td"),t._uU(104,"5"),t.qZA(),t.TgZ(105,"td"),t._uU(106,"Help"),t.qZA(),t.TgZ(107,"td"),t._uU(108,"Game instructions"),t.qZA()(),t.TgZ(109,"tr")(110,"td"),t._uU(111,"6"),t.qZA(),t.TgZ(112,"td"),t._uU(113,"Quit"),t.qZA(),t.TgZ(114,"td"),t._uU(115,"Stop and Quit game"),t.qZA()(),t.TgZ(116,"tr")(117,"td"),t._uU(118,"7"),t.qZA(),t.TgZ(119,"td"),t._uU(120,"Progress"),t.qZA(),t.TgZ(121,"td"),t._uU(122,"Percentage progress of game based on generation count"),t.qZA()(),t.TgZ(123,"tr")(124,"td"),t._uU(125,"8"),t.qZA(),t.TgZ(126,"td"),t._uU(127,"Generation"),t.qZA(),t.TgZ(128,"td"),t._uU(129,"Current generation vs total generataion count"),t.qZA()(),t.TgZ(130,"tr")(131,"td"),t._uU(132,"9"),t.qZA(),t.TgZ(133,"td"),t._uU(134,"Rounds"),t.qZA(),t.TgZ(135,"td"),t._uU(136,"Game rounds (4 total rounds)"),t.qZA()(),t.TgZ(137,"tr")(138,"td"),t._uU(139,"10"),t.qZA(),t.TgZ(140,"td"),t._uU(141,"User Image"),t.qZA(),t.TgZ(142,"td"),t._uU(143,"User image to show user state based on score"),t.qZA()(),t.TgZ(144,"tr")(145,"td"),t._uU(146,"11"),t.qZA(),t.TgZ(147,"td"),t._uU(148,"User Message"),t.qZA(),t.TgZ(149,"td"),t._uU(150,"User message and instructions for the game"),t.qZA()(),t.TgZ(151,"tr")(152,"td"),t._uU(153,"12"),t.qZA(),t.TgZ(154,"td"),t._uU(155,"User Name"),t.qZA(),t.TgZ(156,"td"),t._uU(157,"Name of the user"),t.qZA()(),t.TgZ(158,"tr")(159,"td"),t._uU(160,"13"),t.qZA(),t.TgZ(161,"td"),t._uU(162,"Score"),t.qZA(),t.TgZ(163,"td"),t._uU(164,"Game score of the user (Count of total live cells)"),t.qZA()(),t.TgZ(165,"tr")(166,"td"),t._uU(167,"14"),t.qZA(),t.TgZ(168,"td"),t._uU(169,"Weapons/Tools"),t.qZA(),t.TgZ(170,"td"),t._uU(171,"Pre-build weapons and tools (group of live cells)"),t.qZA()(),t.TgZ(172,"tr")(173,"td"),t._uU(174,"15"),t.qZA(),t.TgZ(175,"td"),t._uU(176,"Weapons/Tools Count"),t.qZA(),t.TgZ(177,"td"),t._uU(178,"Remaining count of pre-build weapons and tools"),t.qZA()(),t.TgZ(179,"tr")(180,"td"),t._uU(181,"16"),t.qZA(),t.TgZ(182,"td"),t._uU(183,"Edit"),t.qZA(),t.TgZ(184,"td"),t._uU(185,"Edit one cell in the game board"),t.qZA()(),t.TgZ(186,"tr")(187,"td"),t._uU(188,"17"),t.qZA(),t.TgZ(189,"td"),t._uU(190,"Undo"),t.qZA(),t.TgZ(191,"td"),t._uU(192,"undo last actions"),t.qZA()(),t.TgZ(193,"tr")(194,"td"),t._uU(195,"18"),t.qZA(),t.TgZ(196,"td"),t._uU(197,"Clear"),t.qZA(),t.TgZ(198,"td"),t._uU(199,"Clear whole game board"),t.qZA()()()()()()),2&n&&(t.xp6(59),t.Q6J("ngForOf",r.tools))},dependencies:[L.sg],styles:[".main-container[_ngcontent-%COMP%]{color:#aaa}.title[_ngcontent-%COMP%]{color:#fff}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{background-color:transparent;color:#fff;font-size:.8rem}"]}),i})();function sa(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",56),t.NdJ("click",function(){const s=t.CHM(e).index,l=t.oxw();return t.KtG(l.selectBuildMode(s))}),t._UZ(1,"i"),t.TgZ(2,"div"),t._uU(3),t.qZA()()}if(2&o){const e=i.$implicit,n=i.index,r=t.oxw();t.Gre("tool-l tool-l-",r.buildMode==n," d-flex justify-content-center align-items-center"),t.s9C("pTooltip",e),t.xp6(1),t.Gre("tool-text-l pi ",r.buildMaterialIcon[n],""),t.xp6(1),t.Gre("pi position-absolute tool-count-l tool-count-l-",r.buildMode==n,""),t.xp6(1),t.hij(" ",r.buildMaterialCount1[n]," ")}}function la(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",56),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index,s=t.oxw();return t.KtG(s.selectActionTool(r+7))}),t._UZ(2,"i"),t.TgZ(3,"div"),t._uU(4),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw(),n=e.index,r=e.$implicit,s=t.oxw();t.xp6(1),t.Gre("tool-l tool-l-",s.buildMode==n+7,"\n                                d-flex justify-content-center align-items-center"),t.s9C("pTooltip",r),t.xp6(1),t.Gre("tool-text-l pi ",s.actionToolIcon[n],""),t.xp6(1),t.Gre("pi position-absolute tool-count-l tool-count-l-",s.buildMode==n+7,""),t.xp6(1),t.hij(" ",s.buildMaterialCount1[n+7]," ")}}function aa(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",56),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index,s=t.oxw();return t.KtG(s.selectActionTool(r+7))}),t._UZ(2,"i"),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(),n=e.$implicit,r=e.index,s=t.oxw();t.xp6(1),t.Gre("tool-l tool-l-disable-",0==s.buildHistory.length,"\n                                d-flex justify-content-center align-items-center"),t.s9C("pTooltip",n),t.xp6(1),t.Gre("tool-text-l pi ",s.actionToolIcon[r],"")}}function ca(o,i){if(1&o&&(t.ynx(0),t.YNc(1,la,5,11,"ng-container",57),t.YNc(2,aa,3,7,"ng-container",57),t.BQk()),2&o){const e=i.index;t.xp6(1),t.Q6J("ngIf",0==e),t.xp6(1),t.Q6J("ngIf",e>0)}}function da(o,i){if(1&o&&(t.TgZ(0,"div",58),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.lockCounter," ")}}function ua(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",61),t.NdJ("click",function(){const s=t.CHM(e).index,l=t.oxw().index,a=t.oxw();return t.KtG(a.toggleCell(l,s))}),t.qZA()}if(2&o){const e=i.index,n=t.oxw().index;t.hYB("id","game_",n,"_",e,"")}}function ha(o,i){if(1&o&&(t.TgZ(0,"div")(1,"div",59),t.YNc(2,ua,1,2,"div",60),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.counter(e.cols/2))}}function pa(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"i",64),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.unblockSection(1))}),t.qZA()}}function fa(o,i){if(1&o&&(t.TgZ(0,"div",62),t.YNc(1,pa,1,0,"i",63),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.player1buildComplete)}}function _a(o,i){if(1&o&&t._UZ(0,"div",66),2&o){const e=i.index,n=t.oxw().index,r=t.oxw();t.hYB("id","game_",n,"_",e+r.cols/2,"")}}function ma(o,i){if(1&o&&(t.TgZ(0,"div")(1,"div",59),t.YNc(2,_a,1,2,"div",65),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.counter(e.cols/2))}}function ga(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"i",64),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.unblockSection(2))}),t.qZA()}}function ya(o,i){if(1&o&&(t.TgZ(0,"div",62),t.YNc(1,ga,1,0,"i",63),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.player2buildComplete)}}function va(o,i){if(1&o&&(t.TgZ(0,"div",67),t._UZ(1,"i"),t.qZA()),2&o){const e=i.$implicit,n=i.index,r=t.oxw();t.s9C("pTooltip",e),t.xp6(1),t.Gre("tool-text-r pi ",r.buildMaterialIcon[n],"")}}function Ca(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"div",67),t._UZ(2,"i"),t.qZA(),t.BQk()),2&o){const e=t.oxw(),n=e.$implicit,r=e.index,s=t.oxw();t.xp6(1),t.s9C("pTooltip",n),t.xp6(1),t.Gre("tool-text-r pi ",s.actionToolIcon[r],"")}}function xa(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Ca,3,4,"ng-container",57),t.BQk()),2&o){const e=i.index;t.xp6(1),t.Q6J("ngIf",0==e)}}function Ta(o,i){1&o&&(t.TgZ(0,"div"),t._uU(1," Draw "),t.qZA())}function Pa(o,i){if(1&o&&(t.TgZ(0,"div")(1,"div"),t._uU(2," Winner "),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(4),t.Oqu(e.player1Name)}}function ba(o,i){if(1&o&&(t.TgZ(0,"div")(1,"div"),t._uU(2,"Winner"),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(4),t.Oqu(e.player2Name)}}function wa(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",68)(1,"div",69)(2,"div",70)(3,"div",71),t.YNc(4,Ta,2,0,"div",57),t.YNc(5,Pa,5,1,"div",57),t.YNc(6,ba,5,1,"div",57),t.qZA(),t.TgZ(7,"div",72)(8,"div",70)(9,"div",73),t._uU(10),t.qZA(),t.TgZ(11,"div",20)(12,"div"),t._uU(13,"Score"),t.qZA(),t._UZ(14,"div",74),t.TgZ(15,"div"),t._uU(16),t.qZA()(),t.TgZ(17,"div",20)(18,"div"),t._uU(19,"Born"),t.qZA(),t._UZ(20,"div",74),t.TgZ(21,"div"),t._uU(22),t.qZA()(),t.TgZ(23,"div",20)(24,"div"),t._uU(25,"Death"),t.qZA(),t._UZ(26,"div",74),t.TgZ(27,"div"),t._uU(28),t.qZA()()(),t._UZ(29,"div",75),t.TgZ(30,"div",70)(31,"div",73),t._uU(32),t.qZA(),t.TgZ(33,"div",20)(34,"div"),t._uU(35,"Score"),t.qZA(),t._UZ(36,"div",74),t.TgZ(37,"div"),t._uU(38),t.qZA()(),t.TgZ(39,"div",20)(40,"div"),t._uU(41,"Born"),t.qZA(),t._UZ(42,"div",74),t.TgZ(43,"div"),t._uU(44),t.qZA()(),t.TgZ(45,"div",20)(46,"div"),t._uU(47,"Death"),t.qZA(),t._UZ(48,"div",74),t.TgZ(49,"div"),t._uU(50),t.qZA()()()(),t.TgZ(51,"div",76)(52,"div",77),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.navToPage())}),t._uU(53,"Leaderboard"),t.qZA(),t.TgZ(54,"div",77),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return r.resetGame(),t.KtG(r.initPage())}),t._uU(55,"Play Again"),t.qZA(),t.TgZ(56,"div",77),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.menuAction(5))}),t._uU(57,"Main Menu"),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.count1Display==e.count2Display),t.xp6(1),t.Q6J("ngIf",e.count1Display>e.count2Display),t.xp6(1),t.Q6J("ngIf",e.count1Display<e.count2Display),t.xp6(4),t.Oqu(e.player1Name),t.xp6(6),t.Oqu(e.count1Display),t.xp6(6),t.Oqu(e.born1),t.xp6(6),t.Oqu(e.death1),t.xp6(4),t.Oqu(e.player2Name),t.xp6(6),t.Oqu(e.count2Display),t.xp6(6),t.Oqu(e.born2),t.xp6(6),t.Oqu(e.death2)}}function Ia(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",68)(1,"div",78)(2,"div",79),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showHelp=!1)}),t._uU(3,"Close"),t.qZA(),t._UZ(4,"app-game-rules"),t.TgZ(5,"div",79),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showHelp=!1)}),t._uU(6,"Close"),t.qZA()()()}}let Sa=(()=>{var o;class i{constructor(n,r){this.router=n,this.gameService=r,this.buildMode=0,this.buildMaterial=[[[0,-1],[0,0],[0,1]],[[0,0],[0,1],[1,0],[1,1]],[[-1,0],[0,-1],[0,1],[1,0]],[[-1,0],[-1,1],[0,-1],[0,1],[1,1]],[[-1,1],[0,-1],[0,1],[1,0],[1,1]],[[-1,-2],[-1,1],[0,2],[1,-2],[1,2],[2,-1],[2,0],[2,1],[2,2]],[[-6,-4],[-6,-3],[-6,-2],[-6,2],[-6,3],[-6,4],[-4,-6],[-3,-6],[-2,-6],[-4,-1],[-3,-1],[-2,-1],[-4,1],[-3,1],[-2,1],[-4,6],[-3,6],[-2,6],[-1,-4],[-1,-3],[-1,-2],[-1,2],[-1,3],[-1,4],[1,-4],[1,-3],[1,-2],[1,2],[1,3],[1,4],[2,-6],[3,-6],[4,-6],[2,-1],[3,-1],[4,-1],[2,1],[3,1],[4,1],[2,6],[3,6],[4,6],[6,-4],[6,-3],[6,-2],[6,2],[6,3],[6,4]],[[0,0]]],this.actionTool=["Edit","Undo","Reset"],this.actionToolIcon=["pi-pencil","pi-undo","pi-times"],this.buildMaterialName=["Blinker","Block","Star","Glider Up","Glider Down","Spaceship","Pulsar"],this.buildMaterialIcon=["pi-eye","pi-table","pi-home","pi-send rotate","pi-send rotate-90","pi-share-alt","pi-shield"],this.buildMaterialCountDefault=[8,8,8,4,4,4,2,25],this.buildMaterialCount1=[],this.buildMaterialCount2=[],this.count1Display=0,this.count2Display=0,this.born1=0,this.born2=0,this.death1=0,this.death2=0,this.rows=40,this.cols=90,this.gameStatus="start",this.game1Active=!0,this.game2Active=!0,this.generationCount=0,this.gameDuration=500,this.gameRound=1,this.gameRoundLimit=4,this.generationsPerRound=[100,200,300,500],this.generationLimit=this.generationsPerRound[this.gameRound-1],this.controlButton=0,this.menuButton=["pi-play","pi-replay","pi-volume-up","pi-question-circle","pi-sign-out","1x"],this.gameSpeed={"0.5x":1e3,"1x":500,"2x":250,"5x":100},this.buildHistory=[],this.player1Lock=!1,this.player2Lock=!1,this.lockCounterDefault=60,this.lockCounter=this.lockCounterDefault,this.player1Name="User",this.player2Name="Computer",this.showResult=!1,this.showHelp=!1,this.happySmileyArray=["happy.svg","happy_smile.svg","happy_love.svg"],this.sadSmileyArray=["sad.svg","sad_cry.svg","sad_angry.svg"],this.player1Smiley=this.happySmileyArray[0],this.player2Smiley=this.happySmileyArray[0],this.assetPath="../../../../assets/",this.player1Message="Select the lock to unlock for "+this.lockCounterDefault+" Sec",this.player2Message="Select the lock to unlock for "+this.lockCounterDefault+" Sec",this.player1buildComplete=!1,this.player2buildComplete=!1,this.mute=!1}ngOnInit(){this.initPage(),this.initializeFB()}initPage(){this.player1Name=this.gameService.players.player1.name,this.player2Name=this.gameService.players.player2.name,this.gameDuration=100*this.gameService.gameConfig.duration,this.generationsPerRound=this.gameService.gameRounds[this.gameService.gameConfig.duration],this.generationLimit=this.generationsPerRound[this.gameRound-1],this.buildMaterialCount1=JSON.parse(JSON.stringify(this.buildMaterialCountDefault)),this.buildMaterialCount2=JSON.parse(JSON.stringify(this.buildMaterialCountDefault)),this.gameGrid=this.createEmptyGrid(this.rows,this.cols),setTimeout(()=>{this.initGame()},1e3),setTimeout(()=>{this.playAudio("audio0")},3e3)}initializeFB(){let r=(0,J.ZF)({databaseURL:"https://game-of-life-ce-default-rtdb.europe-west1.firebasedatabase.app"});this.fbDatabase=fe(r)}initGame(){if(1==this.gameService.gameConfig.mode){var n=[];1==this.gameService.gameConfig.difficulty&&(n=po),2==this.gameService.gameConfig.difficulty&&(n=fo),3==this.gameService.gameConfig.difficulty&&(n=_o),this.gameGrid=JSON.parse(JSON.stringify(n)),this.updateGrid(this.gameGrid),this.countLivingCells(this.gameGrid),this.player1Message="Build your empire",this.player2Message="Build your empire"}else this.player1Lock=!0,this.player2Lock=!0}unblockSection(n){1==n&&(this.player1Message="Build your empire !",this.buildGame1(1),this.player1Lock=!1,this.player2Lock=!0),2==n&&(this.player2Message="Build your empire !",this.buildGame1(2),this.player1Lock=!0,this.player2Lock=!1)}buildGame1(n){clearInterval(this.lockIntervalId),this.lockIntervalId=setInterval(()=>{this.lockCounter<=0?(this.lockCounter=this.lockCounterDefault,clearInterval(this.lockIntervalId),1==n?this.player1buildComplete=!0:2==n&&(this.player2buildComplete=!0),this.buildComplete()):this.lockCounter--},1e3)}buildComplete(){clearInterval(this.lockIntervalId),this.player1Lock=!0,this.player2Lock=!0}createEmptyGrid(n,r){let s=new Array(n);for(let l=0;l<n;l++)s[l]=new Array(r).fill(0);return s}counter(n){return new Array(n)}pauseAudio(){this.mute=!0,document.getElementById("audio0").pause()}selectActionTool(n){this.playAudio("audio5"),7==n?(this.buildMode=n,this.editBuild(n)):8==n?this.undoLastBuild():9==n&&this.resetBuild()}editBuild(n){this.selectBuildMode(n)}undoLastBuild(){var n=this.buildHistory[this.buildHistory.length-1];this.toggleCell(n[1],n[2],n[0],!0),this.buildHistory.pop()}resetBuild(){}selectBuildMode(n){this.buildMode!=n&&(this.buildMode=n,this.playAudio("audio5"))}toggleCell(n,r,s=this.buildMode,l=!1){if("play"!=this.gameStatus){if(r<this.cols/2)if(l)this.buildMaterialCount1[s]++;else{if(this.buildMaterialCount1[s]<=0)return;this.buildMaterialCount1[s]--}else if(l)this.buildMaterialCount2[s]++;else{if(this.buildMaterialCount2[s]<=0)return;this.buildMaterialCount2[s]--}var c=1;r>this.cols/2&&(c=-1),this.buildMaterial[s].forEach(d=>{var u=n+d[0],h=r+d[1]*c;this.gameGrid[u][h]=0===this.gameGrid[u][h]?1:0;var f=document.getElementById("game_"+u+"_"+h),_=Math.floor(40*Math.random()+16).toString(16),g=Math.floor(80*Math.random()+16).toString(16),v=Math.floor(100*Math.random()+16).toString(16);f.style.backgroundColor=h<this.cols/2?0===this.gameGrid[u][h]?"#1D2738":"#E7"+g+_:0===this.gameGrid[u][h]?"#1D2738":"#"+v+"B9"+g}),this.countLivingCells(this.gameGrid),0==l&&(this.playAudio("audio1"),this.buildHistory.push([s,n,r]))}}countLivingCells(n){let r=0,s=0;for(let l=0;l<this.rows;l++)for(let a=0;a<this.cols;a++)1===n[l][a]&&(a<this.cols/2?r++:s++);this.count1Display-r>20&&this.count2Display-s>20&&this.playAudio("audio3"),this.generationCount%10==0&&this.smileyUpdates(r,s),this.count1Display=r,this.count2Display=s}smileyUpdates(n,r){if("play"==this.gameStatus){var s=n-r;0==s?(this.player1Smiley=this.happySmileyArray[0],this.player2Smiley=this.happySmileyArray[0],this.tempMessageUpdate("Build your empire!","Build your empire!")):s>0?s>80?(this.player1Smiley=this.happySmileyArray[2],this.player2Smiley=this.sadSmileyArray[2],this.tempMessageUpdate("I love this game!","I want to win!")):s>40?(this.player1Smiley=this.happySmileyArray[1],this.player2Smiley=this.sadSmileyArray[1],this.tempMessageUpdate("Nice!","Don't laugh, I am gonna win this game!")):(this.player1Smiley=this.happySmileyArray[0],this.player2Smiley=this.sadSmileyArray[0],this.tempMessageUpdate("Hehe...","Don't laugh!")):s<0&&(s<-80?(this.player1Smiley=this.sadSmileyArray[2],this.player2Smiley=this.happySmileyArray[2],this.tempMessageUpdate("I want to win!","I love this game!")):s<-40?(this.player1Smiley=this.sadSmileyArray[1],this.player2Smiley=this.happySmileyArray[1],this.tempMessageUpdate("Ohh no I am loosing!","Nice!")):(this.player1Smiley=this.sadSmileyArray[0],this.player2Smiley=this.happySmileyArray[0],this.tempMessageUpdate("Don't laugh, I am gonna win this game!","Hehe...")))}}tempMessageUpdate(n,r){n&&(this.player1Message=n),r&&(this.player2Message=r)}updateGrid(n){for(let d=0;d<this.rows;d++)for(let u=0;u<this.cols;u++){let h=document.getElementById("game_"+d+"_"+u);var r=Math.floor(40*Math.random()+16).toString(16),s=Math.floor(80*Math.random()+16).toString(16),l=Math.floor(100*Math.random()+16).toString(16);h.style.backgroundColor=u<this.cols/2?0===n[d][u]?"#1D2738":"#E7"+s+r:0===n[d][u]?"#1D2738":"#"+l+"B9"+s}}calculateNextGeneration(n){const r=this.createEmptyGrid(this.rows,this.cols);for(let s=0;s<this.rows;s++)for(let l=0;l<this.cols;l++){const a=n[s][l],c=this.countNeighbors(n,s,l);0===a&&3===c?(r[s][l]=1,l<this.cols/2?this.born2++:this.born1++):1===a&&(c<2||c>3)?(r[s][l]=0,l<this.cols/2?this.death2++:this.death1++):r[s][l]=a}return r}countNeighbors(n,r,s){let l=0;const a=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(let c=0;c<a.length;c++){const[d,u]=a[c];l+=n[(r+d+this.rows)%this.rows][(s+u+this.cols)%this.cols]}return l}runNextGeneration(){this.generationCount>=this.generationLimit?this.gameRound==this.gameRoundLimit?(this.pauseGame(),this.gameEnd()):(this.pauseGame(),this.gameRound++,this.generationLimit=this.generationsPerRound[this.gameRound-1]):(this.generationCount++,this.updateProgressBar(this.generationCount),this.gameGrid=this.calculateNextGeneration(this.gameGrid),this.updateGrid(this.gameGrid),this.countLivingCells(this.gameGrid))}gameEnd(){this.showResult=!0,this.updateScore(this.player1Name,this.count1Display,this.count2Display),this.updateScore(this.player2Name,this.count2Display,this.count1Display)}updateProgressBar(n){var s=n/(1*this.gameDuration)*15;document.getElementById("progress-bar-fill").style.width=s+"rem"}playGame(){clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.runNextGeneration()},this.gameSpeed[this.menuButton[5]]),this.gameStatus="play",this.playAudio("audio2"),this.buildHistory=[],this.menuButton[0]="pi-pause"}pauseGame(){this.menuButton[0]="pi-play",this.gameStatus="start",clearInterval(this.intervalId)}resetGame(){this.pauseGame(),this.generationCount=0,this.gameRound=1,this.generationLimit=this.generationsPerRound[this.gameRound-1],this.game1Active=!0,this.game2Active=!0,this.gameGrid=this.createEmptyGrid(this.rows,this.cols),this.updateGrid(this.gameGrid),this.buildHistory=[],this.born1=this.born2=this.death1=this.death2=0,this.showResult=!1,this.count1Display=this.count2Display=0,this.player1buildComplete=this.player2buildComplete=!1,this.menuButton[0]="pi-play",this.smileyUpdates(0,0),this.buildMaterialCount1=JSON.parse(JSON.stringify(this.buildMaterialCountDefault)),this.buildMaterialCount2=JSON.parse(JSON.stringify(this.buildMaterialCountDefault))}playAudio(n){if(0==this.mute){const r=document.getElementById(n);r.volume=.2,r.play()}}menuAction(n){if(1==n)"pi-play"==this.menuButton[0]?(this.menuButton[0]="pi-pause",this.playGame()):(this.menuButton[0]="pi-play",this.pauseGame());else if(2==n)this.resetGame();else if(3==n)"pi-volume-up"==this.menuButton[2]?(this.menuButton[2]="pi-volume-off",this.pauseAudio()):(this.menuButton[2]="pi-volume-up",this.mute=!1,this.playAudio("audio0"));else if(4==n)this.showHelp=!0;else if(5==n)this.router.navigateByUrl("home");else{if(6!=n)return;"0.5x"==this.menuButton[5]?this.menuButton[5]="1x":"1x"==this.menuButton[5]?this.menuButton[5]="2x":"2x"==this.menuButton[5]?this.menuButton[5]="5x":"5x"==this.menuButton[5]&&(this.menuButton[5]="0.5x"),"pi-pause"==this.menuButton[0]&&(this.pauseGame(),this.playGame())}}updateScore(n,r,s){const l=N(fe());var c=0,d=0,u=0;r==s&&(d=1),r>s&&(c=1),r<s&&(u=1),d0(j(l,"users/"+n)).then(h=>{if(h.exists()){var f=h.val(),_=f.gameStat;_[0]+=1,_[1]+=c,_[2]+=d,_[3]+=u,this.writeFB(n,r>f.score?r:f.score,_)}else console.log("No data available"),this.writeFB(n,r,[1,c,d,u])}).catch(h=>{console.error(h)})}writeFB(n,r,s){Q(N(this.fbDatabase,"users/"+n),{name:n,score:r,gameStat:s})}navToPage(){this.router.navigateByUrl("leader-board")}}return(o=i).\u0275fac=function(n){return new(n||o)(t.Y36(_e.F0),t.Y36(V0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-quick-game-board"]],decls:101,vars:37,consts:[["id","main-container",1,"m-auto","main-container","p-4"],[1,"d-flex","justify-content-between","align-items-center","pb-4"],[1,"title","text-uppercase"],[1,"title1"],[1,"title2"],[1,"d-flex","flex-column","align-items-center"],[1,"controls"],[1,"d-flex","justify-content-center"],["pTooltip","play/ Pause","tooltipPosition","bottom",1,"control-button",3,"click"],["pTooltip","Restart","tooltipPosition","bottom",1,"control-button","tooltipP",3,"click"],["pTooltip","Speed","tooltipPosition","bottom",1,"control-button","tooltipP",2,"font-weight","600",3,"click"],[1,"pi"],["pTooltip","Sound","tooltipPosition","bottom",1,"control-button","tooltipP",3,"click"],["pTooltip","Help","tooltipPosition","bottom",1,"control-button","tooltipP",3,"click"],["pTooltip","Quit","tooltipPosition","bottom",1,"control-button","tooltipP",3,"click"],[1,"game-container"],[1,"stat-container","pb-1"],[1,"d-flex","justify-content-between","pb-2"],[1,"d-flex","player-details","align-items-center",2,"width","680px"],[1,"player-message","d-flex","align-items-center","p-2","px-3"],[1,"d-flex"],[1,"playe1-avatar"],["alt","",3,"src"],[1,"px-3","ms-3","player-text-l"],[1,"px-3"],[1,"text-danger","score"],[1,""],[1,"text-center","pb-3",2,"width","270px"],[1,"progress-container","d-flex"],["id","progress-bar-fill",1,"progress-bar-fill"],[1,"m-auto",2,"font-size","0.8rem","z-index","1"],[1,"progress-bar-1x"],[1,"progress-label"],[1,"progress-bar-2x"],[1,"d-flex","player-details","align-items-center","justify-content-end",2,"width","680px"],[1,"px-3","text-end"],[1,"player-message","d-flex","justify-content-end","align-items-center","p-2","px-3"],[1,"px-3","me-3","player-text-r","text-end"],[1,"playe2-avatar"],[1,"m-auto"],[1,"tool-container-l","p-3"],["id","mdoe","tooltipPosition","right",3,"class","pTooltip","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["class","tool-l d-flex justify-content-center align-items-center",4,"ngIf"],["id","game",1,"game","d-flex","p-4"],["class","game-lock d-flex justify-content-center align-items-center",4,"ngIf"],[1,"p-1"],[1,"tool-container-r","p-3"],["class","tool-r d-flex justify-content-center align-items-center","id","mdoe","tooltipPosition","left",3,"pTooltip",4,"ngFor","ngForOf"],["class","result-container d-flex justify-content-center align-items-center",4,"ngIf"],["id","audio1","src","assets/mixkit-extra-bonus-in-a-video-game-2045.wav"],["id","audio2","src","assets/mixkit-drums-of-war-call-2780.wav"],["id","audio3","src","assets/mixkit-arcade-mechanical-bling-210.wav"],["id","audio4","src","assets/mixkit-winning-a-coin-video-game-2069.wav"],["id","audio5","src","assets/mixkit-game-ball-tap-2073.wav"],["id","audio0","src","assets/war theme.ogg"],["id","mdoe","tooltipPosition","right",3,"pTooltip","click"],[4,"ngIf"],[1,"tool-l","d-flex","justify-content-center","align-items-center"],[1,"cell-container"],["class","cell cell-l",3,"id","click",4,"ngFor","ngForOf"],[1,"cell","cell-l",3,"id","click"],[1,"game-lock","d-flex","justify-content-center","align-items-center"],["class","pi pi-lock position-absolute",3,"click",4,"ngIf"],[1,"pi","pi-lock","position-absolute",3,"click"],["class","cell cell-r",3,"id",4,"ngFor","ngForOf"],[1,"cell","cell-r",3,"id"],["id","mdoe","tooltipPosition","left",1,"tool-r","d-flex","justify-content-center","align-items-center",3,"pTooltip"],[1,"result-container","d-flex","justify-content-center","align-items-center"],[1,"result-card","p-5"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"title","d-flex","flex-column","text-center","text-danger"],[1,"d-flex","result-details"],[1,"p-3","text-danger"],[1,"p-3"],[1,"m-5","result-card-seperator"],[1,"d-flex","pb-4"],[1,"result-card-button","p-4",3,"click"],[1,"help-card","p-5"],[1,"p-4","text-light","text-end",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._uU(4,"Cellular"),t.qZA(),t.TgZ(5,"span",4),t._uU(6,"Empire"),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),t.NdJ("click",function(){return r.menuAction(1)}),t._UZ(11,"i"),t.qZA(),t.TgZ(12,"div",9),t.NdJ("click",function(){return r.menuAction(2)}),t._UZ(13,"i"),t.qZA(),t.TgZ(14,"div",10),t.NdJ("click",function(){return r.menuAction(6)}),t.TgZ(15,"i",11),t._uU(16),t.qZA()(),t.TgZ(17,"div",12),t.NdJ("click",function(){return r.menuAction(3)}),t._UZ(18,"i"),t.qZA(),t.TgZ(19,"div",13),t.NdJ("click",function(){return r.menuAction(4)}),t._UZ(20,"i"),t.qZA(),t.TgZ(21,"div",14),t.NdJ("click",function(){return r.menuAction(5)}),t._UZ(22,"i"),t.qZA()()()()(),t.TgZ(23,"div",15)(24,"div",16)(25,"div",17)(26,"div",18)(27,"div",19)(28,"div",20)(29,"div",21),t._UZ(30,"img",22),t.qZA()(),t.TgZ(31,"div",23),t._uU(32),t.qZA()(),t.TgZ(33,"div",24)(34,"div"),t._uU(35),t.qZA(),t.TgZ(36,"div",25),t._uU(37),t.qZA()()(),t.TgZ(38,"div",26)(39,"div",5)(40,"div",27),t._uU(41),t.qZA(),t.TgZ(42,"div")(43,"div",28),t._UZ(44,"div",29)(45,"div",30),t.TgZ(46,"span",31)(47,"span",32),t._uU(48,"1"),t.qZA()(),t.TgZ(49,"span",31)(50,"span",32),t._uU(51,"2"),t.qZA()(),t.TgZ(52,"span",31)(53,"span",32),t._uU(54,"3"),t.qZA()(),t.TgZ(55,"span",33)(56,"span",32),t._uU(57,"4"),t.qZA()()()()()(),t.TgZ(58,"div",34)(59,"div",35)(60,"div"),t._uU(61),t.qZA(),t.TgZ(62,"div",25),t._uU(63),t.qZA()(),t.TgZ(64,"div",36)(65,"div",37),t._uU(66),t.qZA(),t.TgZ(67,"div",20)(68,"div",38),t._UZ(69,"img",22),t.qZA()()()()()(),t.TgZ(70,"div",39)(71,"div",20)(72,"div",40),t.YNc(73,sa,4,11,"div",41),t._UZ(74,"hr"),t.YNc(75,ca,3,2,"ng-container",42),t._UZ(76,"hr"),t.YNc(77,da,2,1,"div",43),t.qZA(),t.TgZ(78,"div",44)(79,"div")(80,"div"),t.YNc(81,ha,3,1,"div",42),t.qZA(),t.YNc(82,fa,2,1,"div",45),t.qZA(),t._UZ(83,"div",46),t.TgZ(84,"div")(85,"div"),t.YNc(86,ma,3,1,"div",42),t.qZA(),t.YNc(87,ya,2,1,"div",45),t.qZA()(),t.TgZ(88,"div",47),t.YNc(89,va,2,4,"div",48),t._UZ(90,"hr"),t.YNc(91,xa,2,1,"ng-container",42),t._UZ(92,"hr"),t.qZA()()()()(),t.YNc(93,wa,58,11,"div",49),t.YNc(94,Ia,7,0,"div",49),t._UZ(95,"audio",50)(96,"audio",51)(97,"audio",52)(98,"audio",53)(99,"audio",54)(100,"audio",55)),2&n&&(t.xp6(11),t.Gre("pi ",r.menuButton[0],""),t.xp6(2),t.Gre("pi ",r.menuButton[1],""),t.xp6(3),t.hij(" ",r.menuButton[5]," "),t.xp6(2),t.Gre("pi ",r.menuButton[2],""),t.xp6(2),t.Gre("pi ",r.menuButton[3],""),t.xp6(2),t.Gre("pi ",r.menuButton[4],""),t.xp6(8),t.Q6J("src",r.assetPath+r.player1Smiley,t.LSH),t.xp6(2),t.hij(" ",r.player1Message," "),t.xp6(3),t.Oqu(r.player1Name),t.xp6(2),t.hij("00",r.count1Display,""),t.xp6(4),t.AsE(" Gen: ",r.generationCount,"/",r.gameDuration," "),t.xp6(20),t.Oqu(r.player2Name),t.xp6(2),t.hij("00",r.count2Display,""),t.xp6(3),t.hij(" ",r.player2Message," "),t.xp6(3),t.Q6J("src",r.assetPath+r.player2Smiley,t.LSH),t.xp6(4),t.Q6J("ngForOf",r.buildMaterialName),t.xp6(2),t.Q6J("ngForOf",r.actionTool),t.xp6(2),t.Q6J("ngIf",r.player2Lock&&1!=r.controlButton),t.xp6(4),t.Q6J("ngForOf",r.counter(r.rows)),t.xp6(1),t.Q6J("ngIf",r.player1Lock&&"pi-play"==r.menuButton[0]),t.xp6(4),t.Q6J("ngForOf",r.counter(r.rows)),t.xp6(1),t.Q6J("ngIf",r.player2Lock&&"pi-play"==r.menuButton[0]),t.xp6(2),t.Q6J("ngForOf",r.buildMaterialName),t.xp6(2),t.Q6J("ngForOf",r.actionTool),t.xp6(2),t.Q6J("ngIf",r.showResult),t.xp6(1),t.Q6J("ngIf",r.showHelp))},dependencies:[L.sg,L.O5,li,j0],styles:[".cell-container[_ngcontent-%COMP%]{display:flex}.cell[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:5px;border:1px solid #121b29;animation-duration:1s;cursor:pointer;background-color:#1d2738}.cell-l[_ngcontent-%COMP%]:hover{background-color:#e73e3988}.cell-r[_ngcontent-%COMP%]:hover{background-color:#4cb93188}.main-container[_ngcontent-%COMP%]{width:1708px}.title[_ngcontent-%COMP%]{font-size:1.5rem}.title1[_ngcontent-%COMP%]{color:#e1113b}.title2[_ngcontent-%COMP%]{color:#fff}.menu-button[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{background:#E1113B!important}.game-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.game-lock[_ngcontent-%COMP%]{height:100%;width:100%;background:rgba(0,0,0,.3333333333);position:relative;z-index:1;top:-100%;border-radius:5px;color:#fff}.game-lock[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]{font-size:3rem}.pi-lock[_ngcontent-%COMP%]:hover{scale:1.1}.control-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:0 0 0 1.5rem;width:55px;height:55px;border-radius:50%;color:#f0f8ff;box-shadow:-3px -3px 4px #171e2c,3px 3px 5px 2px #000000d6,inset 0 0 #000,inset 0 0 #171e2c;transition:box-shadow .3s ease-in}.control-button[_ngcontent-%COMP%]:hover{box-shadow:0 0 #171e2c,0 0 #000000d6,inset 5px 5px 2px #000,inset -1px -1px 4px 1px #171e2c}.stat-container[_ngcontent-%COMP%]{color:#f5f5f5}.score[_ngcontent-%COMP%]{font-size:1.5rem}.playe1-avatar[_ngcontent-%COMP%]{height:40px;width:40px;background:#e73e39;border-radius:5px;margin:5px}.playe2-avatar[_ngcontent-%COMP%]{height:40px;width:40px;background:#4CB931;border-radius:5px;margin:5px}.player-message[_ngcontent-%COMP%]{width:500px;box-shadow:inset 3px 3px 4px #2223,inset -4px -3px 4px -5px #6666;border-radius:10px;background-color:#121b29;font-size:.8rem;color:#6c83a5}.player-text-l[_ngcontent-%COMP%]{border-left:1px solid}.player-text-r[_ngcontent-%COMP%]{border-right:1px solid}.player-card-l[_ngcontent-%COMP%]{border-right:1px solid white}.player-card-r[_ngcontent-%COMP%]{border-left:1px solid white}.progress-container[_ngcontent-%COMP%]{width:15rem;height:1.2rem;background-color:#1d2738;border-radius:.3rem;font-size:.8rem}.progress-bar-fill[_ngcontent-%COMP%]{height:1.2rem;width:.5rem;background-color:#e1113b;border-radius:.3rem;position:absolute;z-index:0}.progress-bar-1x[_ngcontent-%COMP%]{width:4rem;z-index:1;text-align:end}.progress-bar-2x[_ngcontent-%COMP%]{width:8rem;z-index:1;text-align:end}.progress-label[_ngcontent-%COMP%]{height:1rem;width:1rem;padding:3px;border:1px solid white;border-radius:.3rem}.game[_ngcontent-%COMP%]{background-color:#121b29}.tool-container-l[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#1d2738;border-radius:10px 0 0 10px}.tool-container-r[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#1d2738;border-radius:0 10px 10px 0}.tool-l[_ngcontent-%COMP%], .tool-r[_ngcontent-%COMP%]{height:50px;width:50px;color:#f0f8ff;border-radius:10px;margin-top:5px}.tool-l-disable-true[_ngcontent-%COMP%], .tool-r-disable-true[_ngcontent-%COMP%]{color:#384a65!important}.tool-l-true[_ngcontent-%COMP%]{color:#e73e39;box-shadow:inset 3px 3px 6px #0000004f,inset -4px -3px 4px -5px #6666}.tool-r-true[_ngcontent-%COMP%]{color:#4cb931;box-shadow:inset 3px 3px 6px #0000004f,inset -4px -3px 4px -5px #6666}.tool-l[_ngcontent-%COMP%]:hover{color:#e73e39}.tool-l[_ngcontent-%COMP%]:hover   .tool-count[_ngcontent-%COMP%]{background-color:#f23636}.tool-r[_ngcontent-%COMP%]:hover{color:#4cb931}.tool-count-l[_ngcontent-%COMP%]{color:#eaebedb5;width:18px;height:18px;margin-left:45px;margin-top:28px;background-color:#334461;border-radius:5px;font-size:.8rem;align-items:center;justify-content:center;display:flex;font-weight:600}.tool-count-r[_ngcontent-%COMP%]{color:#eaebedb5;width:18px;height:18px;margin-right:45px;margin-top:28px;background-color:#334461;border-radius:5px;font-size:.8rem;align-items:center;justify-content:center;display:flex;font-weight:600}.tool-count-l-true[_ngcontent-%COMP%]{background-color:#f23636}.tool-count-r-true[_ngcontent-%COMP%]{background-color:#4cb931}.hover-pointer[_ngcontent-%COMP%]{position:absolute;width:45px;height:45px;border-radius:5px;border:1px solid rgba(130,130,130,.4509803922);cursor:pointer;z-index:0}.result-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;z-index:10;top:0;background-color:#000a}.result-card[_ngcontent-%COMP%]{width:60%;height:60%;background-color:#121b29;border-radius:10px;color:#fff}.help-card[_ngcontent-%COMP%]{width:80%;height:80%;background-color:#121b29;border-radius:10px;overflow-y:scroll}.title[_ngcontent-%COMP%]{font-size:3rem}.result-details[_ngcontent-%COMP%]{color:#384a65}.result-card-button[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s}.result-card-button[_ngcontent-%COMP%]:hover{scale:1.1}.result-card-seperator[_ngcontent-%COMP%]{border:2px solid #384A65;height:8rem}.rotate-45[_ngcontent-%COMP%]{transform:rotate(45deg)}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-135[_ngcontent-%COMP%]{transform:rotate(135deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-225[_ngcontent-%COMP%]{transform:rotate(225deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-315[_ngcontent-%COMP%]{transform:rotate(315deg)}"]}),i})();function Ea(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",57),t.NdJ("click",function(){const s=t.CHM(e).index,l=t.oxw();return t.KtG(l.selectBuildMode(s))}),t._UZ(1,"i"),t.TgZ(2,"div"),t._uU(3),t.qZA()()}if(2&o){const e=i.$implicit,n=i.index,r=t.oxw();t.Gre("tool-l tool-l-",r.buildMode==n," d-flex justify-content-center align-items-center"),t.s9C("pTooltip",e),t.xp6(1),t.Gre("tool-text-l pi ",r.buildMaterialIcon[n],""),t.xp6(1),t.Gre("pi position-absolute tool-count-l tool-count-l-",r.buildMode==n,""),t.xp6(1),t.hij(" ",r.buildMaterialCount1[n]," ")}}function Aa(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",57),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index,s=t.oxw();return t.KtG(s.selectActionTool(r+7))}),t._UZ(2,"i"),t.TgZ(3,"div"),t._uU(4),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw(),n=e.index,r=e.$implicit,s=t.oxw();t.xp6(1),t.Gre("tool-l tool-l-",s.buildMode==n+7,"\n                                d-flex justify-content-center align-items-center"),t.s9C("pTooltip",r),t.xp6(1),t.Gre("tool-text-l pi ",s.actionToolIcon[n],""),t.xp6(1),t.Gre("pi position-absolute tool-count-l tool-count-l-",s.buildMode==n+7,""),t.xp6(1),t.hij(" ",s.buildMaterialCount1[n+7]," ")}}function Oa(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",57),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index,s=t.oxw();return t.KtG(s.selectActionTool(r+7))}),t._UZ(2,"i"),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(),n=e.$implicit,r=e.index,s=t.oxw();t.xp6(1),t.Gre("tool-l tool-l-disable-",0==s.buildHistory.length,"\n                                d-flex justify-content-center align-items-center"),t.s9C("pTooltip",n),t.xp6(1),t.Gre("tool-text-l pi ",s.actionToolIcon[r],"")}}function Ma(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Aa,5,11,"ng-container",58),t.YNc(2,Oa,3,7,"ng-container",58),t.BQk()),2&o){const e=i.index;t.xp6(1),t.Q6J("ngIf",0==e),t.xp6(1),t.Q6J("ngIf",e>0)}}function Na(o,i){if(1&o&&(t.TgZ(0,"div",59),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.lockCounter," ")}}function ka(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",62),t.NdJ("click",function(){const s=t.CHM(e).index,l=t.oxw().index,a=t.oxw();return t.KtG(a.toggleCell(l,s))}),t.qZA()}if(2&o){const e=i.index,n=t.oxw().index;t.hYB("id","game_",n,"_",e,"")}}function Ra(o,i){if(1&o&&(t.TgZ(0,"div")(1,"div",60),t.YNc(2,ka,1,2,"div",61),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.counter(e.cols/2))}}function Za(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"i",65),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.unblockSection(1))}),t.qZA()}}function La(o,i){if(1&o&&(t.TgZ(0,"div",63),t.YNc(1,Za,1,0,"i",64),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.player1buildComplete)}}function Da(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",67),t.NdJ("click",function(){const s=t.CHM(e).index,l=t.oxw().index,a=t.oxw();return t.KtG(a.toggleCell(l,s+a.cols/2))}),t.qZA()}if(2&o){const e=i.index,n=t.oxw().index,r=t.oxw();t.hYB("id","game_",n,"_",e+r.cols/2,"")}}function Ua(o,i){if(1&o&&(t.TgZ(0,"div")(1,"div",60),t.YNc(2,Da,1,2,"div",66),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.counter(e.cols/2))}}function Ga(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"i",65),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.unblockSection(2))}),t.qZA()}}function Ba(o,i){if(1&o&&(t.TgZ(0,"div",63),t.YNc(1,Ga,1,0,"i",64),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.player2buildComplete)}}function Fa(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",68),t.NdJ("click",function(){const s=t.CHM(e).index,l=t.oxw();return t.KtG(l.selectBuildMode(s))}),t._UZ(1,"i"),t.TgZ(2,"div"),t._uU(3),t.qZA()()}if(2&o){const e=i.$implicit,n=i.index,r=t.oxw();t.Gre("tool-r tool-r-",r.buildMode==n," d-flex justify-content-center align-items-center"),t.s9C("pTooltip",e),t.xp6(1),t.Gre("tool-text-r pi ",r.buildMaterialIcon[n],""),t.xp6(1),t.Gre("pi position-absolute tool-count-r tool-count-r-",r.buildMode==n,""),t.xp6(1),t.hij(" ",r.buildMaterialCount2[n]," ")}}function qa(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",68),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index,s=t.oxw();return t.KtG(s.selectActionTool(r+7))}),t._UZ(2,"i"),t.TgZ(3,"div"),t._uU(4),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw(),n=e.index,r=e.$implicit,s=t.oxw();t.xp6(1),t.Gre("tool-r tool-r-",s.buildMode==n+7,"\n                                d-flex justify-content-center align-items-center"),t.s9C("pTooltip",r),t.xp6(1),t.Gre("tool-text-r pi ",s.actionToolIcon[n],""),t.xp6(1),t.Gre("pi position-absolute tool-count-r tool-count-r-",s.buildMode==n+7,""),t.xp6(1),t.hij(" ",s.buildMaterialCount2[n+7]," ")}}function Ha(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",68),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index,s=t.oxw();return t.KtG(s.selectActionTool(r+7))}),t._UZ(2,"i"),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(),n=e.$implicit,r=e.index,s=t.oxw();t.xp6(1),t.Gre("tool-r tool-r-disable-",0==s.buildHistory.length,"\n                                d-flex justify-content-center align-items-center"),t.s9C("pTooltip",n),t.xp6(1),t.Gre("tool-text-r pi ",s.actionToolIcon[r],"")}}function Wa(o,i){if(1&o&&(t.ynx(0),t.YNc(1,qa,5,11,"ng-container",58),t.YNc(2,Ha,3,7,"ng-container",58),t.BQk()),2&o){const e=i.index;t.xp6(1),t.Q6J("ngIf",0==e),t.xp6(1),t.Q6J("ngIf",e>0)}}function Qa(o,i){if(1&o&&(t.TgZ(0,"div",69),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.lockCounter," ")}}function Ja(o,i){1&o&&(t.TgZ(0,"div"),t._uU(1," Draw "),t.qZA())}function Ka(o,i){if(1&o&&(t.TgZ(0,"div")(1,"div"),t._uU(2," Winner "),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(4),t.Oqu(e.player1Name)}}function Ya(o,i){if(1&o&&(t.TgZ(0,"div")(1,"div"),t._uU(2,"Winner"),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(4),t.Oqu(e.player2Name)}}function Va(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",70)(1,"div",71)(2,"div",72)(3,"div",73),t.YNc(4,Ja,2,0,"div",58),t.YNc(5,Ka,5,1,"div",58),t.YNc(6,Ya,5,1,"div",58),t.qZA(),t.TgZ(7,"div",74)(8,"div",72)(9,"div",75),t._uU(10),t.qZA(),t.TgZ(11,"div",20)(12,"div"),t._uU(13,"Score"),t.qZA(),t._UZ(14,"div",76),t.TgZ(15,"div"),t._uU(16),t.qZA()(),t.TgZ(17,"div",20)(18,"div"),t._uU(19,"Born"),t.qZA(),t._UZ(20,"div",76),t.TgZ(21,"div"),t._uU(22),t.qZA()(),t.TgZ(23,"div",20)(24,"div"),t._uU(25,"Death"),t.qZA(),t._UZ(26,"div",76),t.TgZ(27,"div"),t._uU(28),t.qZA()()(),t._UZ(29,"div",77),t.TgZ(30,"div",72)(31,"div",75),t._uU(32),t.qZA(),t.TgZ(33,"div",20)(34,"div"),t._uU(35,"Score"),t.qZA(),t._UZ(36,"div",76),t.TgZ(37,"div"),t._uU(38),t.qZA()(),t.TgZ(39,"div",20)(40,"div"),t._uU(41,"Born"),t.qZA(),t._UZ(42,"div",76),t.TgZ(43,"div"),t._uU(44),t.qZA()(),t.TgZ(45,"div",20)(46,"div"),t._uU(47,"Death"),t.qZA(),t._UZ(48,"div",76),t.TgZ(49,"div"),t._uU(50),t.qZA()()()(),t.TgZ(51,"div",78)(52,"div",79),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.navToPage())}),t._uU(53,"Leaderboard"),t.qZA(),t.TgZ(54,"div",79),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return r.resetGame(),t.KtG(r.initPage())}),t._uU(55,"Play Again"),t.qZA(),t.TgZ(56,"div",79),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.menuAction(5))}),t._uU(57,"Main Menu"),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.count1Display==e.count2Display),t.xp6(1),t.Q6J("ngIf",e.count1Display>e.count2Display),t.xp6(1),t.Q6J("ngIf",e.count1Display<e.count2Display),t.xp6(4),t.Oqu(e.player1Name),t.xp6(6),t.Oqu(e.count1Display),t.xp6(6),t.Oqu(e.born1),t.xp6(6),t.Oqu(e.death1),t.xp6(4),t.Oqu(e.player2Name),t.xp6(6),t.Oqu(e.count2Display),t.xp6(6),t.Oqu(e.born2),t.xp6(6),t.Oqu(e.death2)}}function ja(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",70)(1,"div",80)(2,"div",81),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showHelp=!1)}),t._uU(3,"Close"),t.qZA(),t._UZ(4,"app-game-rules"),t.TgZ(5,"div",81),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showHelp=!1)}),t._uU(6,"Close"),t.qZA()()()}}let za=(()=>{var o;class i{constructor(n,r){this.router=n,this.gameService=r,this.buildMode=0,this.buildMaterial=[[[0,-1],[0,0],[0,1]],[[0,0],[0,1],[1,0],[1,1]],[[-1,0],[0,-1],[0,1],[1,0]],[[-1,0],[-1,1],[0,-1],[0,1],[1,1]],[[-1,1],[0,-1],[0,1],[1,0],[1,1]],[[-1,-2],[-1,1],[0,2],[1,-2],[1,2],[2,-1],[2,0],[2,1],[2,2]],[[-6,-4],[-6,-3],[-6,-2],[-6,2],[-6,3],[-6,4],[-4,-6],[-3,-6],[-2,-6],[-4,-1],[-3,-1],[-2,-1],[-4,1],[-3,1],[-2,1],[-4,6],[-3,6],[-2,6],[-1,-4],[-1,-3],[-1,-2],[-1,2],[-1,3],[-1,4],[1,-4],[1,-3],[1,-2],[1,2],[1,3],[1,4],[2,-6],[3,-6],[4,-6],[2,-1],[3,-1],[4,-1],[2,1],[3,1],[4,1],[2,6],[3,6],[4,6],[6,-4],[6,-3],[6,-2],[6,2],[6,3],[6,4]],[[0,0]]],this.actionTool=["Edit","Undo","Reset"],this.actionToolIcon=["pi-pencil","pi-undo","pi-times"],this.buildMaterialName=["Blinker","Block","Star","Glider Up","Glider Down","Spaceship","Pulsar"],this.buildMaterialIcon=["pi-eye","pi-table","pi-home","pi-send rotate","pi-send rotate-90","pi-share-alt","pi-shield"],this.buildMaterialCountDefault=[8,8,8,4,4,4,2,25],this.buildMaterialCount1=[],this.buildMaterialCount2=[],this.count1Display=0,this.count2Display=0,this.born1=0,this.born2=0,this.death1=0,this.death2=0,this.rows=40,this.cols=90,this.gameStatus="start",this.game1Active=!0,this.game2Active=!0,this.generationCount=0,this.gameDuration=500,this.gameRound=1,this.gameRoundLimit=4,this.generationsPerRound=[100,200,300,500],this.generationLimit=this.generationsPerRound[this.gameRound-1],this.controlButton=0,this.menuButton=["pi-play","pi-replay","pi-volume-up","pi-question-circle","pi-sign-out","1x"],this.gameSpeed={"0.5x":1e3,"1x":500,"2x":250,"5x":100},this.buildHistory=[],this.player1Lock=!1,this.player2Lock=!1,this.lockCounterDefault=60,this.lockCounter=this.lockCounterDefault,this.player1Name="User",this.player2Name="Computer",this.showResult=!1,this.showHelp=!1,this.happySmileyArray=["happy.svg","happy_smile.svg","happy_love.svg"],this.sadSmileyArray=["sad.svg","sad_cry.svg","sad_angry.svg"],this.player1Smiley=this.happySmileyArray[0],this.player2Smiley=this.happySmileyArray[0],this.assetPath="../../../../assets/",this.player1Message="Select the lock to unlock for "+this.lockCounterDefault+" Sec",this.player2Message="Select the lock to unlock for "+this.lockCounterDefault+" Sec",this.player1buildComplete=!1,this.player2buildComplete=!1,this.mute=!1}ngOnInit(){this.initPage(),this.initializeFB()}initPage(){this.player1Name=this.gameService.players.player1.name,this.player2Name=this.gameService.players.player2.name,this.gameDuration=100*this.gameService.gameConfig.duration,this.generationsPerRound=this.gameService.gameRounds[this.gameService.gameConfig.duration],this.generationLimit=this.generationsPerRound[this.gameRound-1],this.buildMaterialCount1=JSON.parse(JSON.stringify(this.buildMaterialCountDefault)),this.buildMaterialCount2=JSON.parse(JSON.stringify(this.buildMaterialCountDefault)),this.gameGrid=this.createEmptyGrid(this.rows,this.cols),setTimeout(()=>{this.initGame()},1e3),setTimeout(()=>{this.playAudio("audio0")},3e3)}initializeFB(){let r=(0,J.ZF)({databaseURL:"https://game-of-life-ce-default-rtdb.europe-west1.firebasedatabase.app"});this.fbDatabase=fe(r)}initGame(){if(1==this.gameService.gameConfig.mode){var n=[];1==this.gameService.gameConfig.difficulty&&(n=po),2==this.gameService.gameConfig.difficulty&&(n=fo),3==this.gameService.gameConfig.difficulty&&(n=_o),this.gameGrid=JSON.parse(JSON.stringify(n)),this.updateGrid(this.gameGrid),this.countLivingCells(this.gameGrid),this.player1Message="Build your empire",this.player2Message="Build your empire"}else this.player1Lock=!0,this.player2Lock=!0}unblockSection(n){1==n&&0==this.player2Lock||2==n&&0==this.player1Lock||(1==n&&(this.player1Message="Build your empire !",this.buildGame1(1),this.player1Lock=!1,this.player2Lock=!0),2==n&&(this.player2Message="Build your empire !",this.buildGame1(2),this.player1Lock=!0,this.player2Lock=!1))}buildGame1(n){clearInterval(this.lockIntervalId),this.lockIntervalId=setInterval(()=>{this.lockCounter<=0?(this.lockCounter=this.lockCounterDefault,clearInterval(this.lockIntervalId),1==n?this.player1buildComplete=!0:2==n&&(this.player2buildComplete=!0),this.buildComplete()):this.lockCounter--},1e3)}buildComplete(){clearInterval(this.lockIntervalId),this.player1Lock=!0,this.player2Lock=!0}createEmptyGrid(n,r){let s=new Array(n);for(let l=0;l<n;l++)s[l]=new Array(r).fill(0);return s}counter(n){return new Array(n)}pauseAudio(){this.mute=!0,document.getElementById("audio0").pause()}selectActionTool(n){this.playAudio("audio5"),7==n?(this.buildMode=n,this.editBuild(n)):8==n?this.undoLastBuild():9==n&&this.resetBuild()}editBuild(n){this.selectBuildMode(n)}undoLastBuild(){var n=this.buildHistory[this.buildHistory.length-1];this.toggleCell(n[1],n[2],n[0],!0),this.buildHistory.pop()}resetBuild(){}selectBuildMode(n){this.buildMode!=n&&(this.buildMode=n,this.playAudio("audio5"))}toggleCell(n,r,s=this.buildMode,l=!1){if("play"!=this.gameStatus){if(r<this.cols/2)if(l)this.buildMaterialCount1[s]++;else{if(this.buildMaterialCount1[s]<=0)return;this.buildMaterialCount1[s]--}else if(l)this.buildMaterialCount2[s]++;else{if(this.buildMaterialCount2[s]<=0)return;this.buildMaterialCount2[s]--}var c=1;r>this.cols/2&&(c=-1),this.buildMaterial[s].forEach(d=>{var u=n+d[0],h=r+d[1]*c;this.gameGrid[u][h]=0===this.gameGrid[u][h]?1:0;var f=document.getElementById("game_"+u+"_"+h),_=Math.floor(40*Math.random()+16).toString(16),g=Math.floor(80*Math.random()+16).toString(16),v=Math.floor(100*Math.random()+16).toString(16);f.style.backgroundColor=h<this.cols/2?0===this.gameGrid[u][h]?"#1D2738":"#E7"+g+_:0===this.gameGrid[u][h]?"#1D2738":"#"+v+"B9"+g}),this.countLivingCells(this.gameGrid),0==l&&(this.playAudio("audio1"),this.buildHistory.push([s,n,r]))}}countLivingCells(n){let r=0,s=0;for(let l=0;l<this.rows;l++)for(let a=0;a<this.cols;a++)1===n[l][a]&&(a<this.cols/2?r++:s++);this.count1Display-r>20&&this.count2Display-s>20&&this.playAudio("audio3"),this.generationCount%10==0&&this.smileyUpdates(r,s),this.count1Display=r,this.count2Display=s}smileyUpdates(n,r){if("play"==this.gameStatus){var s=n-r;0==s?(this.player1Smiley=this.happySmileyArray[0],this.player2Smiley=this.happySmileyArray[0],this.tempMessageUpdate("Build your empire!","Build your empire!")):s>0?s>80?(this.player1Smiley=this.happySmileyArray[2],this.player2Smiley=this.sadSmileyArray[2],this.tempMessageUpdate("I love this game!","I want to win!")):s>40?(this.player1Smiley=this.happySmileyArray[1],this.player2Smiley=this.sadSmileyArray[1],this.tempMessageUpdate("Nice!","Don't laugh, I am gonna win this game!")):(this.player1Smiley=this.happySmileyArray[0],this.player2Smiley=this.sadSmileyArray[0],this.tempMessageUpdate("Hehe...","Don't laugh!")):s<0&&(s<-80?(this.player1Smiley=this.sadSmileyArray[2],this.player2Smiley=this.happySmileyArray[2],this.tempMessageUpdate("I want to win!","I love this game!")):s<-40?(this.player1Smiley=this.sadSmileyArray[1],this.player2Smiley=this.happySmileyArray[1],this.tempMessageUpdate("Ohh no I am loosing!","Nice!")):(this.player1Smiley=this.sadSmileyArray[0],this.player2Smiley=this.happySmileyArray[0],this.tempMessageUpdate("Don't laugh, I am gonna win this game!","Hehe...")))}}tempMessageUpdate(n,r){n&&(this.player1Message=n),r&&(this.player2Message=r)}updateGrid(n){for(let d=0;d<this.rows;d++)for(let u=0;u<this.cols;u++){let h=document.getElementById("game_"+d+"_"+u);var r=Math.floor(40*Math.random()+16).toString(16),s=Math.floor(80*Math.random()+16).toString(16),l=Math.floor(100*Math.random()+16).toString(16);h.style.backgroundColor=u<this.cols/2?0===n[d][u]?"#1D2738":"#E7"+s+r:0===n[d][u]?"#1D2738":"#"+l+"B9"+s}}calculateNextGeneration(n){const r=this.createEmptyGrid(this.rows,this.cols);for(let s=0;s<this.rows;s++)for(let l=0;l<this.cols;l++){const a=n[s][l],c=this.countNeighbors(n,s,l);0===a&&3===c?(r[s][l]=1,l<this.cols/2?this.born2++:this.born1++):1===a&&(c<2||c>3)?(r[s][l]=0,l<this.cols/2?this.death2++:this.death1++):r[s][l]=a}return r}countNeighbors(n,r,s){let l=0;const a=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(let c=0;c<a.length;c++){const[d,u]=a[c];l+=n[(r+d+this.rows)%this.rows][(s+u+this.cols)%this.cols]}return l}runNextGeneration(){this.generationCount>=this.generationLimit?this.gameRound==this.gameRoundLimit?(this.pauseGame(),this.gameEnd()):(this.pauseGame(),this.player1buildComplete=!1,this.player2buildComplete=!1,this.gameRound++,this.generationLimit=this.generationsPerRound[this.gameRound-1]):(this.generationCount++,this.updateProgressBar(this.generationCount),this.gameGrid=this.calculateNextGeneration(this.gameGrid),this.updateGrid(this.gameGrid),this.countLivingCells(this.gameGrid))}gameEnd(){this.showResult=!0,this.updateScore(this.player1Name,this.count1Display,this.count2Display),this.updateScore(this.player2Name,this.count2Display,this.count1Display)}updateProgressBar(n){var s=n/(1*this.gameDuration)*15;document.getElementById("progress-bar-fill").style.width=s+"rem"}playGame(){clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.runNextGeneration()},this.gameSpeed[this.menuButton[5]]),this.gameStatus="play",this.playAudio("audio2"),this.buildHistory=[],this.menuButton[0]="pi-pause",clearInterval(this.lockIntervalId)}pauseGame(){this.menuButton[0]="pi-play",this.gameStatus="start",clearInterval(this.intervalId)}resetGame(){this.pauseGame(),this.generationCount=0,this.gameRound=1,this.generationLimit=this.generationsPerRound[this.gameRound-1],this.game1Active=!0,this.game2Active=!0,this.gameGrid=this.createEmptyGrid(this.rows,this.cols),this.updateGrid(this.gameGrid),this.buildHistory=[],this.gameStatus="start",this.born1=this.born2=this.death1=this.death2=0,this.showResult=!1,this.count1Display=this.count2Display=0,this.player1buildComplete=this.player2buildComplete=!1,this.menuButton[0]="pi-play",this.smileyUpdates(0,0),this.buildMaterialCount1=JSON.parse(JSON.stringify(this.buildMaterialCountDefault)),this.buildMaterialCount2=JSON.parse(JSON.stringify(this.buildMaterialCountDefault)),clearInterval(this.lockIntervalId)}playAudio(n){if(0==this.mute){const r=document.getElementById(n);r.volume=.2,r.play()}}menuAction(n){if(1==n)"pi-play"==this.menuButton[0]?(this.menuButton[0]="pi-pause",this.playGame()):(this.menuButton[0]="pi-play",this.pauseGame());else if(2==n)this.resetGame();else if(3==n)"pi-volume-up"==this.menuButton[2]?(this.menuButton[2]="pi-volume-off",this.pauseAudio()):(this.menuButton[2]="pi-volume-up",this.mute=!1,this.playAudio("audio0"));else if(4==n)this.showHelp=!0;else if(5==n)this.router.navigateByUrl("home");else{if(6!=n)return;"0.5x"==this.menuButton[5]?this.menuButton[5]="1x":"1x"==this.menuButton[5]?this.menuButton[5]="2x":"2x"==this.menuButton[5]?this.menuButton[5]="5x":"5x"==this.menuButton[5]&&(this.menuButton[5]="0.5x"),"pi-pause"==this.menuButton[0]&&(this.pauseGame(),this.playGame())}}updateScore(n,r,s){const l=N(fe());var c=0,d=0,u=0;r==s&&(d=1),r>s&&(c=1),r<s&&(u=1),d0(j(l,"users/"+n)).then(h=>{if(h.exists()){var f=h.val(),_=f.gameStat;_[0]+=1,_[1]+=c,_[2]+=d,_[3]+=u,this.writeFB(n,r>f.score?r:f.score,_)}else console.log("No data available"),this.writeFB(n,r,[1,c,d,u])}).catch(h=>{console.error(h)})}writeFB(n,r,s){Q(N(this.fbDatabase,"users/"+n),{name:n,score:r,gameStat:s})}navToPage(){this.router.navigateByUrl("leader-board")}}return(o=i).\u0275fac=function(n){return new(n||o)(t.Y36(_e.F0),t.Y36(V0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-offline-game-board"]],decls:102,vars:38,consts:[["id","main-container",1,"m-auto","main-container","p-4"],[1,"d-flex","justify-content-between","align-items-center","pb-4"],[1,"title","text-uppercase"],[1,"title1"],[1,"title2"],[1,"d-flex","flex-column","align-items-center"],[1,"controls"],[1,"d-flex","justify-content-center"],["pTooltip","play/ Pause","tooltipPosition","bottom",1,"control-button",3,"click"],["pTooltip","Restart","tooltipPosition","bottom",1,"control-button","tooltipP",3,"click"],["pTooltip","Speed","tooltipPosition","bottom",1,"control-button","tooltipP",2,"font-weight","600",3,"click"],[1,"pi"],["pTooltip","Sound","tooltipPosition","bottom",1,"control-button","tooltipP",3,"click"],["pTooltip","Help","tooltipPosition","bottom",1,"control-button","tooltipP",3,"click"],["pTooltip","Quit","tooltipPosition","bottom",1,"control-button","tooltipP",3,"click"],[1,"game-container"],[1,"stat-container","pb-1"],[1,"d-flex","justify-content-between","pb-2"],[1,"d-flex","player-details","align-items-center",2,"width","680px"],[1,"player-message","d-flex","align-items-center","p-2","px-3"],[1,"d-flex"],[1,"playe1-avatar"],["alt","",3,"src"],[1,"px-3","ms-3","player-text-l"],[1,"px-3"],[1,"text-danger","score"],[1,""],[1,"text-center","pb-3",2,"width","270px"],[1,"progress-container","d-flex"],["id","progress-bar-fill",1,"progress-bar-fill"],[1,"m-auto",2,"font-size","0.8rem","z-index","1"],[1,"progress-bar-1x"],[1,"progress-label"],[1,"progress-bar-2x"],[1,"d-flex","player-details","align-items-center","justify-content-end",2,"width","680px"],[1,"px-3","text-end"],[1,"player-message","d-flex","justify-content-end","align-items-center","p-2","px-3"],[1,"px-3","me-3","player-text-r","text-end"],[1,"playe2-avatar"],[1,"m-auto"],[1,"tool-container-l","p-3"],["id","mdoe","tooltipPosition","right",3,"class","pTooltip","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["class","tool-l d-flex justify-content-center align-items-center",4,"ngIf"],["id","game",1,"game","d-flex","p-4"],["class","game-lock d-flex justify-content-center align-items-center",4,"ngIf"],[1,"p-1"],[1,"tool-container-r","p-3"],["id","mdoe","tooltipPosition","left",3,"class","pTooltip","click",4,"ngFor","ngForOf"],["class","tool-r d-flex justify-content-center align-items-center",4,"ngIf"],["class","result-container d-flex justify-content-center align-items-center",4,"ngIf"],["id","audio1","src","assets/mixkit-extra-bonus-in-a-video-game-2045.wav"],["id","audio2","src","assets/mixkit-drums-of-war-call-2780.wav"],["id","audio3","src","assets/mixkit-arcade-mechanical-bling-210.wav"],["id","audio4","src","assets/mixkit-winning-a-coin-video-game-2069.wav"],["id","audio5","src","assets/mixkit-game-ball-tap-2073.wav"],["id","audio0","src","assets/war theme.ogg"],["id","mdoe","tooltipPosition","right",3,"pTooltip","click"],[4,"ngIf"],[1,"tool-l","d-flex","justify-content-center","align-items-center"],[1,"cell-container"],["class","cell cell-l",3,"id","click",4,"ngFor","ngForOf"],[1,"cell","cell-l",3,"id","click"],[1,"game-lock","d-flex","justify-content-center","align-items-center"],["class","pi pi-lock position-absolute",3,"click",4,"ngIf"],[1,"pi","pi-lock","position-absolute",3,"click"],["class","cell cell-r",3,"id","click",4,"ngFor","ngForOf"],[1,"cell","cell-r",3,"id","click"],["id","mdoe","tooltipPosition","left",3,"pTooltip","click"],[1,"tool-r","d-flex","justify-content-center","align-items-center"],[1,"result-container","d-flex","justify-content-center","align-items-center"],[1,"result-card","p-5"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"title","d-flex","flex-column","text-center","text-danger"],[1,"d-flex","result-details"],[1,"p-3","text-danger"],[1,"p-3"],[1,"m-5","result-card-seperator"],[1,"d-flex","pb-4"],[1,"result-card-button","p-4",3,"click"],[1,"help-card","p-5"],[1,"p-4","text-light","text-end",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._uU(4,"Cellular"),t.qZA(),t.TgZ(5,"span",4),t._uU(6,"Empire"),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),t.NdJ("click",function(){return r.menuAction(1)}),t._UZ(11,"i"),t.qZA(),t.TgZ(12,"div",9),t.NdJ("click",function(){return r.menuAction(2)}),t._UZ(13,"i"),t.qZA(),t.TgZ(14,"div",10),t.NdJ("click",function(){return r.menuAction(6)}),t.TgZ(15,"i",11),t._uU(16),t.qZA()(),t.TgZ(17,"div",12),t.NdJ("click",function(){return r.menuAction(3)}),t._UZ(18,"i"),t.qZA(),t.TgZ(19,"div",13),t.NdJ("click",function(){return r.menuAction(4)}),t._UZ(20,"i"),t.qZA(),t.TgZ(21,"div",14),t.NdJ("click",function(){return r.menuAction(5)}),t._UZ(22,"i"),t.qZA()()()()(),t.TgZ(23,"div",15)(24,"div",16)(25,"div",17)(26,"div",18)(27,"div",19)(28,"div",20)(29,"div",21),t._UZ(30,"img",22),t.qZA()(),t.TgZ(31,"div",23),t._uU(32),t.qZA()(),t.TgZ(33,"div",24)(34,"div"),t._uU(35),t.qZA(),t.TgZ(36,"div",25),t._uU(37),t.qZA()()(),t.TgZ(38,"div",26)(39,"div",5)(40,"div",27),t._uU(41),t.qZA(),t.TgZ(42,"div")(43,"div",28),t._UZ(44,"div",29)(45,"div",30),t.TgZ(46,"span",31)(47,"span",32),t._uU(48,"1"),t.qZA()(),t.TgZ(49,"span",31)(50,"span",32),t._uU(51,"2"),t.qZA()(),t.TgZ(52,"span",31)(53,"span",32),t._uU(54,"3"),t.qZA()(),t.TgZ(55,"span",33)(56,"span",32),t._uU(57,"4"),t.qZA()()()()()(),t.TgZ(58,"div",34)(59,"div",35)(60,"div"),t._uU(61),t.qZA(),t.TgZ(62,"div",25),t._uU(63),t.qZA()(),t.TgZ(64,"div",36)(65,"div",37),t._uU(66),t.qZA(),t.TgZ(67,"div",20)(68,"div",38),t._UZ(69,"img",22),t.qZA()()()()()(),t.TgZ(70,"div",39)(71,"div",20)(72,"div",40),t.YNc(73,Ea,4,11,"div",41),t._UZ(74,"hr"),t.YNc(75,Ma,3,2,"ng-container",42),t._UZ(76,"hr"),t.YNc(77,Na,2,1,"div",43),t.qZA(),t.TgZ(78,"div",44)(79,"div")(80,"div"),t.YNc(81,Ra,3,1,"div",42),t.qZA(),t.YNc(82,La,2,1,"div",45),t.qZA(),t._UZ(83,"div",46),t.TgZ(84,"div")(85,"div"),t.YNc(86,Ua,3,1,"div",42),t.qZA(),t.YNc(87,Ba,2,1,"div",45),t.qZA()(),t.TgZ(88,"div",47),t.YNc(89,Fa,4,11,"div",48),t._UZ(90,"hr"),t.YNc(91,Wa,3,2,"ng-container",42),t._UZ(92,"hr"),t.YNc(93,Qa,2,1,"div",49),t.qZA()()()()(),t.YNc(94,Va,58,11,"div",50),t.YNc(95,ja,7,0,"div",50),t._UZ(96,"audio",51)(97,"audio",52)(98,"audio",53)(99,"audio",54)(100,"audio",55)(101,"audio",56)),2&n&&(t.xp6(11),t.Gre("pi ",r.menuButton[0],""),t.xp6(2),t.Gre("pi ",r.menuButton[1],""),t.xp6(3),t.hij(" ",r.menuButton[5]," "),t.xp6(2),t.Gre("pi ",r.menuButton[2],""),t.xp6(2),t.Gre("pi ",r.menuButton[3],""),t.xp6(2),t.Gre("pi ",r.menuButton[4],""),t.xp6(8),t.Q6J("src",r.assetPath+r.player1Smiley,t.LSH),t.xp6(2),t.hij(" ",r.player1Message," "),t.xp6(3),t.Oqu(r.player1Name),t.xp6(2),t.hij("00",r.count1Display,""),t.xp6(4),t.AsE(" Gen: ",r.generationCount,"/",r.gameDuration," "),t.xp6(20),t.Oqu(r.player2Name),t.xp6(2),t.hij("00",r.count2Display,""),t.xp6(3),t.hij(" ",r.player2Message," "),t.xp6(3),t.Q6J("src",r.assetPath+r.player2Smiley,t.LSH),t.xp6(4),t.Q6J("ngForOf",r.buildMaterialName),t.xp6(2),t.Q6J("ngForOf",r.actionTool),t.xp6(2),t.Q6J("ngIf",r.player2Lock&&1!=r.controlButton),t.xp6(4),t.Q6J("ngForOf",r.counter(r.rows)),t.xp6(1),t.Q6J("ngIf",r.player1Lock&&"pi-play"==r.menuButton[0]),t.xp6(4),t.Q6J("ngForOf",r.counter(r.rows)),t.xp6(1),t.Q6J("ngIf",r.player2Lock&&"pi-play"==r.menuButton[0]),t.xp6(2),t.Q6J("ngForOf",r.buildMaterialName),t.xp6(2),t.Q6J("ngForOf",r.actionTool),t.xp6(2),t.Q6J("ngIf",r.player1Lock&&1!=r.controlButton),t.xp6(1),t.Q6J("ngIf",r.showResult),t.xp6(1),t.Q6J("ngIf",r.showHelp))},dependencies:[L.sg,L.O5,li,j0],styles:[".cell-container[_ngcontent-%COMP%]{display:flex}.cell[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:5px;border:1px solid #121b29;animation-duration:1s;cursor:pointer;background-color:#1d2738}.cell-l[_ngcontent-%COMP%]:hover{background-color:#e73e3988}.cell-r[_ngcontent-%COMP%]:hover{background-color:#4cb93188}.main-container[_ngcontent-%COMP%]{width:1708px}.title[_ngcontent-%COMP%]{font-size:1.5rem}.title1[_ngcontent-%COMP%]{color:#e1113b}.title2[_ngcontent-%COMP%]{color:#fff}.menu-button[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{background:#E1113B!important}.game-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.game-lock[_ngcontent-%COMP%]{height:100%;width:100%;background:rgba(0,0,0,.3333333333);position:relative;z-index:1;top:-100%;border-radius:5px;color:#fff}.game-lock[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]{font-size:3rem}.pi-lock[_ngcontent-%COMP%]:hover{scale:1.1}.control-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:0 0 0 1.5rem;width:55px;height:55px;border-radius:50%;color:#f0f8ff;box-shadow:-3px -3px 4px #171e2c,3px 3px 5px 2px #000000d6,inset 0 0 #000,inset 0 0 #171e2c;transition:box-shadow .3s ease-in}.control-button[_ngcontent-%COMP%]:hover{box-shadow:0 0 #171e2c,0 0 #000000d6,inset 5px 5px 2px #000,inset -1px -1px 4px 1px #171e2c}.stat-container[_ngcontent-%COMP%]{color:#f5f5f5}.score[_ngcontent-%COMP%]{font-size:1.5rem}.playe1-avatar[_ngcontent-%COMP%]{height:40px;width:40px;background:#e73e39;border-radius:5px;margin:5px}.playe2-avatar[_ngcontent-%COMP%]{height:40px;width:40px;background:#4CB931;border-radius:5px;margin:5px}.player-message[_ngcontent-%COMP%]{width:500px;box-shadow:inset 3px 3px 4px #2223,inset -4px -3px 4px -5px #6666;border-radius:10px;background-color:#121b29;font-size:.8rem;color:#6c83a5}.player-text-l[_ngcontent-%COMP%]{border-left:1px solid}.player-text-r[_ngcontent-%COMP%]{border-right:1px solid}.player-card-l[_ngcontent-%COMP%]{border-right:1px solid white}.player-card-r[_ngcontent-%COMP%]{border-left:1px solid white}.progress-container[_ngcontent-%COMP%]{width:15rem;height:1.2rem;background-color:#1d2738;border-radius:.3rem;font-size:.8rem}.progress-bar-fill[_ngcontent-%COMP%]{height:1.2rem;width:.5rem;background-color:#e1113b;border-radius:.3rem;position:absolute;z-index:0}.progress-bar-1x[_ngcontent-%COMP%]{width:4rem;z-index:1;text-align:end}.progress-bar-2x[_ngcontent-%COMP%]{width:8rem;z-index:1;text-align:end}.progress-label[_ngcontent-%COMP%]{height:1rem;width:1rem;padding:3px;border:1px solid white;border-radius:.3rem}.game[_ngcontent-%COMP%]{background-color:#121b29}.tool-container-l[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#1d2738;border-radius:10px 0 0 10px}.tool-container-r[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#1d2738;border-radius:0 10px 10px 0}.tool-l[_ngcontent-%COMP%], .tool-r[_ngcontent-%COMP%]{height:50px;width:50px;color:#f0f8ff;border-radius:10px;margin-top:5px}.tool-l-disable-true[_ngcontent-%COMP%], .tool-r-disable-true[_ngcontent-%COMP%]{color:#384a65!important}.tool-l-true[_ngcontent-%COMP%]{color:#e73e39;box-shadow:inset 3px 3px 6px #0000004f,inset -4px -3px 4px -5px #6666}.tool-r-true[_ngcontent-%COMP%]{color:#4cb931;box-shadow:inset 3px 3px 6px #0000004f,inset -4px -3px 4px -5px #6666}.tool-l[_ngcontent-%COMP%]:hover{color:#e73e39}.tool-l[_ngcontent-%COMP%]:hover   .tool-count[_ngcontent-%COMP%]{background-color:#f23636}.tool-r[_ngcontent-%COMP%]:hover{color:#4cb931}.tool-count-l[_ngcontent-%COMP%]{color:#eaebedb5;width:18px;height:18px;margin-left:45px;margin-top:28px;background-color:#334461;border-radius:5px;font-size:.8rem;align-items:center;justify-content:center;display:flex;font-weight:600}.tool-count-r[_ngcontent-%COMP%]{color:#eaebedb5;width:18px;height:18px;margin-right:45px;margin-top:28px;background-color:#334461;border-radius:5px;font-size:.8rem;align-items:center;justify-content:center;display:flex;font-weight:600}.tool-count-l-true[_ngcontent-%COMP%]{background-color:#f23636}.tool-count-r-true[_ngcontent-%COMP%]{background-color:#4cb931}.hover-pointer[_ngcontent-%COMP%]{position:absolute;width:45px;height:45px;border-radius:5px;border:1px solid rgba(130,130,130,.4509803922);cursor:pointer;z-index:0}.result-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;z-index:10;top:0;background-color:#000a}.result-card[_ngcontent-%COMP%]{width:60%;height:60%;background-color:#121b29;border-radius:10px;color:#fff}.help-card[_ngcontent-%COMP%]{width:80%;height:80%;background-color:#121b29;border-radius:10px;overflow-y:scroll}.title[_ngcontent-%COMP%]{font-size:3rem}.result-details[_ngcontent-%COMP%]{color:#384a65}.result-card-button[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s}.result-card-button[_ngcontent-%COMP%]:hover{scale:1.1}.result-card-seperator[_ngcontent-%COMP%]{border:2px solid #384A65;height:8rem}.rotate-45[_ngcontent-%COMP%]{transform:rotate(45deg)}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-135[_ngcontent-%COMP%]{transform:rotate(135deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-225[_ngcontent-%COMP%]{transform:rotate(225deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-315[_ngcontent-%COMP%]{transform:rotate(315deg)}"]}),i})(),$a=(()=>{var o;class i{}return(o=i).\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-landing"]],decls:2,vars:0,template:function(n,r){1&n&&(t.TgZ(0,"p"),t._uU(1,"landing works!"),t.qZA())}}),i})();function Xa(o,i){if(1&o&&(t.TgZ(0,"tr",11)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA()()),2&o){const e=i.$implicit,n=i.index;t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(e[0]),t.xp6(2),t.Oqu(e[1]),t.xp6(2),t.Oqu(e[2][0]),t.xp6(2),t.Oqu(e[2][1]),t.xp6(2),t.Oqu(e[2][2]),t.xp6(2),t.Oqu(e[2][3])}}let ec=(()=>{var o;class i{constructor(n){this.router=n,this.playersList={},this.scores=[]}ngOnInit(){this.initializeFB(),this.getScores()}initializeFB(){(0,J.ZF)({databaseURL:"https://game-of-life-ce-default-rtdb.europe-west1.firebasedatabase.app"})}getScores(){d0(j(N(fe()),"users")).then(r=>{r.exists()?(this.playersList=r.val(),this.sortScores()):console.log("No data available")}).catch(r=>{console.error(r)})}sortScores(){var n=[];for(let r in this.playersList)n.push([this.playersList[r].name,this.playersList[r].score,this.playersList[r].gameStat]);n.sort(function(r,s){return s[1]-r[1]}),this.scores=n}navToPage(){this.router.navigateByUrl("home")}}return(o=i).\u0275fac=function(n){return new(n||o)(t.Y36(_e.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-leader-board"]],decls:31,vars:1,consts:[[1,"main-container"],[1,"title","text-uppercase","text-center","pt-5"],[1,"title1"],[1,"title2"],[1,"title","text-uppercase","text-center","pt-3","pb-4"],[1,"title3"],[1,"text-center","pt-3","pb-4"],[1,"back-button","text-light",3,"click"],[1,"list-container","d-flex","justify-content-center","px-5","pb-5","pt-2"],[1,"text-center"],["class","m-2 text-center",4,"ngFor","ngForOf"],[1,"m-2","text-center"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._uU(3,"Cellular"),t.qZA(),t.TgZ(4,"span",3),t._uU(5,"Empire"),t.qZA()(),t.TgZ(6,"div",4)(7,"span",5),t._uU(8,"Leader Board"),t.qZA()(),t.TgZ(9,"div",6)(10,"span",7),t.NdJ("click",function(){return r.navToPage()}),t._uU(11,"Back to Main Menu"),t.qZA()(),t.TgZ(12,"div",8)(13,"table")(14,"thead",9)(15,"th"),t._uU(16,"Rank"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Name"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"High Score"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Games Played"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Win"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Draw"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Lose"),t.qZA()(),t.TgZ(29,"tbody"),t.YNc(30,Xa,15,7,"tr",10),t.qZA()()()()),2&n&&(t.xp6(30),t.Q6J("ngForOf",r.scores))},dependencies:[L.sg],styles:[".main-containr[_ngcontent-%COMP%]{color:#fff!important}.title[_ngcontent-%COMP%]{font-size:2rem}.title3[_ngcontent-%COMP%]{color:#384a65}.list-container[_ngcontent-%COMP%]{width:100%}.list-item[_ngcontent-%COMP%]{height:3rem;width:80rem}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:1.5rem 4rem;color:#fff!important}tr[_ngcontent-%COMP%]{background:#1D2738;border:8px solid #081120;border-radius:10px!important}.back-button[_ngcontent-%COMP%]{cursor:pointer;scale:1.1;margin:20px;padding:10px 20px;transition:all .3s ease-in-out;border:1px solid white;border-radius:10px}.back-button[_ngcontent-%COMP%]:hover{scale:1.2}"]}),i})();function tc(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",51),t.NdJ("click",function(){const s=t.CHM(e).index,l=t.oxw();return t.KtG(l.selectBuildMode(s))}),t._UZ(1,"i"),t.TgZ(2,"div"),t._uU(3),t.qZA()()}if(2&o){const e=i.$implicit,n=i.index,r=t.oxw();t.Gre("tool-l tool-l-",r.buildMode==n," d-flex justify-content-center align-items-center"),t.s9C("pTooltip",e),t.xp6(1),t.Gre("tool-text-l pi ",r.buildMaterialIcon[n],""),t.xp6(1),t.Gre("pi position-absolute tool-count-l tool-count-l-",r.buildMode==n,""),t.xp6(1),t.hij(" ",r.buildMaterialCount1[n]," ")}}function ic(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",51),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index,s=t.oxw();return t.KtG(s.selectActionTool(r+7))}),t._UZ(2,"i"),t.TgZ(3,"div"),t._uU(4),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw(),n=e.index,r=e.$implicit,s=t.oxw();t.xp6(1),t.Gre("tool-l tool-l-",s.buildMode==n+7,"\n                                d-flex justify-content-center align-items-center"),t.s9C("pTooltip",r),t.xp6(1),t.Gre("tool-text-l pi ",s.actionToolIcon[n],""),t.xp6(1),t.Gre("pi position-absolute tool-count-l tool-count-l-",s.buildMode==n+7,""),t.xp6(1),t.hij(" ",s.buildMaterialCount1[n+7]," ")}}function nc(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",51),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index,s=t.oxw();return t.KtG(s.selectActionTool(r+7,1))}),t._UZ(2,"i"),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(),n=e.$implicit,r=e.index,s=t.oxw();t.xp6(1),t.Gre("tool-l tool-l-disable-",0==s.buildHistory.length,"\n                                d-flex justify-content-center align-items-center"),t.s9C("pTooltip",n),t.xp6(1),t.Gre("tool-text-l pi ",s.actionToolIcon[r],"")}}function oc(o,i){if(1&o&&(t.ynx(0),t.YNc(1,ic,5,11,"ng-container",40),t.YNc(2,nc,3,7,"ng-container",40),t.BQk()),2&o){const e=i.index;t.xp6(1),t.Q6J("ngIf",0==e),t.xp6(1),t.Q6J("ngIf",e>0)}}function rc(o,i){if(1&o&&(t.TgZ(0,"div",52),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.lockCounter," ")}}function sc(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",55),t.NdJ("click",function(){const s=t.CHM(e).index,l=t.oxw().index,a=t.oxw();return t.KtG(a.toggleCell(l,s))}),t.qZA()}if(2&o){const e=i.index,n=t.oxw().index;t.hYB("id","game_",n,"_",e,"")}}function lc(o,i){if(1&o&&(t.TgZ(0,"div")(1,"div",53),t.YNc(2,sc,1,2,"div",54),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.counter(e.cols/2))}}function ac(o,i){if(1&o&&(t.TgZ(0,"div",57)(1,"i",58),t._uU(2),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij(" ",1==e.activePlayerID?e.gameStartCounter:"","")}}function cc(o,i){if(1&o&&(t.ynx(0),t.YNc(1,ac,3,1,"div",56),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",1!=e.activePlayerID||e.gameStartCounter>0)}}function dc(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",60),t.NdJ("click",function(){const s=t.CHM(e).index,l=t.oxw().index,a=t.oxw();return t.KtG(a.toggleCell(l,s+a.cols/2))}),t.qZA()}if(2&o){const e=i.index,n=t.oxw().index,r=t.oxw();t.hYB("id","game_",n,"_",e+r.cols/2,"")}}function uc(o,i){if(1&o&&(t.TgZ(0,"div")(1,"div",53),t.YNc(2,dc,1,2,"div",59),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.counter(e.cols/2))}}function hc(o,i){if(1&o&&(t.TgZ(0,"div",57)(1,"i",58),t._uU(2),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij(" ",2==e.activePlayerID?e.gameStartCounter:"","")}}function pc(o,i){if(1&o&&(t.ynx(0),t.YNc(1,hc,3,1,"div",56),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",2!=e.activePlayerID||e.gameStartCounter>0)}}function fc(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",61),t.NdJ("click",function(){const s=t.CHM(e).index,l=t.oxw();return t.KtG(l.selectBuildMode(s))}),t._UZ(1,"i"),t.TgZ(2,"div"),t._uU(3),t.qZA()()}if(2&o){const e=i.$implicit,n=i.index,r=t.oxw();t.Gre("tool-r tool-r-",r.buildMode==n," d-flex justify-content-center align-items-center"),t.s9C("pTooltip",e),t.xp6(1),t.Gre("tool-text-r pi ",r.buildMaterialIcon[n],""),t.xp6(1),t.Gre("pi position-absolute tool-count-r tool-count-r-",r.buildMode==n,""),t.xp6(1),t.hij(" ",r.buildMaterialCount2[n]," ")}}function _c(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",61),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index,s=t.oxw();return t.KtG(s.selectActionTool(r+7))}),t._UZ(2,"i"),t.TgZ(3,"div"),t._uU(4),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw(),n=e.index,r=e.$implicit,s=t.oxw();t.xp6(1),t.Gre("tool-r tool-r-",s.buildMode==n+7,"\n                                d-flex justify-content-center align-items-center"),t.s9C("pTooltip",r),t.xp6(1),t.Gre("tool-text-r pi ",s.actionToolIcon[n],""),t.xp6(1),t.Gre("pi position-absolute tool-count-r tool-count-r-",s.buildMode==n+7,""),t.xp6(1),t.hij(" ",s.buildMaterialCount2[n+7]," ")}}function mc(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",61),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index,s=t.oxw();return t.KtG(s.selectActionTool(r+7,2))}),t._UZ(2,"i"),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(),n=e.$implicit,r=e.index,s=t.oxw();t.xp6(1),t.Gre("tool-r tool-r-disable-",0==s.buildHistory.length,"\n                                d-flex justify-content-center align-items-center"),t.s9C("pTooltip",n),t.xp6(1),t.Gre("tool-text-r pi ",s.actionToolIcon[r],"")}}function gc(o,i){if(1&o&&(t.ynx(0),t.YNc(1,_c,5,11,"ng-container",40),t.YNc(2,mc,3,7,"ng-container",40),t.BQk()),2&o){const e=i.index;t.xp6(1),t.Q6J("ngIf",0==e),t.xp6(1),t.Q6J("ngIf",e>0)}}function yc(o,i){if(1&o&&(t.TgZ(0,"div",62),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.lockCounter," ")}}function vc(o,i){1&o&&(t.TgZ(0,"div"),t._uU(1," Draw "),t.qZA())}function Cc(o,i){if(1&o&&(t.TgZ(0,"div")(1,"div"),t._uU(2," Winner "),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(4),t.Oqu(e.player1Name)}}function xc(o,i){if(1&o&&(t.TgZ(0,"div")(1,"div"),t._uU(2,"Winner"),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(4),t.Oqu(e.player2Name)}}function Tc(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",63)(1,"div",64)(2,"div",65)(3,"div",66),t.YNc(4,vc,2,0,"div",40),t.YNc(5,Cc,5,1,"div",40),t.YNc(6,xc,5,1,"div",40),t.qZA(),t.TgZ(7,"div",67)(8,"div",65)(9,"div",68),t._uU(10),t.qZA(),t.TgZ(11,"div",17)(12,"div"),t._uU(13,"Score"),t.qZA(),t._UZ(14,"div",69),t.TgZ(15,"div"),t._uU(16),t.qZA()(),t.TgZ(17,"div",17)(18,"div"),t._uU(19,"Born"),t.qZA(),t._UZ(20,"div",69),t.TgZ(21,"div"),t._uU(22),t.qZA()(),t.TgZ(23,"div",17)(24,"div"),t._uU(25,"Death"),t.qZA(),t._UZ(26,"div",69),t.TgZ(27,"div"),t._uU(28),t.qZA()()(),t._UZ(29,"div",70),t.TgZ(30,"div",65)(31,"div",68),t._uU(32),t.qZA(),t.TgZ(33,"div",17)(34,"div"),t._uU(35,"Score"),t.qZA(),t._UZ(36,"div",69),t.TgZ(37,"div"),t._uU(38),t.qZA()(),t.TgZ(39,"div",17)(40,"div"),t._uU(41,"Born"),t.qZA(),t._UZ(42,"div",69),t.TgZ(43,"div"),t._uU(44),t.qZA()(),t.TgZ(45,"div",17)(46,"div"),t._uU(47,"Death"),t.qZA(),t._UZ(48,"div",69),t.TgZ(49,"div"),t._uU(50),t.qZA()()()(),t.TgZ(51,"div",71)(52,"div",72),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.navToPage())}),t._uU(53,"Leaderboard"),t.qZA(),t.TgZ(54,"div",72),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.menuAction(5))}),t._uU(55,"Main Menu"),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.count1Display==e.count2Display),t.xp6(1),t.Q6J("ngIf",e.count1Display>e.count2Display),t.xp6(1),t.Q6J("ngIf",e.count1Display<e.count2Display),t.xp6(4),t.Oqu(e.player1Name),t.xp6(6),t.Oqu(e.count1Display),t.xp6(6),t.Oqu(e.born1),t.xp6(6),t.Oqu(e.death1),t.xp6(4),t.Oqu(e.player2Name),t.xp6(6),t.Oqu(e.count2Display),t.xp6(6),t.Oqu(e.born2),t.xp6(6),t.Oqu(e.death2)}}function Pc(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",63)(1,"div",73)(2,"div",74),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showHelp=!1)}),t._uU(3,"Close"),t.qZA(),t._UZ(4,"app-game-rules"),t.TgZ(5,"div",74),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showHelp=!1)}),t._uU(6,"Close"),t.qZA()()()}}let yo=(()=>{var o;class i{constructor(n,r){this.router=n,this.gameService=r,this.buildMode=0,this.buildMaterial=[[[0,-1],[0,0],[0,1]],[[0,0],[0,1],[1,0],[1,1]],[[-1,0],[0,-1],[0,1],[1,0]],[[-1,0],[-1,1],[0,-1],[0,1],[1,1]],[[-1,1],[0,-1],[0,1],[1,0],[1,1]],[[-1,-2],[-1,1],[0,2],[1,-2],[1,2],[2,-1],[2,0],[2,1],[2,2]],[[-6,-4],[-6,-3],[-6,-2],[-6,2],[-6,3],[-6,4],[-4,-6],[-3,-6],[-2,-6],[-4,-1],[-3,-1],[-2,-1],[-4,1],[-3,1],[-2,1],[-4,6],[-3,6],[-2,6],[-1,-4],[-1,-3],[-1,-2],[-1,2],[-1,3],[-1,4],[1,-4],[1,-3],[1,-2],[1,2],[1,3],[1,4],[2,-6],[3,-6],[4,-6],[2,-1],[3,-1],[4,-1],[2,1],[3,1],[4,1],[2,6],[3,6],[4,6],[6,-4],[6,-3],[6,-2],[6,2],[6,3],[6,4]],[[0,0]]],this.actionTool=["Edit","Undo","Reset"],this.actionToolIcon=["pi-pencil","pi-undo","pi-times"],this.buildMaterialName=["Blinker","Block","Star","Glider Up","Glider Down","Spaceship","Pulsar"],this.buildMaterialIcon=["pi-eye","pi-table","pi-home","pi-send rotate","pi-send rotate-90","pi-share-alt","pi-shield"],this.buildMaterialCountDefault=[8,8,8,4,4,4,2,25],this.buildMaterialCount1=[],this.buildMaterialCount2=[],this.count1Display=0,this.count2Display=0,this.born1=0,this.born2=0,this.death1=0,this.death2=0,this.rows=40,this.cols=90,this.gameStatus="start",this.generationCount=0,this.gameDuration=500,this.gameRound=1,this.gameRoundLimit=4,this.generationsPerRound=[100,200,300,500],this.generationLimit=this.generationsPerRound[this.gameRound-1],this.menuButton=["pi-play","pi-replay","pi-volume-up","pi-question-circle","pi-sign-out","2x","pi-user-plus"],this.gameSpeed={"0.5x":1e3,"1x":500,"2x":250,"5x":100},this.buildHistory=[],this.player1Lock=!1,this.player2Lock=!1,this.lockCounterDefault=60,this.lockCounter=this.lockCounterDefault,this.gameStartCounterDefault=10,this.gameStartCounter=this.gameStartCounterDefault,this.player1Name="User",this.player2Name="Computer",this.showResult=!1,this.showHelp=!1,this.happySmileyArray=["happy.svg","happy_smile.svg","happy_love.svg"],this.sadSmileyArray=["sad.svg","sad_cry.svg","sad_angry.svg"],this.player1Smiley=this.happySmileyArray[0],this.player2Smiley=this.happySmileyArray[0],this.assetPath="../../../../assets/",this.player1Message="Select the block to unlock "+this.lockCounterDefault+" Sec",this.player2Message="Select the block to unlock "+this.lockCounterDefault+" Sec",this.activePlayerID=0,this.mute=!1}ngOnInit(){this.gameService.initializeFB(),this.initPage(),this.listenFBGameTriggers()}initPage(){this.player1Name=this.gameService.players.player1.name,this.player2Name=this.gameService.players.player2.name,this.gameDuration=100*this.gameService.gameConfig.duration,this.generationsPerRound=this.gameService.gameRounds[this.gameService.gameConfig.duration],this.generationLimit=this.generationsPerRound[this.gameRound-1],this.buildMaterialCount1=JSON.parse(JSON.stringify(this.buildMaterialCountDefault)),this.buildMaterialCount2=JSON.parse(JSON.stringify(this.buildMaterialCountDefault)),this.activePlayerID=this.gameService.activePlayerID,""==this.gameService.hostGameURL&&this.router.navigateByUrl("home"),this.gameGrid=this.createEmptyGrid(this.rows,this.cols),this.startGameCounterID=setInterval(()=>{this.gameStartCounter<=0?(clearInterval(this.startGameCounterID),this.startGameCounter()):this.gameStartCounter--},1e3),setTimeout(()=>{this.playAudio("audio0")},3e3)}startGameCounter(){clearInterval(this.lockIntervalId),this.lockIntervalId=setInterval(()=>{this.lockCounter<=0?(this.lockCounter=this.lockCounterDefault,clearInterval(this.lockIntervalId),this.uploadGameBoard()):this.lockCounter--},1e3)}buildComplete(){clearInterval(this.lockIntervalId),this.player1Lock=!0,this.player2Lock=!0}createEmptyGrid(n,r){let s=new Array(n);for(let l=0;l<n;l++)s[l]=new Array(r).fill(0);return s}counter(n){return new Array(n)}pauseAudio(){this.mute=!0,document.getElementById("audio0").pause()}selectActionTool(n,r=0){this.playAudio("audio5"),7==n?(this.buildMode=n,this.editBuild(n)):8==n?this.undoLastBuild():9==n&&this.resetBuild(r)}editBuild(n){this.selectBuildMode(n)}undoLastBuild(){var n=this.buildHistory[this.buildHistory.length-1];this.toggleCell(n[1],n[2],n[0],!0),this.buildHistory.pop()}resetBuild(n){if(n>0){var r=new Array(this.cols/2).fill(0);for(let s=0;s<this.gameGrid.length;s++){const l=this.gameGrid[s];1==n&&(this.gameGrid[s]=r.concat(l.slice(this.cols/2,l.length))),2==n&&(this.gameGrid[s]=l.slice(0,this.cols/2).concat(r))}}this.buildHistory=[],this.updateGrid(this.gameGrid),this.countLivingCells(this.gameGrid)}selectBuildMode(n){this.buildMode!=n&&(this.buildMode=n,this.playAudio("audio5"))}toggleCell(n,r,s=this.buildMode,l=!1){if("play"!=this.gameStatus){if(r<this.cols/2)if(l)this.buildMaterialCount1[s]++;else{if(this.buildMaterialCount1[s]<=0)return;this.buildMaterialCount1[s]--}else if(l)this.buildMaterialCount2[s]++;else{if(this.buildMaterialCount2[s]<=0)return;this.buildMaterialCount2[s]--}var c=1;r>this.cols/2&&(c=-1),this.buildMaterial[s].forEach(d=>{var u=n+d[0],h=r+d[1]*c;this.gameGrid[u][h]=0===this.gameGrid[u][h]?1:0;var f=document.getElementById("game_"+u+"_"+h),_=Math.floor(40*Math.random()+16).toString(16),g=Math.floor(80*Math.random()+16).toString(16),v=Math.floor(100*Math.random()+16).toString(16);f.style.backgroundColor=h<this.cols/2?0===this.gameGrid[u][h]?"#1D2738":"#E7"+g+_:0===this.gameGrid[u][h]?"#1D2738":"#"+v+"B9"+g}),this.countLivingCells(this.gameGrid),0==l&&(this.playAudio("audio1"),this.buildHistory.push([s,n,r]))}}countLivingCells(n){let r=0,s=0;for(let l=0;l<this.rows;l++)for(let a=0;a<this.cols;a++)1===n[l][a]&&(a<this.cols/2?r++:s++);this.count1Display-r>20&&this.count2Display-s>20&&this.playAudio("audio3"),this.generationCount%10==0&&this.smileyUpdates(r,s),this.count1Display=r,this.count2Display=s}smileyUpdates(n,r){if("play"==this.gameStatus){var s=n-r;0==s?(this.player1Smiley=this.happySmileyArray[0],this.player2Smiley=this.happySmileyArray[0],this.tempMessageUpdate("Build your empire!","Build your empire!")):s>0?s>80?(this.player1Smiley=this.happySmileyArray[2],this.player2Smiley=this.sadSmileyArray[2],this.tempMessageUpdate("I love this game!","I want to win!")):s>40?(this.player1Smiley=this.happySmileyArray[1],this.player2Smiley=this.sadSmileyArray[1],this.tempMessageUpdate("Nice!","Don't laugh, I am gonna win this game!")):(this.player1Smiley=this.happySmileyArray[0],this.player2Smiley=this.sadSmileyArray[0],this.tempMessageUpdate("Hehe...","Don't laugh!")):s<0&&(s<-80?(this.player1Smiley=this.sadSmileyArray[2],this.player2Smiley=this.happySmileyArray[2],this.tempMessageUpdate("I want to win!","I love this game!")):s<-40?(this.player1Smiley=this.sadSmileyArray[1],this.player2Smiley=this.happySmileyArray[1],this.tempMessageUpdate("Ohh no I am loosing!","Nice!")):(this.player1Smiley=this.sadSmileyArray[0],this.player2Smiley=this.happySmileyArray[0],this.tempMessageUpdate("Don't laugh, I am gonna win this game!","Hehe...")))}}tempMessageUpdate(n,r){n&&(this.player1Message=n),r&&(this.player2Message=r)}updateGrid(n){for(let d=0;d<this.rows;d++)for(let u=0;u<this.cols;u++){let h=document.getElementById("game_"+d+"_"+u);var r=Math.floor(40*Math.random()+16).toString(16),s=Math.floor(80*Math.random()+16).toString(16),l=Math.floor(100*Math.random()+16).toString(16);h.style.backgroundColor=u<this.cols/2?0===n[d][u]?"#1D2738":"#E7"+s+r:0===n[d][u]?"#1D2738":"#"+l+"B9"+s}}calculateNextGeneration(n){const r=this.createEmptyGrid(this.rows,this.cols);for(let s=0;s<this.rows;s++)for(let l=0;l<this.cols;l++){const a=n[s][l],c=this.countNeighbors(n,s,l);0===a&&3===c?(r[s][l]=1,l<this.cols/2?this.born2++:this.born1++):1===a&&(c<2||c>3)?(r[s][l]=0,l<this.cols/2?this.death2++:this.death1++):r[s][l]=a}return r}countNeighbors(n,r,s){let l=0;const a=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(let c=0;c<a.length;c++){const[d,u]=a[c];l+=n[(r+d+this.rows)%this.rows][(s+u+this.cols)%this.cols]}return l}runNextGeneration(){this.generationCount>=this.generationLimit?this.gameRound==this.gameRoundLimit?(this.pauseGame(),this.gameEnd()):(this.pauseGame(),this.gameRound++,this.generationLimit=this.generationsPerRound[this.gameRound-1]):(this.generationCount++,this.updateProgressBar(this.generationCount),this.gameGrid=this.calculateNextGeneration(this.gameGrid),this.updateGrid(this.gameGrid),this.countLivingCells(this.gameGrid))}gameEnd(){this.showResult=!0,1==this.activePlayerID&&(this.updateScore(this.player1Name,this.count1Display,this.count2Display),this.updateScore(this.player2Name,this.count2Display,this.count1Display))}rematch(n=!1){}updateProgressBar(n){var s=n/(1*this.gameDuration)*15;document.getElementById("progress-bar-fill").style.width=s+"rem"}listenFBGameTriggers(){var n=this.gameService.hostGameURL;Q(N(this.gameService.fbDatabase,n+"/game/status"),{1:!1,2:!1}),Q(N(this.gameService.fbDatabase,n+"/game/rematch"),{1:!1,2:!1}),Y0(N(this.gameService.fbDatabase,n+"/game"),a=>{if(a.exists()){var c=a.val();if(console.log(c),c.status&&(c.status[1]&&(this.player1Message="I am ready"),c.status[2]&&(this.player2Message="I am ready"),c.status[1]&&c.status[2]&&c[1]&&c[2])){for(let d=0;d<this.gameGrid.length;d++){const u=this.gameGrid[d];1==this.activePlayerID&&(this.gameGrid[d]=u.slice(0,this.cols/2).concat(c[2][d])),2==this.activePlayerID&&(this.gameGrid[d]=c[1][d].concat(u.slice(this.cols/2,u.length)))}this.playGame()}c.rematch&&(c.rematch[1]&&console.log("player 1 request rematch"),c.rematch[2]&&console.log("player 2 request rematch"))}})}uploadGameBoard(){var n=this.gameService.hostGameURL,r=[];for(let a=0;a<this.gameGrid.length;a++){const c=this.gameGrid[a];1==this.activePlayerID&&r.push(c.slice(0,this.cols/2)),2==this.activePlayerID&&r.push(c.slice(this.cols/2,c.length))}Q(N(this.gameService.fbDatabase,n+"/game/"+this.activePlayerID),r),Q(N(this.gameService.fbDatabase,n+"/game/status/"+this.activePlayerID),!0)}playGame(){this.buildMode=-1,clearInterval(this.intervalId);var n=this.gameSpeed[this.menuButton[5]];this.gameStatus="play",this.intervalId=setInterval(()=>{this.runNextGeneration()},n),this.playAudio("audio2"),this.buildHistory=[],clearInterval(this.startGameCounterID),this.lockCounter=this.lockCounterDefault,clearInterval(this.lockIntervalId)}pauseGame(){this.gameStatus="start",clearInterval(this.intervalId),1==this.activePlayerID&&Q(N(this.gameService.fbDatabase,this.gameService.hostGameURL+"/game/status"),{1:!1,2:!1}),this.startGameCounter()}resetGame(){this.pauseGame(),this.generationCount=0,this.gameRound=1,this.generationLimit=this.generationsPerRound[this.gameRound-1],this.gameGrid=this.createEmptyGrid(this.rows,this.cols),this.updateGrid(this.gameGrid),this.buildHistory=[],this.born1=this.born2=this.death1=this.death2=0,this.showResult=!1,this.count1Display=this.count2Display=0,this.gameStatus="start",this.gameStartCounter=this.gameStartCounterDefault,this.smileyUpdates(0,0),this.buildMaterialCount1=JSON.parse(JSON.stringify(this.buildMaterialCountDefault)),this.buildMaterialCount2=JSON.parse(JSON.stringify(this.buildMaterialCountDefault))}playAudio(n){if(0==this.mute){const r=document.getElementById(n);r.volume=.2,r.play()}}menuAction(n){if(1==n)"start"==this.gameStatus&&this.uploadGameBoard();else if(2==n)this.resetGame();else if(3==n)"pi-volume-up"==this.menuButton[2]?(this.menuButton[2]="pi-volume-off",this.pauseAudio()):(this.menuButton[2]="pi-volume-up",this.mute=!1,this.playAudio("audio0"));else if(4==n)this.showHelp=!0;else{if(5!=n)return;this.router.navigateByUrl("home")}}updateScore(n,r,s){const l=N(fe());var c=0,d=0,u=0;r==s&&(d=1),r>s&&(c=1),r<s&&(u=1),d0(j(l,"users/"+n)).then(h=>{if(h.exists()){var f=h.val(),_=f.gameStat;_[0]+=1,_[1]+=c,_[2]+=d,_[3]+=u,this.writeFB(n,r>f.score?r:f.score,_)}else console.log("No data available"),this.writeFB(n,r,[1,c,d,u])}).catch(h=>{console.error(h)})}writeFB(n,r,s){Q(N(this.gameService.fbDatabase,"users/"+n),{name:n,score:r,gameStat:s})}navToPage(){this.router.navigateByUrl("leader-board")}}return(o=i).\u0275fac=function(n){return new(n||o)(t.Y36(_e.F0),t.Y36(V0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-online-game-board"]],decls:96,vars:40,consts:[["id","main-container",1,"m-auto","main-container","p-4"],[1,"d-flex","justify-content-between","align-items-center","pb-4"],[1,"title","text-uppercase"],[1,"title1"],[1,"title2"],[1,"d-flex","flex-column","align-items-center"],[1,"controls"],[1,"d-flex","justify-content-center"],["pTooltip","play","tooltipPosition","bottom",1,"control-button",3,"click"],["pTooltip","Sound","tooltipPosition","bottom",1,"control-button","tooltipP",3,"click"],["pTooltip","Help","tooltipPosition","bottom",1,"control-button","tooltipP",3,"click"],["pTooltip","Quit","tooltipPosition","bottom",1,"control-button","tooltipP",3,"click"],[1,"game-container"],[1,"stat-container","pb-1"],[1,"d-flex","justify-content-between","pb-2"],[1,"d-flex","player-details","align-items-center",2,"width","680px"],[1,"player-message","d-flex","align-items-center","p-2","px-3"],[1,"d-flex"],[1,"playe1-avatar"],["alt","",3,"src"],[1,"px-3","ms-3","player-text-l"],[1,"px-3"],[1,"text-danger","score"],[1,""],[1,"text-center","pb-3",2,"width","270px"],[1,"progress-container","d-flex"],["id","progress-bar-fill",1,"progress-bar-fill"],[1,"progress-bar-1x"],[1,"progress-label"],[1,"progress-bar-2x"],[1,"d-flex","player-details","align-items-center","justify-content-end",2,"width","680px"],[1,"px-3","text-end"],[1,"player-message","d-flex","justify-content-end","align-items-center","p-2","px-3"],[1,"px-3","me-3","player-text-r","text-end"],[1,"playe2-avatar"],[1,"m-auto"],["id","mdoe","tooltipPosition","right",3,"class","pTooltip","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["class","tool-l d-flex justify-content-center align-items-center",4,"ngIf"],["id","game",1,"game","d-flex","p-4"],[4,"ngIf"],[1,"p-1"],["id","mdoe","tooltipPosition","left",3,"class","pTooltip","click",4,"ngFor","ngForOf"],["class","tool-r d-flex justify-content-center align-items-center",4,"ngIf"],["class","result-container d-flex justify-content-center align-items-center",4,"ngIf"],["id","audio1","src","assets/mixkit-extra-bonus-in-a-video-game-2045.wav"],["id","audio2","src","assets/mixkit-drums-of-war-call-2780.wav"],["id","audio3","src","assets/mixkit-arcade-mechanical-bling-210.wav"],["id","audio4","src","assets/mixkit-winning-a-coin-video-game-2069.wav"],["id","audio5","src","assets/mixkit-game-ball-tap-2073.wav"],["id","audio0","src","assets/war theme.ogg"],["id","mdoe","tooltipPosition","right",3,"pTooltip","click"],[1,"tool-l","d-flex","justify-content-center","align-items-center"],[1,"cell-container"],["class","cell cell-l",3,"id","click",4,"ngFor","ngForOf"],[1,"cell","cell-l",3,"id","click"],["class","game-lock d-flex justify-content-center align-items-center",4,"ngIf"],[1,"game-lock","d-flex","justify-content-center","align-items-center"],[1,"pi","pi-lock","position-absolute"],["class","cell cell-r",3,"id","click",4,"ngFor","ngForOf"],[1,"cell","cell-r",3,"id","click"],["id","mdoe","tooltipPosition","left",3,"pTooltip","click"],[1,"tool-r","d-flex","justify-content-center","align-items-center"],[1,"result-container","d-flex","justify-content-center","align-items-center"],[1,"result-card","p-5"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"title","d-flex","flex-column","text-center","text-danger"],[1,"d-flex","result-details"],[1,"p-3","text-danger"],[1,"p-3"],[1,"m-5","result-card-seperator"],[1,"d-flex","pb-4"],[1,"result-card-button","p-4",3,"click"],[1,"help-card","p-5"],[1,"p-4","text-light","text-end",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._uU(4,"Cellular"),t.qZA(),t.TgZ(5,"span",4),t._uU(6,"Empire"),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),t.NdJ("click",function(){return r.menuAction(1)}),t._UZ(11,"i"),t.qZA(),t.TgZ(12,"div",9),t.NdJ("click",function(){return r.menuAction(3)}),t._UZ(13,"i"),t.qZA(),t.TgZ(14,"div",10),t.NdJ("click",function(){return r.menuAction(4)}),t._UZ(15,"i"),t.qZA(),t.TgZ(16,"div",11),t.NdJ("click",function(){return r.menuAction(5)}),t._UZ(17,"i"),t.qZA()()()()(),t.TgZ(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15)(22,"div",16)(23,"div",17)(24,"div",18),t._UZ(25,"img",19),t.qZA()(),t.TgZ(26,"div",20),t._uU(27),t.qZA()(),t.TgZ(28,"div",21)(29,"div"),t._uU(30),t.qZA(),t.TgZ(31,"div",22),t._uU(32),t.qZA()()(),t.TgZ(33,"div",23)(34,"div",5)(35,"div",24),t._uU(36),t.qZA(),t.TgZ(37,"div")(38,"div",25),t._UZ(39,"div",26),t.TgZ(40,"span",27)(41,"span",28),t._uU(42,"1"),t.qZA()(),t.TgZ(43,"span",27)(44,"span",28),t._uU(45,"2"),t.qZA()(),t.TgZ(46,"span",27)(47,"span",28),t._uU(48,"3"),t.qZA()(),t.TgZ(49,"span",29)(50,"span",28),t._uU(51,"4"),t.qZA()()()()()(),t.TgZ(52,"div",30)(53,"div",31)(54,"div"),t._uU(55),t.qZA(),t.TgZ(56,"div",22),t._uU(57),t.qZA()(),t.TgZ(58,"div",32)(59,"div",33),t._uU(60),t.qZA(),t.TgZ(61,"div",17)(62,"div",34),t._UZ(63,"img",19),t.qZA()()()()()(),t.TgZ(64,"div",35)(65,"div",17)(66,"div"),t.YNc(67,tc,4,11,"div",36),t._UZ(68,"hr"),t.YNc(69,oc,3,2,"ng-container",37),t._UZ(70,"hr"),t.YNc(71,rc,2,1,"div",38),t.qZA(),t.TgZ(72,"div",39)(73,"div")(74,"div"),t.YNc(75,lc,3,1,"div",37),t.qZA(),t.YNc(76,cc,2,1,"ng-container",40),t.qZA(),t._UZ(77,"div",41),t.TgZ(78,"div")(79,"div"),t.YNc(80,uc,3,1,"div",37),t.qZA(),t.YNc(81,pc,2,1,"ng-container",40),t.qZA()(),t.TgZ(82,"div"),t.YNc(83,fc,4,11,"div",42),t._UZ(84,"hr"),t.YNc(85,gc,3,2,"ng-container",37),t._UZ(86,"hr"),t.YNc(87,yc,2,1,"div",43),t.qZA()()()()(),t.YNc(88,Tc,56,11,"div",44),t.YNc(89,Pc,7,0,"div",44),t._UZ(90,"audio",45)(91,"audio",46)(92,"audio",47)(93,"audio",48)(94,"audio",49)(95,"audio",50)),2&n&&(t.xp6(11),t.Gre("pi ",r.menuButton[0],""),t.xp6(2),t.Gre("pi ",r.menuButton[2],""),t.xp6(2),t.Gre("pi ",r.menuButton[3],""),t.xp6(2),t.Gre("pi ",r.menuButton[4],""),t.xp6(8),t.Q6J("src",r.assetPath+r.player1Smiley,t.LSH),t.xp6(2),t.hij(" ",r.player1Message," "),t.xp6(3),t.Oqu(r.player1Name),t.xp6(2),t.hij("00",r.count1Display,""),t.xp6(4),t.AsE(" Gen: ",r.generationCount,"/",r.gameDuration," "),t.xp6(19),t.Oqu(r.player2Name),t.xp6(2),t.hij("00",r.count2Display,""),t.xp6(3),t.hij(" ",r.player2Message," "),t.xp6(3),t.Q6J("src",r.assetPath+r.player2Smiley,t.LSH),t.xp6(3),t.Gre("tool-container-l p-3 tool-l-disable-",1!=r.activePlayerID,""),t.xp6(1),t.Q6J("ngForOf",r.buildMaterialName),t.xp6(2),t.Q6J("ngForOf",r.actionTool),t.xp6(2),t.Q6J("ngIf",1==r.activePlayerID&&"play"!=r.gameStatus),t.xp6(4),t.Q6J("ngForOf",r.counter(r.rows)),t.xp6(1),t.Q6J("ngIf","play"!=r.gameStatus),t.xp6(4),t.Q6J("ngForOf",r.counter(r.rows)),t.xp6(1),t.Q6J("ngIf","play"!=r.gameStatus),t.xp6(1),t.Gre("tool-container-r p-3 tool-r-disable-",2!=r.activePlayerID,""),t.xp6(1),t.Q6J("ngForOf",r.buildMaterialName),t.xp6(2),t.Q6J("ngForOf",r.actionTool),t.xp6(2),t.Q6J("ngIf",2==r.activePlayerID&&"play"!=r.gameStatus),t.xp6(1),t.Q6J("ngIf",r.showResult),t.xp6(1),t.Q6J("ngIf",r.showHelp))},dependencies:[L.sg,L.O5,li,j0],styles:[".cell-container[_ngcontent-%COMP%]{display:flex}.cell[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:5px;border:1px solid #121b29;animation-duration:1s;cursor:pointer;background-color:#1d2738}.cell-l[_ngcontent-%COMP%]:hover{background-color:#e73e3988}.cell-r[_ngcontent-%COMP%]:hover{background-color:#4cb93188}.main-container[_ngcontent-%COMP%]{width:1708px}.title[_ngcontent-%COMP%]{font-size:1.5rem}.title1[_ngcontent-%COMP%]{color:#e1113b}.title2[_ngcontent-%COMP%]{color:#fff}.menu-button[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{background:#E1113B!important}.game-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.game-lock[_ngcontent-%COMP%]{height:100%;width:100%;background:rgba(0,0,0,.3333333333);position:relative;z-index:1;top:-100%;border-radius:5px;color:#fff}.game-lock[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]{font-size:3rem}.pi-lock[_ngcontent-%COMP%]:hover{scale:1.1}.control-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:0 0 0 1.5rem;width:55px;height:55px;border-radius:50%;color:#f0f8ff;box-shadow:-3px -3px 4px #171e2c,3px 3px 5px 2px #000000d6,inset 0 0 #000,inset 0 0 #171e2c;transition:box-shadow .3s ease-in}.control-button[_ngcontent-%COMP%]:hover{box-shadow:0 0 #171e2c,0 0 #000000d6,inset 5px 5px 2px #000,inset -1px -1px 4px 1px #171e2c}.stat-container[_ngcontent-%COMP%]{color:#f5f5f5}.score[_ngcontent-%COMP%]{font-size:1.5rem}.playe1-avatar[_ngcontent-%COMP%]{height:40px;width:40px;background:#e73e39;border-radius:5px;margin:5px}.playe2-avatar[_ngcontent-%COMP%]{height:40px;width:40px;background:#4CB931;border-radius:5px;margin:5px}.player-message[_ngcontent-%COMP%]{width:500px;box-shadow:inset 3px 3px 4px #2223,inset -4px -3px 4px -5px #6666;border-radius:10px;background-color:#121b29;font-size:.8rem;color:#6c83a5}.player-text-l[_ngcontent-%COMP%]{border-left:1px solid}.player-text-r[_ngcontent-%COMP%]{border-right:1px solid}.player-card-l[_ngcontent-%COMP%]{border-right:1px solid white}.player-card-r[_ngcontent-%COMP%]{border-left:1px solid white}.progress-container[_ngcontent-%COMP%]{width:15rem;height:1.2rem;background-color:#1d2738;border-radius:.3rem;font-size:.8rem}.progress-bar-fill[_ngcontent-%COMP%]{height:1.2rem;width:.5rem;background-color:#e1113b;border-radius:.3rem;position:absolute;z-index:0}.progress-bar-1x[_ngcontent-%COMP%]{width:4rem;z-index:1;text-align:end}.progress-bar-2x[_ngcontent-%COMP%]{width:8rem;z-index:1;text-align:end}.progress-label[_ngcontent-%COMP%]{height:1rem;width:1rem;padding:3px;border:1px solid white;border-radius:.3rem}.game[_ngcontent-%COMP%]{background-color:#121b29}.tool-container-l[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#1d2738;border-radius:10px 0 0 10px}.tool-container-r[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#1d2738;border-radius:0 10px 10px 0}.tool-l[_ngcontent-%COMP%], .tool-r[_ngcontent-%COMP%]{height:50px;width:50px;color:#f0f8ff;border-radius:10px}.tool-l-disable-true[_ngcontent-%COMP%], .tool-r-disable-true[_ngcontent-%COMP%]{color:#384a65!important}.tool-l-true[_ngcontent-%COMP%]{color:#e73e39;box-shadow:inset 3px 3px 6px #0000004f,inset -4px -3px 4px -5px #6666}.tool-r-true[_ngcontent-%COMP%]{color:#4cb931;box-shadow:inset 3px 3px 6px #0000004f,inset -4px -3px 4px -5px #6666}.tool-l[_ngcontent-%COMP%]:hover{color:#e73e39}.tool-r[_ngcontent-%COMP%]:hover{color:#4cb931}.tool-count-l[_ngcontent-%COMP%]{color:#eaebedb5;width:18px;height:18px;margin-left:45px;margin-top:28px;background-color:#334461;border-radius:5px;font-size:.8rem;align-items:center;justify-content:center;display:flex;font-weight:600}.tool-count-r[_ngcontent-%COMP%]{color:#eaebedb5;width:18px;height:18px;margin-right:45px;margin-top:28px;background-color:#334461;border-radius:5px;font-size:.8rem;align-items:center;justify-content:center;display:flex;font-weight:600}.tool-count-l-true[_ngcontent-%COMP%]{background-color:#f23636}.tool-count-r-true[_ngcontent-%COMP%]{background-color:#4cb931}.hover-pointer[_ngcontent-%COMP%]{position:absolute;width:45px;height:45px;border-radius:5px;border:1px solid rgba(130,130,130,.4509803922);cursor:pointer;z-index:0}.result-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;z-index:10;top:0;background-color:#000a}.result-card[_ngcontent-%COMP%]{width:60%;height:60%;background-color:#121b29;border-radius:10px;color:#fff}.help-card[_ngcontent-%COMP%]{width:80%;height:80%;background-color:#121b29;border-radius:10px;overflow-y:scroll}.title[_ngcontent-%COMP%]{font-size:3rem}.result-details[_ngcontent-%COMP%]{color:#384a65}.result-card-button[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s}.result-card-button[_ngcontent-%COMP%]:hover{scale:1.1}.result-card-seperator[_ngcontent-%COMP%]{border:2px solid #384A65;height:8rem}.rotate-45[_ngcontent-%COMP%]{transform:rotate(45deg)}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-135[_ngcontent-%COMP%]{transform:rotate(135deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-225[_ngcontent-%COMP%]{transform:rotate(225deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-315[_ngcontent-%COMP%]{transform:rotate(315deg)}.menu[_ngcontent-%COMP%]{font-size:1.5rem}.menu-title[_ngcontent-%COMP%]{color:#8c99b6;font-size:2rem}.menu-sub-title[_ngcontent-%COMP%]{color:#525c6e;font-size:1rem}.menu-button[_ngcontent-%COMP%]{margin:20px;padding:10px 20px;transition:all .3s ease-in-out;border:1px solid white;border-radius:10px}.menu-button[_ngcontent-%COMP%]:hover{scale:1.1;cursor:pointer!important}.menu-button-small-true[_ngcontent-%COMP%]{color:#fff}.menu-button-small-false[_ngcontent-%COMP%]:hover{scale:1.1;cursor:pointer!important}.menu-button-small-false[_ngcontent-%COMP%]{color:#525c6e}.menu-input[_ngcontent-%COMP%]{margin:15px;background:transparent;border:0px;border-bottom:1px solid white;color:#fff}"]}),i})();const bc=[{path:"",component:ho},{path:"home",component:ho},{path:"landing",component:$a},{path:"help",component:j0},{path:"quick-game",component:Sa},{path:"offline-game",component:za},{path:"online-game",component:yo,children:[{path:"**",component:yo}]},{path:"leader-board",component:ec}];let wc=(()=>{var o;class i{}return(o=i).\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[_e.Bz.forChild(bc),_e.Bz]}),i})(),Sc=(()=>{var o;class i{}return o=i,m(i,"\u0275fac",function(n){return new(n||o)}),m(i,"\u0275mod",t.oAB({type:o})),m(i,"\u0275inj",t.cJS({imports:[L.ez]})),i})(),Ec=(()=>{var o;class i{}return(o=i).\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[L.ez,wc,vo,oa,Sc]}),i})()}}]);